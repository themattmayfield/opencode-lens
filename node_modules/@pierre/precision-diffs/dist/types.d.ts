import { BundledLanguage, BundledTheme, CodeToHastOptions, DecorationItem, HighlighterGeneric, ShikiTransformer, ThemeRegistrationResolved, ThemedToken } from "shiki";

//#region src/types.d.ts
interface FileContents {
  name: string;
  contents: string;
  header?: string;
}
type PJSThemeNames = BundledTheme | "pierre-dark" | "pierre-light" | (string & {});
type ThemesType = Record<"dark" | "light", PJSThemeNames>;
type PJSHighlighter = HighlighterGeneric<SupportedLanguages, PJSThemeNames>;
type ChangeTypes = "change" | "rename-pure" | "rename-changed" | "new" | "deleted";
interface ParsedPatch {
  patchMetadata?: string;
  files: FileDiffMetadata[];
}
interface Hunk {
  additionCount: number;
  additionStart: number;
  deletedCount: number;
  deletedStart: number;
  hunkContent: string[] | undefined;
  hunkContext: string | undefined;
  hunkSpecs: string | undefined;
}
interface FileDiffMetadata {
  name: string;
  prevName: string | undefined;
  type: ChangeTypes;
  hunks: Hunk[];
  lines: number;
  oldMode?: string;
  mode?: string;
  oldLines?: string[];
  newLines?: string[];
}
type SupportedLanguages = BundledLanguage | "text";
type HunkLineType = "context" | "expanded" | "addition" | "deletion" | "metadata";
type ThemeTypes = "system" | "light" | "dark";
type HunkSeparators = "simple" | "metadata" | "line-info" | "custom";
type LineDifftypes = "word-alt" | "word" | "char" | "none";
interface BaseCodeOptions {
  theme?: PJSThemeNames | ThemesType;
  disableLineNumbers?: boolean;
  overflow?: "scroll" | "wrap";
  themeType?: ThemeTypes;
  lang?: SupportedLanguages;
  preferWasmHighlighter?: boolean;
  useCSSClasses?: boolean;
  unsafeCSS?: string;
}
interface BaseDiffOptions extends BaseCodeOptions {
  diffStyle?: "unified" | "split";
  diffIndicators?: "classic" | "bars" | "none";
  disableBackground?: boolean;
  hunkSeparators?: HunkSeparators;
  expandUnchanged?: boolean;
  lineDiffType?: LineDifftypes;
  maxLineDiffLength?: number;
  maxLineLengthForHighlighting?: number;
}
interface RenderHeaderMetadataProps {
  oldFile?: FileContents;
  newFile?: FileContents;
  fileDiff?: FileDiffMetadata;
}
type RenderHeaderMetadataCallback = (props: RenderHeaderMetadataProps) => Element | null | undefined | string | number;
type RenderFileMetadata = (file: FileContents) => Element | null | undefined | string | number;
type ExtensionFormatMap = Record<string, SupportedLanguages | undefined>;
type AnnotationSide = "deletions" | "additions";
type OptionalMetadata<T> = T extends undefined ? {
  metadata?: undefined;
} : {
  metadata: T;
};
type LineAnnotation<T = undefined> = {
  lineNumber: number;
} & OptionalMetadata<T>;
type DiffLineAnnotation<T = undefined> = {
  side: AnnotationSide;
  lineNumber: number;
} & OptionalMetadata<T>;
interface GapSpan {
  type: "gap";
  rows: number;
}
type LineSpans = GapSpan | AnnotationSpan;
type LineTypes = "change-deletion" | "change-addition" | "context" | "context-expanded";
interface LineInfo {
  type: LineTypes;
  lineNumber: number;
  lineIndex: number;
  metadataContent?: string;
  spans?: LineSpans[];
}
interface SharedRenderState {
  lineInfo: Record<number, LineInfo | undefined>;
  decorations: DecorationItem[];
  disableLineNumbers: boolean;
}
interface AnnotationSpan {
  type: "annotation";
  hunkIndex: number;
  lineIndex: number;
  annotations: string[];
}
interface LineEventBaseProps {
  type: "line";
  lineNumber: number;
  lineElement: HTMLElement;
  numberColumn: boolean;
}
interface DiffLineEventBaseProps extends Omit<LineEventBaseProps, "type"> {
  type: "diff-line";
  annotationSide: AnnotationSide;
  lineType: LineTypes;
}
interface ObservedAnnotationNodes {
  type: "annotations";
  column1: {
    container: HTMLElement;
    child: HTMLElement;
    childHeight: number;
  };
  column2: {
    container: HTMLElement;
    child: HTMLElement;
    childHeight: number;
  };
  currentHeight: number | "auto";
}
interface ObservedGridNodes {
  type: "code";
  codeElement: HTMLElement;
  numberElement: HTMLElement | null;
  codeWidth: number | "auto";
  numberWidth: number;
}
interface HunkData {
  slotName: string;
  lines: number;
  type: "additions" | "deletions" | "unified";
  expandable: boolean;
}
interface ChangeHunk {
  diffGroupStartIndex: number;
  deletionStartIndex: number;
  additionStartIndex: number;
  deletionLines: string[];
  additionLines: string[];
}
type AnnotationLineMap<LAnnotation> = Record<number, DiffLineAnnotation<LAnnotation>[] | undefined>;
//#endregion
export { AnnotationLineMap, AnnotationSide, AnnotationSpan, BaseCodeOptions, BaseDiffOptions, type BundledLanguage, ChangeHunk, ChangeTypes, type CodeToHastOptions, type DecorationItem, DiffLineAnnotation, DiffLineEventBaseProps, ExtensionFormatMap, FileContents, FileDiffMetadata, GapSpan, Hunk, HunkData, HunkLineType, HunkSeparators, LineAnnotation, LineDifftypes, LineEventBaseProps, LineInfo, LineSpans, LineTypes, ObservedAnnotationNodes, ObservedGridNodes, PJSHighlighter, PJSThemeNames, ParsedPatch, RenderFileMetadata, RenderHeaderMetadataCallback, RenderHeaderMetadataProps, SharedRenderState, type ShikiTransformer, SupportedLanguages, type ThemeRegistrationResolved, ThemeTypes, type ThemedToken, ThemesType };
//# sourceMappingURL=types.d.ts.map