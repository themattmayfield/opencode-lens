{"version":3,"file":"parseDiffFromFile.js","names":[],"sources":["../../src/utils/parseDiffFromFile.ts"],"sourcesContent":["import { createTwoFilesPatch } from 'diff';\n\nimport { SPLIT_WITH_NEWLINES } from '../constants';\nimport type { FileContents, FileDiffMetadata } from '../types';\nimport { parsePatchFiles } from './parsePatchFiles';\n\nexport function parseDiffFromFile(\n  oldFile: FileContents,\n  newFile: FileContents\n): FileDiffMetadata {\n  const fileData = parsePatchFiles(\n    createTwoFilesPatch(\n      oldFile.name,\n      newFile.name,\n      oldFile.contents,\n      newFile.contents,\n      oldFile.header,\n      newFile.header\n    )\n  )[0]?.files[0];\n  if (fileData == null) {\n    throw new Error(\n      'parseDiffFrom: FileInvalid diff -- probably need to fix something -- if the files are the same maybe?'\n    );\n  }\n  fileData.oldLines = oldFile.contents.split(SPLIT_WITH_NEWLINES);\n  fileData.newLines = newFile.contents.split(SPLIT_WITH_NEWLINES);\n  return fileData;\n}\n"],"mappings":";;;;;AAMA,SAAgB,kBACd,SACA,SACkB;CAClB,MAAM,WAAW,gBACf,oBACE,QAAQ,MACR,QAAQ,MACR,QAAQ,UACR,QAAQ,UACR,QAAQ,QACR,QAAQ,OACT,CACF,CAAC,IAAI,MAAM;AACZ,KAAI,YAAY,KACd,OAAM,IAAI,MACR,wGACD;AAEH,UAAS,WAAW,QAAQ,SAAS,MAAM,oBAAoB;AAC/D,UAAS,WAAW,QAAQ,SAAS,MAAM,oBAAoB;AAC/D,QAAO"}