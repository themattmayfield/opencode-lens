import { DEFAULT_THEMES } from "../constants.js";
import { getHighlighterThemeStyles } from "./getHighlighterThemeStyles.js";
import { getTokenStyleObject, stringifyTokenStyle } from "shiki";

//#region src/utils/html_render_utils.ts
function createSpanFromToken(token) {
	const element = document.createElement("span");
	element.style = stringifyTokenStyle(token.htmlStyle ?? getTokenStyleObject(token));
	element.textContent = token.content;
	return element;
}
function createRow(line) {
	const row = document.createElement("div");
	row.dataset.line = `${line}`;
	const lineColumn = document.createElement("div");
	lineColumn.dataset.columnNumber = "";
	lineColumn.textContent = `${line}`;
	const content = document.createElement("div");
	content.dataset.columnContent = "";
	row.appendChild(lineColumn);
	row.appendChild(content);
	return {
		row,
		content
	};
}
function createCodeNode({ pre, columnType } = {}) {
	const code = document.createElement("code");
	code.dataset.code = "";
	if (columnType != null) code.dataset[columnType] = "";
	pre?.appendChild(code);
	return code;
}
function setWrapperProps({ pre, highlighter, theme = DEFAULT_THEMES, split, wrap, themeType, diffIndicators, disableBackground, totalLines }) {
	const styles = getHighlighterThemeStyles({
		theme,
		highlighter
	});
	if (themeType === "system") delete pre.dataset.themeType;
	else pre.dataset.themeType = themeType;
	if (typeof theme === "string") {
		const themeData = highlighter.getTheme(theme);
		pre.dataset.themeType = themeData.type;
	}
	switch (diffIndicators) {
		case "bars":
		case "classic":
			pre.dataset.indicators = diffIndicators;
			break;
		case "none":
			delete pre.dataset.indicators;
			break;
	}
	if (disableBackground) delete pre.dataset.background;
	else pre.dataset.background = "";
	pre.dataset.type = split ? "split" : "file";
	pre.dataset.overflow = wrap ? "wrap" : "scroll";
	pre.dataset.pjs = "";
	pre.tabIndex = 0;
	pre.style = styles;
	pre.style.setProperty("--pjs-min-number-column-width-default", `${`${totalLines}`.length}ch`);
	return pre;
}

//#endregion
export { createCodeNode, createRow, createSpanFromToken, setWrapperProps };
//# sourceMappingURL=html_render_utils.js.map