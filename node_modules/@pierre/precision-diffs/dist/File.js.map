{"version":3,"file":"File.js","names":["options: FileOptions<LAnnotation>"],"sources":["../src/File.ts"],"sourcesContent":["import deepEquals from 'fast-deep-equal';\nimport type { Element } from 'hast';\n\nimport { FileHeaderRenderer } from './FileHeaderRenderer';\nimport { type FileRenderResult, FileRenderer } from './FileRenderer';\nimport {\n  MouseEventManager,\n  type MouseEventManagerBaseOptions,\n  getMouseEventOptions,\n} from './MouseEventManager';\nimport { ResizeManager } from './ResizeManager';\nimport { getSharedHighlighter } from './SharedHighlighter';\nimport { DEFAULT_THEMES, HEADER_METADATA_SLOT_ID } from './constants';\nimport { PJSContainerLoaded } from './custom-components/Container';\nimport { SVGSpriteSheet } from './sprite';\nimport type {\n  BaseCodeOptions,\n  FileContents,\n  LineAnnotation,\n  PJSHighlighter,\n  RenderFileMetadata,\n  ThemeTypes,\n} from './types';\nimport { getLineAnnotationName } from './utils/getLineAnnotationName';\nimport { getThemes } from './utils/getThemes';\nimport { createCodeNode, setWrapperProps } from './utils/html_render_utils';\n\ninterface FileRenderProps<LAnnotation> {\n  file: FileContents;\n  fileContainer?: HTMLElement;\n  containerWrapper?: HTMLElement;\n  forceRender?: boolean;\n  lineAnnotations?: LineAnnotation<LAnnotation>[];\n}\n\nexport interface FileOptions<LAnnotation>\n  extends BaseCodeOptions,\n    MouseEventManagerBaseOptions<'file'> {\n  disableFileHeader?: boolean;\n  renderCustomMetadata?: RenderFileMetadata;\n  renderAnnotation?(\n    annotation: LineAnnotation<LAnnotation>\n  ): HTMLElement | undefined;\n}\n\nlet instanceId = -1;\n\nexport class File<LAnnotation = undefined> {\n  static LoadedCustomComponent: boolean = PJSContainerLoaded;\n\n  readonly __id: number = ++instanceId;\n  private fileContainer: HTMLElement | undefined;\n  private spriteSVG: SVGElement | undefined;\n  private pre: HTMLPreElement | undefined;\n  private code: HTMLElement | undefined;\n  private unsafeCSSStyle: HTMLStyleElement | undefined;\n\n  private headerElement: HTMLElement | undefined;\n  private headerMetadata: HTMLElement | undefined;\n\n  private fileRenderer: FileRenderer<LAnnotation>;\n  private headerRenderer: FileHeaderRenderer;\n  private resizeManager: ResizeManager;\n  private mouseEventManager: MouseEventManager<'file'>;\n\n  private annotationElements: HTMLElement[] = [];\n  private lineAnnotations: LineAnnotation<LAnnotation>[] = [];\n\n  private file: FileContents | undefined;\n\n  constructor(\n    public options: FileOptions<LAnnotation> = { theme: DEFAULT_THEMES },\n    private isContainerManaged = false\n  ) {\n    this.fileRenderer = new FileRenderer<LAnnotation>(options);\n    this.headerRenderer = new FileHeaderRenderer(options);\n    this.resizeManager = new ResizeManager();\n    this.mouseEventManager = new MouseEventManager(\n      'file',\n      getMouseEventOptions(options)\n    );\n  }\n\n  setOptions(options: FileOptions<LAnnotation> | undefined): void {\n    if (options == null) return;\n    this.options = options;\n    this.mouseEventManager.setOptions(getMouseEventOptions(options));\n  }\n\n  private mergeOptions(options: Partial<FileOptions<LAnnotation>>): void {\n    this.options = { ...this.options, ...options };\n  }\n\n  setThemeType(themeType: ThemeTypes): void {\n    const currentThemeType = this.options.themeType ?? 'system';\n    if (currentThemeType === themeType) {\n      return;\n    }\n    this.mergeOptions({ themeType });\n    this.headerRenderer.setThemeType(themeType);\n    this.fileRenderer.setThemeType(themeType);\n\n    if (this.headerElement != null) {\n      if (themeType === 'system') {\n        delete this.headerElement.dataset.themeType;\n      } else {\n        this.headerElement.dataset.themeType = themeType;\n      }\n    }\n\n    // Update pre element theme mode\n    if (this.pre != null) {\n      switch (themeType) {\n        case 'system':\n          delete this.pre.dataset.themeType;\n          break;\n        case 'light':\n        case 'dark':\n          this.pre.dataset.themeType = themeType;\n          break;\n      }\n    }\n  }\n\n  setLineAnnotations(lineAnnotations: LineAnnotation<LAnnotation>[]): void {\n    this.lineAnnotations = lineAnnotations;\n  }\n\n  cleanUp(): void {\n    this.fileRenderer.cleanUp();\n    this.headerRenderer.cleanUp();\n    this.resizeManager.cleanUp();\n    this.mouseEventManager.cleanUp();\n\n    // Clean up the data\n    this.file = undefined;\n\n    // Clean up the elements\n    if (!this.isContainerManaged) {\n      this.fileContainer?.parentNode?.removeChild(this.fileContainer);\n    }\n    this.fileContainer = undefined;\n    this.pre = undefined;\n    this.headerElement = undefined;\n  }\n\n  async hydrate(props: FileRenderProps<LAnnotation>): Promise<void> {\n    if (props.fileContainer == null) {\n      throw new Error(\n        'FileDiff: you must provide a fileContainer on hydration'\n      );\n    }\n    for (const element of Array.from(\n      props.fileContainer.shadowRoot?.children ?? []\n    )) {\n      if (element instanceof SVGElement) {\n        this.spriteSVG = element;\n        continue;\n      }\n      if (!(element instanceof HTMLElement)) {\n        continue;\n      }\n      if (element instanceof HTMLPreElement) {\n        this.pre = element;\n        continue;\n      }\n      if (element instanceof HTMLStyleElement) {\n        this.unsafeCSSStyle = element;\n        continue;\n      }\n      if ('pjsHeader' in element.dataset) {\n        this.headerElement = element;\n        continue;\n      }\n    }\n    // If we have no pre tag, then we should render\n    if (this.pre == null) {\n      await this.render(props);\n    }\n    // Otherwise orchestrate our setup\n    else {\n      this.fileContainer = props.fileContainer;\n      delete this.pre.dataset.dehydrated;\n\n      this.lineAnnotations = props.lineAnnotations ?? this.lineAnnotations;\n      this.file = props.file;\n      void this.fileRenderer.initializeHighlighter();\n      this.renderAnnotations();\n      this.injectUnsafeCSS();\n      this.mouseEventManager.setup(this.pre);\n      if ((this.options.overflow ?? 'scroll') === 'scroll') {\n        this.resizeManager.setup(this.pre);\n      }\n    }\n  }\n\n  async render({\n    file,\n    fileContainer,\n    containerWrapper,\n    forceRender = false,\n    lineAnnotations,\n  }: FileRenderProps<LAnnotation>): Promise<void> {\n    if (!forceRender && deepEquals(this.file, file)) {\n      return;\n    }\n\n    this.file = file;\n\n    this.fileRenderer.setOptions(this.options);\n    if (lineAnnotations != null) {\n      this.fileRenderer.setLineAnnotations(lineAnnotations);\n      this.setLineAnnotations(lineAnnotations);\n    }\n\n    const { disableFileHeader = false } = this.options;\n    if (disableFileHeader) {\n      this.headerRenderer.cleanUp();\n      // Remove existing header from DOM\n      if (this.headerElement != null) {\n        this.headerElement.parentNode?.removeChild(this.headerElement);\n        this.headerElement = undefined;\n      }\n    } else {\n      this.headerRenderer.setOptions(this.options);\n    }\n\n    const [highlighter, headerResult, fileResult] = await Promise.all([\n      getSharedHighlighter({\n        themes: getThemes(this.options.theme),\n        langs: [],\n      }),\n      !disableFileHeader ? this.headerRenderer.render(file) : undefined,\n      this.fileRenderer.render(file),\n    ]);\n\n    if (headerResult == null && fileResult == null) {\n      return;\n    }\n\n    fileContainer = this.getOrCreateFileContainer(fileContainer);\n    if (headerResult != null) {\n      this.applyHeaderToDOM(headerResult, fileContainer);\n    }\n\n    if (fileResult != null) {\n      if (containerWrapper != null) {\n        containerWrapper.appendChild(fileContainer);\n      }\n      const pre = this.getOrCreatePre(fileContainer);\n      this.applyHunksToDOM(fileResult, pre, highlighter);\n      this.renderAnnotations();\n    }\n  }\n\n  private renderAnnotations(): void {\n    if (this.isContainerManaged || this.fileContainer == null) {\n      return;\n    }\n    // Handle annotation elements\n    for (const element of this.annotationElements) {\n      element.parentNode?.removeChild(element);\n    }\n    this.annotationElements.length = 0;\n\n    const { renderAnnotation } = this.options;\n    if (renderAnnotation != null && this.lineAnnotations.length > 0) {\n      for (const annotation of this.lineAnnotations) {\n        const content = renderAnnotation(annotation);\n        if (content == null) continue;\n        const el = document.createElement('div');\n        el.dataset.annotationSlot = '';\n        el.slot = getLineAnnotationName(annotation);\n        el.appendChild(content);\n        this.annotationElements.push(el);\n        this.fileContainer.appendChild(el);\n      }\n    }\n  }\n\n  private injectUnsafeCSS(): void {\n    if (this.fileContainer?.shadowRoot == null) {\n      return;\n    }\n    const { unsafeCSS } = this.options;\n\n    if (unsafeCSS == null || unsafeCSS === '') {\n      return;\n    }\n\n    // Create or update the style element\n    if (this.unsafeCSSStyle == null) {\n      this.unsafeCSSStyle = document.createElement('style');\n      this.fileContainer.shadowRoot.appendChild(this.unsafeCSSStyle);\n    }\n    // Wrap in @layer unsafe to match SSR behavior\n    this.unsafeCSSStyle.insertAdjacentText(\n      'beforeend',\n      `@layer unsafe {\\n${unsafeCSS}\\n}`\n    );\n  }\n\n  private applyHunksToDOM(\n    result: FileRenderResult,\n    pre: HTMLPreElement,\n    highlighter: PJSHighlighter\n  ): void {\n    this.setPreAttributes(pre, highlighter, result.totalLines);\n    pre.innerHTML = '';\n    // Create code elements and insert HTML content\n    this.code = createCodeNode();\n    this.code.innerHTML = this.fileRenderer.renderPartialHTML(result.codeAST);\n    pre.appendChild(this.code);\n    this.injectUnsafeCSS();\n    this.mouseEventManager.setup(pre);\n    if ((this.options.overflow ?? 'scroll') === 'scroll') {\n      this.resizeManager.setup(pre);\n    } else {\n      this.resizeManager.cleanUp();\n    }\n  }\n\n  private applyHeaderToDOM(headerAST: Element, container: HTMLElement): void {\n    const { file } = this;\n    if (file == null) return;\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = this.headerRenderer.renderResultToHTML(headerAST);\n    const newHeader = tempDiv.firstElementChild;\n    if (!(newHeader instanceof HTMLElement)) {\n      return;\n    }\n    if (this.headerElement != null) {\n      container.shadowRoot?.replaceChild(newHeader, this.headerElement);\n    } else {\n      container.shadowRoot?.prepend(newHeader);\n    }\n    this.headerElement = newHeader;\n\n    if (this.isContainerManaged) return;\n\n    const { renderCustomMetadata } = this.options;\n    if (this.headerMetadata != null) {\n      this.headerMetadata.parentNode?.removeChild(this.headerMetadata);\n    }\n    const content = renderCustomMetadata?.(file) ?? undefined;\n    if (content != null) {\n      this.headerMetadata = document.createElement('div');\n      this.headerMetadata.slot = HEADER_METADATA_SLOT_ID;\n      if (content instanceof Element) {\n        this.headerMetadata.appendChild(content);\n      } else {\n        this.headerMetadata.innerText = `${content}`;\n      }\n      container.appendChild(this.headerMetadata);\n    }\n  }\n\n  private getOrCreateFileContainer(fileContainer?: HTMLElement): HTMLElement {\n    this.fileContainer =\n      fileContainer ??\n      this.fileContainer ??\n      document.createElement('file-diff');\n    if (this.spriteSVG == null) {\n      const fragment = document.createElement('div');\n      fragment.innerHTML = SVGSpriteSheet;\n      const firstChild = fragment.firstChild;\n      if (firstChild instanceof SVGElement) {\n        this.spriteSVG = firstChild;\n        this.fileContainer.shadowRoot?.appendChild(this.spriteSVG);\n      }\n    }\n    return this.fileContainer;\n  }\n\n  private getOrCreatePre(container: HTMLElement): HTMLPreElement {\n    // If we haven't created a pre element yet, lets go ahead and do that\n    if (this.pre == null) {\n      this.pre = document.createElement('pre');\n      container.shadowRoot?.appendChild(this.pre);\n    }\n    // If we have a new parent container for the pre element, lets go ahead and\n    // move it into the new container\n    else if (this.pre.parentNode !== container) {\n      container.shadowRoot?.appendChild(this.pre);\n    }\n    return this.pre;\n  }\n\n  private setPreAttributes(\n    pre: HTMLPreElement,\n    highlighter: PJSHighlighter,\n    totalLines: number\n  ): void {\n    const { overflow = 'scroll', theme, themeType = 'system' } = this.options;\n    const wrap = overflow === 'wrap';\n    setWrapperProps({\n      pre,\n      theme,\n      highlighter,\n      split: false,\n      wrap,\n      themeType,\n      diffIndicators: 'none',\n      disableBackground: true,\n      totalLines,\n    });\n  }\n}\n"],"mappings":"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"}