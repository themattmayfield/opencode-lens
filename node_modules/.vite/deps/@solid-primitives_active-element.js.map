{
  "version": 3,
  "sources": ["../../@solid-primitives/event-listener/dist/eventListener.js", "../../@solid-primitives/active-element/dist/index.js"],
  "sourcesContent": ["import { access, asArray, tryOnCleanup, } from \"@solid-primitives/utils\";\nimport { createEffect, createRenderEffect, createSignal } from \"solid-js\";\nimport { isServer } from \"solid-js/web\";\nexport function makeEventListener(target, type, handler, options) {\n    target.addEventListener(type, handler, options);\n    return tryOnCleanup(target.removeEventListener.bind(target, type, handler, options));\n}\nexport function createEventListener(targets, type, handler, options) {\n    if (isServer)\n        return;\n    const attachListeners = () => {\n        asArray(access(targets)).forEach(el => {\n            if (el)\n                asArray(access(type)).forEach(type => makeEventListener(el, type, handler, options));\n        });\n    };\n    // if the target is an accessor the listeners will be added on the first effect (onMount)\n    // so that when passed a jsx ref it will be availabe\n    if (typeof targets === \"function\")\n        createEffect(attachListeners);\n    // if the target prop is NOT an accessor, the event listeners can be added right away\n    else\n        createRenderEffect(attachListeners);\n}\nexport function createEventSignal(target, type, options) {\n    if (isServer) {\n        return () => undefined;\n    }\n    const [lastEvent, setLastEvent] = createSignal();\n    createEventListener(target, type, setLastEvent, options);\n    return lastEvent;\n}\n/**\n * Directive Usage. Creates an event listener, that will be automatically disposed on cleanup.\n *\n * @param props [eventType, handler, options]\n *\n * @example\n * <button use:eventListener={[\"click\", () => {...}]}>Click me!</button>\n */\nexport const eventListener = (target, props) => {\n    createEffect(() => {\n        const [type, handler, options] = props();\n        makeEventListener(target, type, handler, options);\n    });\n};\n// // /* TypeCheck */\n// const mouseHandler = (e: MouseEvent) => {};\n// const touchHandler = (e: TouchEvent) => {};\n// const el = document.createElement(\"div\");\n// // dom events\n// createEventListener(window as Window | undefined, \"mousemove\", mouseHandler);\n// createEventListener(document, \"touchstart\", touchHandler);\n// createEventListener(el, \"mousemove\", mouseHandler);\n// createEventListener(() => el, \"touchstart\", touchHandler);\n// const mouseSignal = createEventSignal(window, \"mousemove\");\n// const touchSignal = createEventSignal(() => document, \"touchstart\");\n// // custom events\n// createEventListener<{ test: MouseEvent }>(window, \"test\", mouseHandler);\n// createEventListener<{ test: Event; custom: MouseEvent }, \"custom\">(\n//   () => el,\n//   \"custom\",\n//   mouseHandler\n// );\n// createEventListener<{ test: Event }>(new EventTarget(), \"test\", () => console.log(\"test\"));\n// const testSignal = createEventSignal<{ test: MouseEvent }>(window, \"test\");\n// const customSignal = createEventSignal<{ test: Event; custom: MouseEvent }, \"custom\">(\n//   () => document,\n//   \"custom\"\n// );\n// // directive\n// eventListener(el, () => [\"mousemove\", mouseHandler, { passive: true }]);\n// eventListener(el, () => [\"custom\", e => {}]);\n", "import {} from \"solid-js\";\nimport { isServer } from \"solid-js/web\";\nimport { createHydratableSignal, } from \"@solid-primitives/utils\";\nimport { makeEventListener, createEventListener } from \"@solid-primitives/event-listener\";\nconst getActiveElement = () => document.activeElement === document.body ? null : document.activeElement;\n/**\n * Attaches event listeners to window, listening for the changes of the `document.activeElement`.\n * @see https://github.com/solidjs-community/solid-primitives/tree/main/packages/active-element#makeActiveElementListener\n * @param callback handle active element change\n * @returns function to clear event listeners\n * @example\n * const [activeElement, setActiveElement] = createSignal(null);\n * const clear = makeActiveElementListener(el => setActiveElement(el));\n * // remove listeners (happens also on cleanup)\n * clear();\n */\nexport function makeActiveElementListener(callback) {\n    if (isServer) {\n        return () => void 0;\n    }\n    const handleChange = () => callback(getActiveElement());\n    const clear1 = makeEventListener(window, \"blur\", handleChange, true);\n    const clear2 = makeEventListener(window, \"focus\", handleChange, true);\n    return () => (clear1(), clear2());\n}\n/**\n * Provides reactive signal of `document.activeElement`. Check which element is currently focused.\n *\n * @see https://github.com/solidjs-community/solid-primitives/tree/main/packages/active-element#createActiveElement\n * @example\n * const activeEl = createActiveElement()\n * activeEl() // T: Element | null\n */\nexport function createActiveElement() {\n    if (isServer) {\n        return () => null;\n    }\n    const [active, setActive] = createHydratableSignal(null, getActiveElement);\n    makeActiveElementListener(setActive);\n    return active;\n}\n/**\n * Attaches \"blur\" and \"focus\" event listeners to the element.\n * @see https://github.com/solidjs-community/solid-primitives/tree/main/packages/active-element#makeFocusListener\n * @param target element\n * @param callback handle focus change\n * @param useCapture activates capturing, which allows to listen on events at the root that don't support bubbling.\n * @returns function for clearing event listeners\n * @example\n * const [isFocused, setIsFocused] = createSignal(false)\n * const clear = makeFocusListener(focused => setIsFocused(focused));\n * // remove listeners (happens also on cleanup)\n * clear();\n */\nexport function makeFocusListener(target, callback, useCapture = true) {\n    if (isServer) {\n        return () => void 0;\n    }\n    const clear1 = makeEventListener(target, \"blur\", callback.bind(void 0, false), useCapture);\n    const clear2 = makeEventListener(target, \"focus\", callback.bind(void 0, true), useCapture);\n    return () => (clear1(), clear2());\n}\n/**\n * Provides a signal representing element's focus state.\n * @param target element or a reactive function returning one\n * @returns boolean signal representing element's focus state\n * @see https://github.com/solidjs-community/solid-primitives/tree/main/packages/active-element#createFocusSignal\n * @example\n * const isFocused = createFocusSignal(() => el)\n * isFocused() // T: boolean\n */\nexport function createFocusSignal(target) {\n    if (isServer) {\n        return () => false;\n    }\n    const [isActive, setIsActive] = createHydratableSignal(false, () => document.activeElement === target);\n    createEventListener(target, \"blur\", () => setIsActive(false), true);\n    createEventListener(target, \"focus\", () => setIsActive(true), true);\n    return isActive;\n}\n/**\n * A directive that notifies you when the element becomes active or inactive.\n *\n * @see https://github.com/solidjs-community/solid-primitives/tree/main/packages/active-element#focus\n *\n * @example\n * const [active, setActive] = createSignal(false)\n * <input use:focus={setActive} />\n */\nexport const focus = (target, props) => {\n    if (isServer) {\n        return;\n    }\n    const callback = props();\n    callback(document.activeElement === target);\n    makeFocusListener(target, callback);\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;AAGO,SAAS,kBAAkB,QAAQ,MAAM,SAAS,SAAS;AAC9D,SAAO,iBAAiB,MAAM,SAAS,OAAO;AAC9C,SAAO,aAAa,OAAO,oBAAoB,KAAK,QAAQ,MAAM,SAAS,OAAO,CAAC;AACvF;AACO,SAAS,oBAAoB,SAAS,MAAM,SAAS,SAAS;AACjE,MAAI;AACA;AACJ,QAAM,kBAAkB,MAAM;AAC1B,YAAQ,OAAO,OAAO,CAAC,EAAE,QAAQ,QAAM;AACnC,UAAI;AACA,gBAAQ,OAAO,IAAI,CAAC,EAAE,QAAQ,CAAAA,UAAQ,kBAAkB,IAAIA,OAAM,SAAS,OAAO,CAAC;AAAA,IAC3F,CAAC;AAAA,EACL;AAGA,MAAI,OAAO,YAAY;AACnB,iBAAa,eAAe;AAAA;AAG5B,uBAAmB,eAAe;AAC1C;;;ACnBA,IAAM,mBAAmB,MAAM,SAAS,kBAAkB,SAAS,OAAO,OAAO,SAAS;AAYnF,SAAS,0BAA0B,UAAU;AAChD,MAAI,UAAU;AACV,WAAO,MAAM;AAAA,EACjB;AACA,QAAM,eAAe,MAAM,SAAS,iBAAiB,CAAC;AACtD,QAAM,SAAS,kBAAkB,QAAQ,QAAQ,cAAc,IAAI;AACnE,QAAM,SAAS,kBAAkB,QAAQ,SAAS,cAAc,IAAI;AACpE,SAAO,OAAO,OAAO,GAAG,OAAO;AACnC;AASO,SAAS,sBAAsB;AAClC,MAAI,UAAU;AACV,WAAO,MAAM;AAAA,EACjB;AACA,QAAM,CAAC,QAAQ,SAAS,IAAI,uBAAuB,MAAM,gBAAgB;AACzE,4BAA0B,SAAS;AACnC,SAAO;AACX;AAcO,SAAS,kBAAkB,QAAQ,UAAU,aAAa,MAAM;AACnE,MAAI,UAAU;AACV,WAAO,MAAM;AAAA,EACjB;AACA,QAAM,SAAS,kBAAkB,QAAQ,QAAQ,SAAS,KAAK,QAAQ,KAAK,GAAG,UAAU;AACzF,QAAM,SAAS,kBAAkB,QAAQ,SAAS,SAAS,KAAK,QAAQ,IAAI,GAAG,UAAU;AACzF,SAAO,OAAO,OAAO,GAAG,OAAO;AACnC;AAUO,SAAS,kBAAkB,QAAQ;AACtC,MAAI,UAAU;AACV,WAAO,MAAM;AAAA,EACjB;AACA,QAAM,CAAC,UAAU,WAAW,IAAI,uBAAuB,OAAO,MAAM,SAAS,kBAAkB,MAAM;AACrG,sBAAoB,QAAQ,QAAQ,MAAM,YAAY,KAAK,GAAG,IAAI;AAClE,sBAAoB,QAAQ,SAAS,MAAM,YAAY,IAAI,GAAG,IAAI;AAClE,SAAO;AACX;AAUO,IAAM,QAAQ,CAAC,QAAQ,UAAU;AACpC,MAAI,UAAU;AACV;AAAA,EACJ;AACA,QAAM,WAAW,MAAM;AACvB,WAAS,SAAS,kBAAkB,MAAM;AAC1C,oBAAkB,QAAQ,QAAQ;AACtC;",
  "names": ["type"]
}
