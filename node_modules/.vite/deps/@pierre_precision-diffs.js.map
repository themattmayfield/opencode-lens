{
  "version": 3,
  "sources": ["../../fast-deep-equal/index.js", "../../@shikijs/core/node_modules/@shikijs/types/dist/index.mjs", "../../@shikijs/core/dist/index.mjs", "../../@pierre/precision-diffs/node_modules/shiki/dist/langs.mjs", "../../@pierre/precision-diffs/node_modules/shiki/dist/themes.mjs", "../../@pierre/precision-diffs/node_modules/shiki/node_modules/@shikijs/engine-oniguruma/dist/index.mjs", "../../@pierre/precision-diffs/node_modules/shiki/dist/bundle-full.mjs", "../../@pierre/precision-diffs/node_modules/shiki/node_modules/@shikijs/engine-javascript/dist/shared/engine-javascript.hzpS1_41.mjs", "../../@pierre/precision-diffs/node_modules/shiki/node_modules/@shikijs/engine-javascript/dist/engine-compile.mjs", "../../@pierre/precision-diffs/src/SharedHighlighter.ts", "../../@pierre/precision-diffs/src/constants.ts", "../../@pierre/precision-diffs/src/utils/getLineAnnotationName.ts", "../../@pierre/precision-diffs/src/utils/getFiletypeFromFileName.ts", "../../@pierre/precision-diffs/src/utils/parseLineType.ts", "../../@pierre/precision-diffs/src/utils/createMirroredAnnotationSpan.ts", "../../@pierre/precision-diffs/src/utils/createSingleAnnotationSpan.ts", "../../@pierre/precision-diffs/src/utils/formatCSSVariablePrefix.ts", "../../@pierre/precision-diffs/src/utils/getHighlighterThemeStyles.ts", "../../@pierre/precision-diffs/src/utils/getIconForType.ts", "../../@pierre/precision-diffs/src/utils/hast_utils.ts", "../../@pierre/precision-diffs/node_modules/@shikijs/transformers/dist/index.mjs", "../../@pierre/precision-diffs/src/utils/createTransformerWithState.ts", "../../@pierre/precision-diffs/src/utils/getThemes.ts", "../../@pierre/precision-diffs/src/utils/getHighlighterOptions.ts", "../../@pierre/precision-diffs/src/utils/getHunkSeparatorSlotName.ts", "../../@pierre/precision-diffs/src/utils/getTotalLineCountFromHunks.ts", "../../diff/libesm/diff/base.js", "../../diff/libesm/diff/character.js", "../../diff/libesm/util/string.js", "../../diff/libesm/diff/word.js", "../../diff/libesm/diff/line.js", "../../diff/libesm/diff/sentence.js", "../../diff/libesm/diff/css.js", "../../diff/libesm/diff/json.js", "../../diff/libesm/diff/array.js", "../../diff/libesm/patch/create.js", "../../@pierre/precision-diffs/src/utils/parseDiffDecorations.ts", "../../@pierre/precision-diffs/src/utils/pushOrMergeSpan.ts", "../../@pierre/precision-diffs/src/DiffHunksRenderer.ts", "../../@pierre/precision-diffs/src/FileHeaderRenderer.ts", "../../@pierre/precision-diffs/src/MouseEventManager.ts", "../../@pierre/precision-diffs/src/ResizeManager.ts", "../../@pierre/precision-diffs/src/utils/html_render_utils.ts", "../../@pierre/precision-diffs/src/FileRenderer.ts", "../../@pierre/precision-diffs/src/style.css", "../../@pierre/precision-diffs/src/custom-components/Container.ts", "../../@pierre/precision-diffs/src/sprite.ts", "../../@pierre/precision-diffs/src/File.ts", "../../@pierre/precision-diffs/src/ScrollSyncManager.ts", "../../@pierre/precision-diffs/src/utils/parsePatchFiles.ts", "../../@pierre/precision-diffs/src/utils/parseDiffFromFile.ts", "../../@pierre/precision-diffs/src/FileDiff.ts", "../../@pierre/precision-diffs/src/UniversalRenderer.ts", "../../@pierre/precision-diffs/src/shiki-stream/tokenizer.ts", "../../@pierre/precision-diffs/src/shiki-stream/stream.ts", "../../@pierre/precision-diffs/src/FileStream.ts"],
  "sourcesContent": ["'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n", "class ShikiError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = \"ShikiError\";\n  }\n}\n\nexport { ShikiError };\n", "import { ShikiError as ShikiError$1 } from '@shikijs/types';\nexport * from '@shikijs/types';\nimport { FontStyle, INITIAL, EncodedTokenMetadata, Registry as Registry$1, Theme } from '@shikijs/vscode-textmate';\nimport { toHtml } from 'hast-util-to-html';\n\nfunction resolveColorReplacements(theme, options) {\n  const replacements = typeof theme === \"string\" ? {} : { ...theme.colorReplacements };\n  const themeName = typeof theme === \"string\" ? theme : theme.name;\n  for (const [key, value] of Object.entries(options?.colorReplacements || {})) {\n    if (typeof value === \"string\")\n      replacements[key] = value;\n    else if (key === themeName)\n      Object.assign(replacements, value);\n  }\n  return replacements;\n}\nfunction applyColorReplacements(color, replacements) {\n  if (!color)\n    return color;\n  return replacements?.[color?.toLowerCase()] || color;\n}\n\nfunction toArray(x) {\n  return Array.isArray(x) ? x : [x];\n}\nasync function normalizeGetter(p) {\n  return Promise.resolve(typeof p === \"function\" ? p() : p).then((r) => r.default || r);\n}\nfunction isPlainLang(lang) {\n  return !lang || [\"plaintext\", \"txt\", \"text\", \"plain\"].includes(lang);\n}\nfunction isSpecialLang(lang) {\n  return lang === \"ansi\" || isPlainLang(lang);\n}\nfunction isNoneTheme(theme) {\n  return theme === \"none\";\n}\nfunction isSpecialTheme(theme) {\n  return isNoneTheme(theme);\n}\n\nfunction addClassToHast(node, className) {\n  if (!className)\n    return node;\n  node.properties ||= {};\n  node.properties.class ||= [];\n  if (typeof node.properties.class === \"string\")\n    node.properties.class = node.properties.class.split(/\\s+/g);\n  if (!Array.isArray(node.properties.class))\n    node.properties.class = [];\n  const targets = Array.isArray(className) ? className : className.split(/\\s+/g);\n  for (const c of targets) {\n    if (c && !node.properties.class.includes(c))\n      node.properties.class.push(c);\n  }\n  return node;\n}\n\nfunction splitLines(code, preserveEnding = false) {\n  const parts = code.split(/(\\r?\\n)/g);\n  let index = 0;\n  const lines = [];\n  for (let i = 0; i < parts.length; i += 2) {\n    const line = preserveEnding ? parts[i] + (parts[i + 1] || \"\") : parts[i];\n    lines.push([line, index]);\n    index += parts[i].length;\n    index += parts[i + 1]?.length || 0;\n  }\n  return lines;\n}\nfunction createPositionConverter(code) {\n  const lines = splitLines(code, true).map(([line]) => line);\n  function indexToPos(index) {\n    if (index === code.length) {\n      return {\n        line: lines.length - 1,\n        character: lines[lines.length - 1].length\n      };\n    }\n    let character = index;\n    let line = 0;\n    for (const lineText of lines) {\n      if (character < lineText.length)\n        break;\n      character -= lineText.length;\n      line++;\n    }\n    return { line, character };\n  }\n  function posToIndex(line, character) {\n    let index = 0;\n    for (let i = 0; i < line; i++)\n      index += lines[i].length;\n    index += character;\n    return index;\n  }\n  return {\n    lines,\n    indexToPos,\n    posToIndex\n  };\n}\nfunction guessEmbeddedLanguages(code, _lang, highlighter) {\n  const langs = /* @__PURE__ */ new Set();\n  for (const match of code.matchAll(/lang=[\"']([\\w-]+)[\"']/g)) {\n    langs.add(match[1]);\n  }\n  for (const match of code.matchAll(/(?:```|~~~)([\\w-]+)/g)) {\n    langs.add(match[1]);\n  }\n  for (const match of code.matchAll(/\\\\begin\\{([\\w-]+)\\}/g)) {\n    langs.add(match[1]);\n  }\n  if (!highlighter)\n    return Array.from(langs);\n  const bundle = highlighter.getBundledLanguages();\n  return Array.from(langs).filter((l) => l && bundle[l]);\n}\n\nconst DEFAULT_COLOR_LIGHT_DARK = \"light-dark()\";\nconst COLOR_KEYS = [\"color\", \"background-color\"];\n\nfunction splitToken(token, offsets) {\n  let lastOffset = 0;\n  const tokens = [];\n  for (const offset of offsets) {\n    if (offset > lastOffset) {\n      tokens.push({\n        ...token,\n        content: token.content.slice(lastOffset, offset),\n        offset: token.offset + lastOffset\n      });\n    }\n    lastOffset = offset;\n  }\n  if (lastOffset < token.content.length) {\n    tokens.push({\n      ...token,\n      content: token.content.slice(lastOffset),\n      offset: token.offset + lastOffset\n    });\n  }\n  return tokens;\n}\nfunction splitTokens(tokens, breakpoints) {\n  const sorted = Array.from(breakpoints instanceof Set ? breakpoints : new Set(breakpoints)).sort((a, b) => a - b);\n  if (!sorted.length)\n    return tokens;\n  return tokens.map((line) => {\n    return line.flatMap((token) => {\n      const breakpointsInToken = sorted.filter((i) => token.offset < i && i < token.offset + token.content.length).map((i) => i - token.offset).sort((a, b) => a - b);\n      if (!breakpointsInToken.length)\n        return token;\n      return splitToken(token, breakpointsInToken);\n    });\n  });\n}\nfunction flatTokenVariants(merged, variantsOrder, cssVariablePrefix, defaultColor, colorsRendering = \"css-vars\") {\n  const token = {\n    content: merged.content,\n    explanation: merged.explanation,\n    offset: merged.offset\n  };\n  const styles = variantsOrder.map((t) => getTokenStyleObject(merged.variants[t]));\n  const styleKeys = new Set(styles.flatMap((t) => Object.keys(t)));\n  const mergedStyles = {};\n  const varKey = (idx, key) => {\n    const keyName = key === \"color\" ? \"\" : key === \"background-color\" ? \"-bg\" : `-${key}`;\n    return cssVariablePrefix + variantsOrder[idx] + (key === \"color\" ? \"\" : keyName);\n  };\n  styles.forEach((cur, idx) => {\n    for (const key of styleKeys) {\n      const value = cur[key] || \"inherit\";\n      if (idx === 0 && defaultColor && COLOR_KEYS.includes(key)) {\n        if (defaultColor === DEFAULT_COLOR_LIGHT_DARK && styles.length > 1) {\n          const lightIndex = variantsOrder.findIndex((t) => t === \"light\");\n          const darkIndex = variantsOrder.findIndex((t) => t === \"dark\");\n          if (lightIndex === -1 || darkIndex === -1)\n            throw new ShikiError$1('When using `defaultColor: \"light-dark()\"`, you must provide both `light` and `dark` themes');\n          const lightValue = styles[lightIndex][key] || \"inherit\";\n          const darkValue = styles[darkIndex][key] || \"inherit\";\n          mergedStyles[key] = `light-dark(${lightValue}, ${darkValue})`;\n          if (colorsRendering === \"css-vars\")\n            mergedStyles[varKey(idx, key)] = value;\n        } else {\n          mergedStyles[key] = value;\n        }\n      } else {\n        if (colorsRendering === \"css-vars\")\n          mergedStyles[varKey(idx, key)] = value;\n      }\n    }\n  });\n  token.htmlStyle = mergedStyles;\n  return token;\n}\nfunction getTokenStyleObject(token) {\n  const styles = {};\n  if (token.color)\n    styles.color = token.color;\n  if (token.bgColor)\n    styles[\"background-color\"] = token.bgColor;\n  if (token.fontStyle) {\n    if (token.fontStyle & FontStyle.Italic)\n      styles[\"font-style\"] = \"italic\";\n    if (token.fontStyle & FontStyle.Bold)\n      styles[\"font-weight\"] = \"bold\";\n    const decorations = [];\n    if (token.fontStyle & FontStyle.Underline)\n      decorations.push(\"underline\");\n    if (token.fontStyle & FontStyle.Strikethrough)\n      decorations.push(\"line-through\");\n    if (decorations.length)\n      styles[\"text-decoration\"] = decorations.join(\" \");\n  }\n  return styles;\n}\nfunction stringifyTokenStyle(token) {\n  if (typeof token === \"string\")\n    return token;\n  return Object.entries(token).map(([key, value]) => `${key}:${value}`).join(\";\");\n}\n\nconst _grammarStateMap = /* @__PURE__ */ new WeakMap();\nfunction setLastGrammarStateToMap(keys, state) {\n  _grammarStateMap.set(keys, state);\n}\nfunction getLastGrammarStateFromMap(keys) {\n  return _grammarStateMap.get(keys);\n}\nclass GrammarState {\n  /**\n   * Theme to Stack mapping\n   */\n  _stacks = {};\n  lang;\n  get themes() {\n    return Object.keys(this._stacks);\n  }\n  get theme() {\n    return this.themes[0];\n  }\n  get _stack() {\n    return this._stacks[this.theme];\n  }\n  /**\n   * Static method to create a initial grammar state.\n   */\n  static initial(lang, themes) {\n    return new GrammarState(\n      Object.fromEntries(toArray(themes).map((theme) => [theme, INITIAL])),\n      lang\n    );\n  }\n  constructor(...args) {\n    if (args.length === 2) {\n      const [stacksMap, lang] = args;\n      this.lang = lang;\n      this._stacks = stacksMap;\n    } else {\n      const [stack, lang, theme] = args;\n      this.lang = lang;\n      this._stacks = { [theme]: stack };\n    }\n  }\n  /**\n   * Get the internal stack object.\n   * @internal\n   */\n  getInternalStack(theme = this.theme) {\n    return this._stacks[theme];\n  }\n  getScopes(theme = this.theme) {\n    return getScopes(this._stacks[theme]);\n  }\n  toJSON() {\n    return {\n      lang: this.lang,\n      theme: this.theme,\n      themes: this.themes,\n      scopes: this.getScopes()\n    };\n  }\n}\nfunction getScopes(stack) {\n  const scopes = [];\n  const visited = /* @__PURE__ */ new Set();\n  function pushScope(stack2) {\n    if (visited.has(stack2))\n      return;\n    visited.add(stack2);\n    const name = stack2?.nameScopesList?.scopeName;\n    if (name)\n      scopes.push(name);\n    if (stack2.parent)\n      pushScope(stack2.parent);\n  }\n  pushScope(stack);\n  return scopes;\n}\nfunction getGrammarStack(state, theme) {\n  if (!(state instanceof GrammarState))\n    throw new ShikiError$1(\"Invalid grammar state\");\n  return state.getInternalStack(theme);\n}\n\nfunction transformerDecorations() {\n  const map = /* @__PURE__ */ new WeakMap();\n  function getContext(shiki) {\n    if (!map.has(shiki.meta)) {\n      let normalizePosition = function(p) {\n        if (typeof p === \"number\") {\n          if (p < 0 || p > shiki.source.length)\n            throw new ShikiError$1(`Invalid decoration offset: ${p}. Code length: ${shiki.source.length}`);\n          return {\n            ...converter.indexToPos(p),\n            offset: p\n          };\n        } else {\n          const line = converter.lines[p.line];\n          if (line === void 0)\n            throw new ShikiError$1(`Invalid decoration position ${JSON.stringify(p)}. Lines length: ${converter.lines.length}`);\n          let character = p.character;\n          if (character < 0)\n            character = line.length + character;\n          if (character < 0 || character > line.length)\n            throw new ShikiError$1(`Invalid decoration position ${JSON.stringify(p)}. Line ${p.line} length: ${line.length}`);\n          return {\n            ...p,\n            character,\n            offset: converter.posToIndex(p.line, character)\n          };\n        }\n      };\n      const converter = createPositionConverter(shiki.source);\n      const decorations = (shiki.options.decorations || []).map((d) => ({\n        ...d,\n        start: normalizePosition(d.start),\n        end: normalizePosition(d.end)\n      }));\n      verifyIntersections(decorations);\n      map.set(shiki.meta, {\n        decorations,\n        converter,\n        source: shiki.source\n      });\n    }\n    return map.get(shiki.meta);\n  }\n  return {\n    name: \"shiki:decorations\",\n    tokens(tokens) {\n      if (!this.options.decorations?.length)\n        return;\n      const ctx = getContext(this);\n      const breakpoints = ctx.decorations.flatMap((d) => [d.start.offset, d.end.offset]);\n      const splitted = splitTokens(tokens, breakpoints);\n      return splitted;\n    },\n    code(codeEl) {\n      if (!this.options.decorations?.length)\n        return;\n      const ctx = getContext(this);\n      const lines = Array.from(codeEl.children).filter((i) => i.type === \"element\" && i.tagName === \"span\");\n      if (lines.length !== ctx.converter.lines.length)\n        throw new ShikiError$1(`Number of lines in code element (${lines.length}) does not match the number of lines in the source (${ctx.converter.lines.length}). Failed to apply decorations.`);\n      function applyLineSection(line, start, end, decoration) {\n        const lineEl = lines[line];\n        let text = \"\";\n        let startIndex = -1;\n        let endIndex = -1;\n        if (start === 0)\n          startIndex = 0;\n        if (end === 0)\n          endIndex = 0;\n        if (end === Number.POSITIVE_INFINITY)\n          endIndex = lineEl.children.length;\n        if (startIndex === -1 || endIndex === -1) {\n          for (let i = 0; i < lineEl.children.length; i++) {\n            text += stringify(lineEl.children[i]);\n            if (startIndex === -1 && text.length === start)\n              startIndex = i + 1;\n            if (endIndex === -1 && text.length === end)\n              endIndex = i + 1;\n          }\n        }\n        if (startIndex === -1)\n          throw new ShikiError$1(`Failed to find start index for decoration ${JSON.stringify(decoration.start)}`);\n        if (endIndex === -1)\n          throw new ShikiError$1(`Failed to find end index for decoration ${JSON.stringify(decoration.end)}`);\n        const children = lineEl.children.slice(startIndex, endIndex);\n        if (!decoration.alwaysWrap && children.length === lineEl.children.length) {\n          applyDecoration(lineEl, decoration, \"line\");\n        } else if (!decoration.alwaysWrap && children.length === 1 && children[0].type === \"element\") {\n          applyDecoration(children[0], decoration, \"token\");\n        } else {\n          const wrapper = {\n            type: \"element\",\n            tagName: \"span\",\n            properties: {},\n            children\n          };\n          applyDecoration(wrapper, decoration, \"wrapper\");\n          lineEl.children.splice(startIndex, children.length, wrapper);\n        }\n      }\n      function applyLine(line, decoration) {\n        lines[line] = applyDecoration(lines[line], decoration, \"line\");\n      }\n      function applyDecoration(el, decoration, type) {\n        const properties = decoration.properties || {};\n        const transform = decoration.transform || ((i) => i);\n        el.tagName = decoration.tagName || \"span\";\n        el.properties = {\n          ...el.properties,\n          ...properties,\n          class: el.properties.class\n        };\n        if (decoration.properties?.class)\n          addClassToHast(el, decoration.properties.class);\n        el = transform(el, type) || el;\n        return el;\n      }\n      const lineApplies = [];\n      const sorted = ctx.decorations.sort((a, b) => b.start.offset - a.start.offset || a.end.offset - b.end.offset);\n      for (const decoration of sorted) {\n        const { start, end } = decoration;\n        if (start.line === end.line) {\n          applyLineSection(start.line, start.character, end.character, decoration);\n        } else if (start.line < end.line) {\n          applyLineSection(start.line, start.character, Number.POSITIVE_INFINITY, decoration);\n          for (let i = start.line + 1; i < end.line; i++)\n            lineApplies.unshift(() => applyLine(i, decoration));\n          applyLineSection(end.line, 0, end.character, decoration);\n        }\n      }\n      lineApplies.forEach((i) => i());\n    }\n  };\n}\nfunction verifyIntersections(items) {\n  for (let i = 0; i < items.length; i++) {\n    const foo = items[i];\n    if (foo.start.offset > foo.end.offset)\n      throw new ShikiError$1(`Invalid decoration range: ${JSON.stringify(foo.start)} - ${JSON.stringify(foo.end)}`);\n    for (let j = i + 1; j < items.length; j++) {\n      const bar = items[j];\n      const isFooHasBarStart = foo.start.offset <= bar.start.offset && bar.start.offset < foo.end.offset;\n      const isFooHasBarEnd = foo.start.offset < bar.end.offset && bar.end.offset <= foo.end.offset;\n      const isBarHasFooStart = bar.start.offset <= foo.start.offset && foo.start.offset < bar.end.offset;\n      const isBarHasFooEnd = bar.start.offset < foo.end.offset && foo.end.offset <= bar.end.offset;\n      if (isFooHasBarStart || isFooHasBarEnd || isBarHasFooStart || isBarHasFooEnd) {\n        if (isFooHasBarStart && isFooHasBarEnd)\n          continue;\n        if (isBarHasFooStart && isBarHasFooEnd)\n          continue;\n        if (isBarHasFooStart && foo.start.offset === foo.end.offset)\n          continue;\n        if (isFooHasBarEnd && bar.start.offset === bar.end.offset)\n          continue;\n        throw new ShikiError$1(`Decorations ${JSON.stringify(foo.start)} and ${JSON.stringify(bar.start)} intersect.`);\n      }\n    }\n  }\n}\nfunction stringify(el) {\n  if (el.type === \"text\")\n    return el.value;\n  if (el.type === \"element\")\n    return el.children.map(stringify).join(\"\");\n  return \"\";\n}\n\nconst builtInTransformers = [\n  /* @__PURE__ */ transformerDecorations()\n];\nfunction getTransformers(options) {\n  const transformers = sortTransformersByEnforcement(options.transformers || []);\n  return [\n    ...transformers.pre,\n    ...transformers.normal,\n    ...transformers.post,\n    ...builtInTransformers\n  ];\n}\nfunction sortTransformersByEnforcement(transformers) {\n  const pre = [];\n  const post = [];\n  const normal = [];\n  for (const transformer of transformers) {\n    switch (transformer.enforce) {\n      case \"pre\":\n        pre.push(transformer);\n        break;\n      case \"post\":\n        post.push(transformer);\n        break;\n      default:\n        normal.push(transformer);\n    }\n  }\n  return { pre, post, normal };\n}\n\n// src/colors.ts\nvar namedColors = [\n  \"black\",\n  \"red\",\n  \"green\",\n  \"yellow\",\n  \"blue\",\n  \"magenta\",\n  \"cyan\",\n  \"white\",\n  \"brightBlack\",\n  \"brightRed\",\n  \"brightGreen\",\n  \"brightYellow\",\n  \"brightBlue\",\n  \"brightMagenta\",\n  \"brightCyan\",\n  \"brightWhite\"\n];\n\n// src/decorations.ts\nvar decorations = {\n  1: \"bold\",\n  2: \"dim\",\n  3: \"italic\",\n  4: \"underline\",\n  7: \"reverse\",\n  8: \"hidden\",\n  9: \"strikethrough\"\n};\n\n// src/parser.ts\nfunction findSequence(value, position) {\n  const nextEscape = value.indexOf(\"\\x1B\", position);\n  if (nextEscape !== -1) {\n    if (value[nextEscape + 1] === \"[\") {\n      const nextClose = value.indexOf(\"m\", nextEscape);\n      if (nextClose !== -1) {\n        return {\n          sequence: value.substring(nextEscape + 2, nextClose).split(\";\"),\n          startPosition: nextEscape,\n          position: nextClose + 1\n        };\n      }\n    }\n  }\n  return {\n    position: value.length\n  };\n}\nfunction parseColor(sequence) {\n  const colorMode = sequence.shift();\n  if (colorMode === \"2\") {\n    const rgb = sequence.splice(0, 3).map((x) => Number.parseInt(x));\n    if (rgb.length !== 3 || rgb.some((x) => Number.isNaN(x)))\n      return;\n    return {\n      type: \"rgb\",\n      rgb\n    };\n  } else if (colorMode === \"5\") {\n    const index = sequence.shift();\n    if (index) {\n      return { type: \"table\", index: Number(index) };\n    }\n  }\n}\nfunction parseSequence(sequence) {\n  const commands = [];\n  while (sequence.length > 0) {\n    const code = sequence.shift();\n    if (!code)\n      continue;\n    const codeInt = Number.parseInt(code);\n    if (Number.isNaN(codeInt))\n      continue;\n    if (codeInt === 0) {\n      commands.push({ type: \"resetAll\" });\n    } else if (codeInt <= 9) {\n      const decoration = decorations[codeInt];\n      if (decoration) {\n        commands.push({\n          type: \"setDecoration\",\n          value: decorations[codeInt]\n        });\n      }\n    } else if (codeInt <= 29) {\n      const decoration = decorations[codeInt - 20];\n      if (decoration) {\n        commands.push({\n          type: \"resetDecoration\",\n          value: decoration\n        });\n        if (decoration === \"dim\") {\n          commands.push({\n            type: \"resetDecoration\",\n            value: \"bold\"\n          });\n        }\n      }\n    } else if (codeInt <= 37) {\n      commands.push({\n        type: \"setForegroundColor\",\n        value: { type: \"named\", name: namedColors[codeInt - 30] }\n      });\n    } else if (codeInt === 38) {\n      const color = parseColor(sequence);\n      if (color) {\n        commands.push({\n          type: \"setForegroundColor\",\n          value: color\n        });\n      }\n    } else if (codeInt === 39) {\n      commands.push({\n        type: \"resetForegroundColor\"\n      });\n    } else if (codeInt <= 47) {\n      commands.push({\n        type: \"setBackgroundColor\",\n        value: { type: \"named\", name: namedColors[codeInt - 40] }\n      });\n    } else if (codeInt === 48) {\n      const color = parseColor(sequence);\n      if (color) {\n        commands.push({\n          type: \"setBackgroundColor\",\n          value: color\n        });\n      }\n    } else if (codeInt === 49) {\n      commands.push({\n        type: \"resetBackgroundColor\"\n      });\n    } else if (codeInt === 53) {\n      commands.push({\n        type: \"setDecoration\",\n        value: \"overline\"\n      });\n    } else if (codeInt === 55) {\n      commands.push({\n        type: \"resetDecoration\",\n        value: \"overline\"\n      });\n    } else if (codeInt >= 90 && codeInt <= 97) {\n      commands.push({\n        type: \"setForegroundColor\",\n        value: { type: \"named\", name: namedColors[codeInt - 90 + 8] }\n      });\n    } else if (codeInt >= 100 && codeInt <= 107) {\n      commands.push({\n        type: \"setBackgroundColor\",\n        value: { type: \"named\", name: namedColors[codeInt - 100 + 8] }\n      });\n    }\n  }\n  return commands;\n}\nfunction createAnsiSequenceParser() {\n  let foreground = null;\n  let background = null;\n  let decorations2 = /* @__PURE__ */ new Set();\n  return {\n    parse(value) {\n      const tokens = [];\n      let position = 0;\n      do {\n        const findResult = findSequence(value, position);\n        const text = findResult.sequence ? value.substring(position, findResult.startPosition) : value.substring(position);\n        if (text.length > 0) {\n          tokens.push({\n            value: text,\n            foreground,\n            background,\n            decorations: new Set(decorations2)\n          });\n        }\n        if (findResult.sequence) {\n          const commands = parseSequence(findResult.sequence);\n          for (const styleToken of commands) {\n            if (styleToken.type === \"resetAll\") {\n              foreground = null;\n              background = null;\n              decorations2.clear();\n            } else if (styleToken.type === \"resetForegroundColor\") {\n              foreground = null;\n            } else if (styleToken.type === \"resetBackgroundColor\") {\n              background = null;\n            } else if (styleToken.type === \"resetDecoration\") {\n              decorations2.delete(styleToken.value);\n            }\n          }\n          for (const styleToken of commands) {\n            if (styleToken.type === \"setForegroundColor\") {\n              foreground = styleToken.value;\n            } else if (styleToken.type === \"setBackgroundColor\") {\n              background = styleToken.value;\n            } else if (styleToken.type === \"setDecoration\") {\n              decorations2.add(styleToken.value);\n            }\n          }\n        }\n        position = findResult.position;\n      } while (position < value.length);\n      return tokens;\n    }\n  };\n}\n\n// src/palette.ts\nvar defaultNamedColorsMap = {\n  black: \"#000000\",\n  red: \"#bb0000\",\n  green: \"#00bb00\",\n  yellow: \"#bbbb00\",\n  blue: \"#0000bb\",\n  magenta: \"#ff00ff\",\n  cyan: \"#00bbbb\",\n  white: \"#eeeeee\",\n  brightBlack: \"#555555\",\n  brightRed: \"#ff5555\",\n  brightGreen: \"#00ff00\",\n  brightYellow: \"#ffff55\",\n  brightBlue: \"#5555ff\",\n  brightMagenta: \"#ff55ff\",\n  brightCyan: \"#55ffff\",\n  brightWhite: \"#ffffff\"\n};\nfunction createColorPalette(namedColorsMap = defaultNamedColorsMap) {\n  function namedColor(name) {\n    return namedColorsMap[name];\n  }\n  function rgbColor(rgb) {\n    return `#${rgb.map((x) => Math.max(0, Math.min(x, 255)).toString(16).padStart(2, \"0\")).join(\"\")}`;\n  }\n  let colorTable;\n  function getColorTable() {\n    if (colorTable) {\n      return colorTable;\n    }\n    colorTable = [];\n    for (let i = 0; i < namedColors.length; i++) {\n      colorTable.push(namedColor(namedColors[i]));\n    }\n    let levels = [0, 95, 135, 175, 215, 255];\n    for (let r = 0; r < 6; r++) {\n      for (let g = 0; g < 6; g++) {\n        for (let b = 0; b < 6; b++) {\n          colorTable.push(rgbColor([levels[r], levels[g], levels[b]]));\n        }\n      }\n    }\n    let level = 8;\n    for (let i = 0; i < 24; i++, level += 10) {\n      colorTable.push(rgbColor([level, level, level]));\n    }\n    return colorTable;\n  }\n  function tableColor(index) {\n    return getColorTable()[index];\n  }\n  function value(color) {\n    switch (color.type) {\n      case \"named\":\n        return namedColor(color.name);\n      case \"rgb\":\n        return rgbColor(color.rgb);\n      case \"table\":\n        return tableColor(color.index);\n    }\n  }\n  return {\n    value\n  };\n}\n\nfunction tokenizeAnsiWithTheme(theme, fileContents, options) {\n  const colorReplacements = resolveColorReplacements(theme, options);\n  const lines = splitLines(fileContents);\n  const colorPalette = createColorPalette(\n    Object.fromEntries(\n      namedColors.map((name) => [\n        name,\n        theme.colors?.[`terminal.ansi${name[0].toUpperCase()}${name.substring(1)}`]\n      ])\n    )\n  );\n  const parser = createAnsiSequenceParser();\n  return lines.map(\n    (line) => parser.parse(line[0]).map((token) => {\n      let color;\n      let bgColor;\n      if (token.decorations.has(\"reverse\")) {\n        color = token.background ? colorPalette.value(token.background) : theme.bg;\n        bgColor = token.foreground ? colorPalette.value(token.foreground) : theme.fg;\n      } else {\n        color = token.foreground ? colorPalette.value(token.foreground) : theme.fg;\n        bgColor = token.background ? colorPalette.value(token.background) : void 0;\n      }\n      color = applyColorReplacements(color, colorReplacements);\n      bgColor = applyColorReplacements(bgColor, colorReplacements);\n      if (token.decorations.has(\"dim\"))\n        color = dimColor(color);\n      let fontStyle = FontStyle.None;\n      if (token.decorations.has(\"bold\"))\n        fontStyle |= FontStyle.Bold;\n      if (token.decorations.has(\"italic\"))\n        fontStyle |= FontStyle.Italic;\n      if (token.decorations.has(\"underline\"))\n        fontStyle |= FontStyle.Underline;\n      if (token.decorations.has(\"strikethrough\"))\n        fontStyle |= FontStyle.Strikethrough;\n      return {\n        content: token.value,\n        offset: line[1],\n        // TODO: more accurate offset? might need to fork ansi-sequence-parser\n        color,\n        bgColor,\n        fontStyle\n      };\n    })\n  );\n}\nfunction dimColor(color) {\n  const hexMatch = color.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);\n  if (hexMatch) {\n    if (hexMatch[3]) {\n      const alpha = Math.round(Number.parseInt(hexMatch[3], 16) / 2).toString(16).padStart(2, \"0\");\n      return `#${hexMatch[1]}${hexMatch[2]}${alpha}`;\n    } else if (hexMatch[2]) {\n      return `#${hexMatch[1]}${hexMatch[2]}80`;\n    } else {\n      return `#${Array.from(hexMatch[1]).map((x) => `${x}${x}`).join(\"\")}80`;\n    }\n  }\n  const cssVarMatch = color.match(/var\\((--[\\w-]+-ansi-[\\w-]+)\\)/);\n  if (cssVarMatch)\n    return `var(${cssVarMatch[1]}-dim)`;\n  return color;\n}\n\nfunction codeToTokensBase(internal, code, options = {}) {\n  const {\n    lang = \"text\",\n    theme: themeName = internal.getLoadedThemes()[0]\n  } = options;\n  if (isPlainLang(lang) || isNoneTheme(themeName))\n    return splitLines(code).map((line) => [{ content: line[0], offset: line[1] }]);\n  const { theme, colorMap } = internal.setTheme(themeName);\n  if (lang === \"ansi\")\n    return tokenizeAnsiWithTheme(theme, code, options);\n  const _grammar = internal.getLanguage(lang);\n  if (options.grammarState) {\n    if (options.grammarState.lang !== _grammar.name) {\n      throw new ShikiError$1(`Grammar state language \"${options.grammarState.lang}\" does not match highlight language \"${_grammar.name}\"`);\n    }\n    if (!options.grammarState.themes.includes(theme.name)) {\n      throw new ShikiError$1(`Grammar state themes \"${options.grammarState.themes}\" do not contain highlight theme \"${theme.name}\"`);\n    }\n  }\n  return tokenizeWithTheme(code, _grammar, theme, colorMap, options);\n}\nfunction getLastGrammarState(...args) {\n  if (args.length === 2) {\n    return getLastGrammarStateFromMap(args[1]);\n  }\n  const [internal, code, options = {}] = args;\n  const {\n    lang = \"text\",\n    theme: themeName = internal.getLoadedThemes()[0]\n  } = options;\n  if (isPlainLang(lang) || isNoneTheme(themeName))\n    throw new ShikiError$1(\"Plain language does not have grammar state\");\n  if (lang === \"ansi\")\n    throw new ShikiError$1(\"ANSI language does not have grammar state\");\n  const { theme, colorMap } = internal.setTheme(themeName);\n  const _grammar = internal.getLanguage(lang);\n  return new GrammarState(\n    _tokenizeWithTheme(code, _grammar, theme, colorMap, options).stateStack,\n    _grammar.name,\n    theme.name\n  );\n}\nfunction tokenizeWithTheme(code, grammar, theme, colorMap, options) {\n  const result = _tokenizeWithTheme(code, grammar, theme, colorMap, options);\n  const grammarState = new GrammarState(\n    _tokenizeWithTheme(code, grammar, theme, colorMap, options).stateStack,\n    grammar.name,\n    theme.name\n  );\n  setLastGrammarStateToMap(result.tokens, grammarState);\n  return result.tokens;\n}\nfunction _tokenizeWithTheme(code, grammar, theme, colorMap, options) {\n  const colorReplacements = resolveColorReplacements(theme, options);\n  const {\n    tokenizeMaxLineLength = 0,\n    tokenizeTimeLimit = 500\n  } = options;\n  const lines = splitLines(code);\n  let stateStack = options.grammarState ? getGrammarStack(options.grammarState, theme.name) ?? INITIAL : options.grammarContextCode != null ? _tokenizeWithTheme(\n    options.grammarContextCode,\n    grammar,\n    theme,\n    colorMap,\n    {\n      ...options,\n      grammarState: void 0,\n      grammarContextCode: void 0\n    }\n  ).stateStack : INITIAL;\n  let actual = [];\n  const final = [];\n  for (let i = 0, len = lines.length; i < len; i++) {\n    const [line, lineOffset] = lines[i];\n    if (line === \"\") {\n      actual = [];\n      final.push([]);\n      continue;\n    }\n    if (tokenizeMaxLineLength > 0 && line.length >= tokenizeMaxLineLength) {\n      actual = [];\n      final.push([{\n        content: line,\n        offset: lineOffset,\n        color: \"\",\n        fontStyle: 0\n      }]);\n      continue;\n    }\n    let resultWithScopes;\n    let tokensWithScopes;\n    let tokensWithScopesIndex;\n    if (options.includeExplanation) {\n      resultWithScopes = grammar.tokenizeLine(line, stateStack, tokenizeTimeLimit);\n      tokensWithScopes = resultWithScopes.tokens;\n      tokensWithScopesIndex = 0;\n    }\n    const result = grammar.tokenizeLine2(line, stateStack, tokenizeTimeLimit);\n    const tokensLength = result.tokens.length / 2;\n    for (let j = 0; j < tokensLength; j++) {\n      const startIndex = result.tokens[2 * j];\n      const nextStartIndex = j + 1 < tokensLength ? result.tokens[2 * j + 2] : line.length;\n      if (startIndex === nextStartIndex)\n        continue;\n      const metadata = result.tokens[2 * j + 1];\n      const color = applyColorReplacements(\n        colorMap[EncodedTokenMetadata.getForeground(metadata)],\n        colorReplacements\n      );\n      const fontStyle = EncodedTokenMetadata.getFontStyle(metadata);\n      const token = {\n        content: line.substring(startIndex, nextStartIndex),\n        offset: lineOffset + startIndex,\n        color,\n        fontStyle\n      };\n      if (options.includeExplanation) {\n        const themeSettingsSelectors = [];\n        if (options.includeExplanation !== \"scopeName\") {\n          for (const setting of theme.settings) {\n            let selectors;\n            switch (typeof setting.scope) {\n              case \"string\":\n                selectors = setting.scope.split(/,/).map((scope) => scope.trim());\n                break;\n              case \"object\":\n                selectors = setting.scope;\n                break;\n              default:\n                continue;\n            }\n            themeSettingsSelectors.push({\n              settings: setting,\n              selectors: selectors.map((selector) => selector.split(/ /))\n            });\n          }\n        }\n        token.explanation = [];\n        let offset = 0;\n        while (startIndex + offset < nextStartIndex) {\n          const tokenWithScopes = tokensWithScopes[tokensWithScopesIndex];\n          const tokenWithScopesText = line.substring(\n            tokenWithScopes.startIndex,\n            tokenWithScopes.endIndex\n          );\n          offset += tokenWithScopesText.length;\n          token.explanation.push({\n            content: tokenWithScopesText,\n            scopes: options.includeExplanation === \"scopeName\" ? explainThemeScopesNameOnly(\n              tokenWithScopes.scopes\n            ) : explainThemeScopesFull(\n              themeSettingsSelectors,\n              tokenWithScopes.scopes\n            )\n          });\n          tokensWithScopesIndex += 1;\n        }\n      }\n      actual.push(token);\n    }\n    final.push(actual);\n    actual = [];\n    stateStack = result.ruleStack;\n  }\n  return {\n    tokens: final,\n    stateStack\n  };\n}\nfunction explainThemeScopesNameOnly(scopes) {\n  return scopes.map((scope) => ({ scopeName: scope }));\n}\nfunction explainThemeScopesFull(themeSelectors, scopes) {\n  const result = [];\n  for (let i = 0, len = scopes.length; i < len; i++) {\n    const scope = scopes[i];\n    result[i] = {\n      scopeName: scope,\n      themeMatches: explainThemeScope(themeSelectors, scope, scopes.slice(0, i))\n    };\n  }\n  return result;\n}\nfunction matchesOne(selector, scope) {\n  return selector === scope || scope.substring(0, selector.length) === selector && scope[selector.length] === \".\";\n}\nfunction matches(selectors, scope, parentScopes) {\n  if (!matchesOne(selectors[selectors.length - 1], scope))\n    return false;\n  let selectorParentIndex = selectors.length - 2;\n  let parentIndex = parentScopes.length - 1;\n  while (selectorParentIndex >= 0 && parentIndex >= 0) {\n    if (matchesOne(selectors[selectorParentIndex], parentScopes[parentIndex]))\n      selectorParentIndex -= 1;\n    parentIndex -= 1;\n  }\n  if (selectorParentIndex === -1)\n    return true;\n  return false;\n}\nfunction explainThemeScope(themeSettingsSelectors, scope, parentScopes) {\n  const result = [];\n  for (const { selectors, settings } of themeSettingsSelectors) {\n    for (const selectorPieces of selectors) {\n      if (matches(selectorPieces, scope, parentScopes)) {\n        result.push(settings);\n        break;\n      }\n    }\n  }\n  return result;\n}\n\nfunction codeToTokensWithThemes(internal, code, options) {\n  const themes = Object.entries(options.themes).filter((i) => i[1]).map((i) => ({ color: i[0], theme: i[1] }));\n  const themedTokens = themes.map((t) => {\n    const tokens2 = codeToTokensBase(internal, code, {\n      ...options,\n      theme: t.theme\n    });\n    const state = getLastGrammarStateFromMap(tokens2);\n    const theme = typeof t.theme === \"string\" ? t.theme : t.theme.name;\n    return {\n      tokens: tokens2,\n      state,\n      theme\n    };\n  });\n  const tokens = syncThemesTokenization(\n    ...themedTokens.map((i) => i.tokens)\n  );\n  const mergedTokens = tokens[0].map(\n    (line, lineIdx) => line.map((_token, tokenIdx) => {\n      const mergedToken = {\n        content: _token.content,\n        variants: {},\n        offset: _token.offset\n      };\n      if (\"includeExplanation\" in options && options.includeExplanation) {\n        mergedToken.explanation = _token.explanation;\n      }\n      tokens.forEach((t, themeIdx) => {\n        const {\n          content: _,\n          explanation: __,\n          offset: ___,\n          ...styles\n        } = t[lineIdx][tokenIdx];\n        mergedToken.variants[themes[themeIdx].color] = styles;\n      });\n      return mergedToken;\n    })\n  );\n  const mergedGrammarState = themedTokens[0].state ? new GrammarState(\n    Object.fromEntries(themedTokens.map((s) => [s.theme, s.state?.getInternalStack(s.theme)])),\n    themedTokens[0].state.lang\n  ) : void 0;\n  if (mergedGrammarState)\n    setLastGrammarStateToMap(mergedTokens, mergedGrammarState);\n  return mergedTokens;\n}\nfunction syncThemesTokenization(...themes) {\n  const outThemes = themes.map(() => []);\n  const count = themes.length;\n  for (let i = 0; i < themes[0].length; i++) {\n    const lines = themes.map((t) => t[i]);\n    const outLines = outThemes.map(() => []);\n    outThemes.forEach((t, i2) => t.push(outLines[i2]));\n    const indexes = lines.map(() => 0);\n    const current = lines.map((l) => l[0]);\n    while (current.every((t) => t)) {\n      const minLength = Math.min(...current.map((t) => t.content.length));\n      for (let n = 0; n < count; n++) {\n        const token = current[n];\n        if (token.content.length === minLength) {\n          outLines[n].push(token);\n          indexes[n] += 1;\n          current[n] = lines[n][indexes[n]];\n        } else {\n          outLines[n].push({\n            ...token,\n            content: token.content.slice(0, minLength)\n          });\n          current[n] = {\n            ...token,\n            content: token.content.slice(minLength),\n            offset: token.offset + minLength\n          };\n        }\n      }\n    }\n  }\n  return outThemes;\n}\n\nfunction codeToTokens(internal, code, options) {\n  let bg;\n  let fg;\n  let tokens;\n  let themeName;\n  let rootStyle;\n  let grammarState;\n  if (\"themes\" in options) {\n    const {\n      defaultColor = \"light\",\n      cssVariablePrefix = \"--shiki-\",\n      colorsRendering = \"css-vars\"\n    } = options;\n    const themes = Object.entries(options.themes).filter((i) => i[1]).map((i) => ({ color: i[0], theme: i[1] })).sort((a, b) => a.color === defaultColor ? -1 : b.color === defaultColor ? 1 : 0);\n    if (themes.length === 0)\n      throw new ShikiError$1(\"`themes` option must not be empty\");\n    const themeTokens = codeToTokensWithThemes(\n      internal,\n      code,\n      options\n    );\n    grammarState = getLastGrammarStateFromMap(themeTokens);\n    if (defaultColor && DEFAULT_COLOR_LIGHT_DARK !== defaultColor && !themes.find((t) => t.color === defaultColor))\n      throw new ShikiError$1(`\\`themes\\` option must contain the defaultColor key \\`${defaultColor}\\``);\n    const themeRegs = themes.map((t) => internal.getTheme(t.theme));\n    const themesOrder = themes.map((t) => t.color);\n    tokens = themeTokens.map((line) => line.map((token) => flatTokenVariants(token, themesOrder, cssVariablePrefix, defaultColor, colorsRendering)));\n    if (grammarState)\n      setLastGrammarStateToMap(tokens, grammarState);\n    const themeColorReplacements = themes.map((t) => resolveColorReplacements(t.theme, options));\n    fg = mapThemeColors(themes, themeRegs, themeColorReplacements, cssVariablePrefix, defaultColor, \"fg\", colorsRendering);\n    bg = mapThemeColors(themes, themeRegs, themeColorReplacements, cssVariablePrefix, defaultColor, \"bg\", colorsRendering);\n    themeName = `shiki-themes ${themeRegs.map((t) => t.name).join(\" \")}`;\n    rootStyle = defaultColor ? void 0 : [fg, bg].join(\";\");\n  } else if (\"theme\" in options) {\n    const colorReplacements = resolveColorReplacements(options.theme, options);\n    tokens = codeToTokensBase(\n      internal,\n      code,\n      options\n    );\n    const _theme = internal.getTheme(options.theme);\n    bg = applyColorReplacements(_theme.bg, colorReplacements);\n    fg = applyColorReplacements(_theme.fg, colorReplacements);\n    themeName = _theme.name;\n    grammarState = getLastGrammarStateFromMap(tokens);\n  } else {\n    throw new ShikiError$1(\"Invalid options, either `theme` or `themes` must be provided\");\n  }\n  return {\n    tokens,\n    fg,\n    bg,\n    themeName,\n    rootStyle,\n    grammarState\n  };\n}\nfunction mapThemeColors(themes, themeRegs, themeColorReplacements, cssVariablePrefix, defaultColor, property, colorsRendering) {\n  return themes.map((t, idx) => {\n    const value = applyColorReplacements(themeRegs[idx][property], themeColorReplacements[idx]) || \"inherit\";\n    const cssVar = `${cssVariablePrefix + t.color}${property === \"bg\" ? \"-bg\" : \"\"}:${value}`;\n    if (idx === 0 && defaultColor) {\n      if (defaultColor === DEFAULT_COLOR_LIGHT_DARK && themes.length > 1) {\n        const lightIndex = themes.findIndex((t2) => t2.color === \"light\");\n        const darkIndex = themes.findIndex((t2) => t2.color === \"dark\");\n        if (lightIndex === -1 || darkIndex === -1)\n          throw new ShikiError$1('When using `defaultColor: \"light-dark()\"`, you must provide both `light` and `dark` themes');\n        const lightValue = applyColorReplacements(themeRegs[lightIndex][property], themeColorReplacements[lightIndex]) || \"inherit\";\n        const darkValue = applyColorReplacements(themeRegs[darkIndex][property], themeColorReplacements[darkIndex]) || \"inherit\";\n        return `light-dark(${lightValue}, ${darkValue});${cssVar}`;\n      }\n      return value;\n    }\n    if (colorsRendering === \"css-vars\") {\n      return cssVar;\n    }\n    return null;\n  }).filter((i) => !!i).join(\";\");\n}\n\nfunction codeToHast(internal, code, options, transformerContext = {\n  meta: {},\n  options,\n  codeToHast: (_code, _options) => codeToHast(internal, _code, _options),\n  codeToTokens: (_code, _options) => codeToTokens(internal, _code, _options)\n}) {\n  let input = code;\n  for (const transformer of getTransformers(options))\n    input = transformer.preprocess?.call(transformerContext, input, options) || input;\n  let {\n    tokens,\n    fg,\n    bg,\n    themeName,\n    rootStyle,\n    grammarState\n  } = codeToTokens(internal, input, options);\n  const {\n    mergeWhitespaces = true,\n    mergeSameStyleTokens = false\n  } = options;\n  if (mergeWhitespaces === true)\n    tokens = mergeWhitespaceTokens(tokens);\n  else if (mergeWhitespaces === \"never\")\n    tokens = splitWhitespaceTokens(tokens);\n  if (mergeSameStyleTokens) {\n    tokens = mergeAdjacentStyledTokens(tokens);\n  }\n  const contextSource = {\n    ...transformerContext,\n    get source() {\n      return input;\n    }\n  };\n  for (const transformer of getTransformers(options))\n    tokens = transformer.tokens?.call(contextSource, tokens) || tokens;\n  return tokensToHast(\n    tokens,\n    {\n      ...options,\n      fg,\n      bg,\n      themeName,\n      rootStyle\n    },\n    contextSource,\n    grammarState\n  );\n}\nfunction tokensToHast(tokens, options, transformerContext, grammarState = getLastGrammarStateFromMap(tokens)) {\n  const transformers = getTransformers(options);\n  const lines = [];\n  const root = {\n    type: \"root\",\n    children: []\n  };\n  const {\n    structure = \"classic\",\n    tabindex = \"0\"\n  } = options;\n  let preNode = {\n    type: \"element\",\n    tagName: \"pre\",\n    properties: {\n      class: `shiki ${options.themeName || \"\"}`,\n      style: options.rootStyle || `background-color:${options.bg};color:${options.fg}`,\n      ...tabindex !== false && tabindex != null ? {\n        tabindex: tabindex.toString()\n      } : {},\n      ...Object.fromEntries(\n        Array.from(\n          Object.entries(options.meta || {})\n        ).filter(([key]) => !key.startsWith(\"_\"))\n      )\n    },\n    children: []\n  };\n  let codeNode = {\n    type: \"element\",\n    tagName: \"code\",\n    properties: {},\n    children: lines\n  };\n  const lineNodes = [];\n  const context = {\n    ...transformerContext,\n    structure,\n    addClassToHast,\n    get source() {\n      return transformerContext.source;\n    },\n    get tokens() {\n      return tokens;\n    },\n    get options() {\n      return options;\n    },\n    get root() {\n      return root;\n    },\n    get pre() {\n      return preNode;\n    },\n    get code() {\n      return codeNode;\n    },\n    get lines() {\n      return lineNodes;\n    }\n  };\n  tokens.forEach((line, idx) => {\n    if (idx) {\n      if (structure === \"inline\")\n        root.children.push({ type: \"element\", tagName: \"br\", properties: {}, children: [] });\n      else if (structure === \"classic\")\n        lines.push({ type: \"text\", value: \"\\n\" });\n    }\n    let lineNode = {\n      type: \"element\",\n      tagName: \"span\",\n      properties: { class: \"line\" },\n      children: []\n    };\n    let col = 0;\n    for (const token of line) {\n      let tokenNode = {\n        type: \"element\",\n        tagName: \"span\",\n        properties: {\n          ...token.htmlAttrs\n        },\n        children: [{ type: \"text\", value: token.content }]\n      };\n      const style = stringifyTokenStyle(token.htmlStyle || getTokenStyleObject(token));\n      if (style)\n        tokenNode.properties.style = style;\n      for (const transformer of transformers)\n        tokenNode = transformer?.span?.call(context, tokenNode, idx + 1, col, lineNode, token) || tokenNode;\n      if (structure === \"inline\")\n        root.children.push(tokenNode);\n      else if (structure === \"classic\")\n        lineNode.children.push(tokenNode);\n      col += token.content.length;\n    }\n    if (structure === \"classic\") {\n      for (const transformer of transformers)\n        lineNode = transformer?.line?.call(context, lineNode, idx + 1) || lineNode;\n      lineNodes.push(lineNode);\n      lines.push(lineNode);\n    }\n  });\n  if (structure === \"classic\") {\n    for (const transformer of transformers)\n      codeNode = transformer?.code?.call(context, codeNode) || codeNode;\n    preNode.children.push(codeNode);\n    for (const transformer of transformers)\n      preNode = transformer?.pre?.call(context, preNode) || preNode;\n    root.children.push(preNode);\n  }\n  let result = root;\n  for (const transformer of transformers)\n    result = transformer?.root?.call(context, result) || result;\n  if (grammarState)\n    setLastGrammarStateToMap(result, grammarState);\n  return result;\n}\nfunction mergeWhitespaceTokens(tokens) {\n  return tokens.map((line) => {\n    const newLine = [];\n    let carryOnContent = \"\";\n    let firstOffset = 0;\n    line.forEach((token, idx) => {\n      const isDecorated = token.fontStyle && (token.fontStyle & FontStyle.Underline || token.fontStyle & FontStyle.Strikethrough);\n      const couldMerge = !isDecorated;\n      if (couldMerge && token.content.match(/^\\s+$/) && line[idx + 1]) {\n        if (!firstOffset)\n          firstOffset = token.offset;\n        carryOnContent += token.content;\n      } else {\n        if (carryOnContent) {\n          if (couldMerge) {\n            newLine.push({\n              ...token,\n              offset: firstOffset,\n              content: carryOnContent + token.content\n            });\n          } else {\n            newLine.push(\n              {\n                content: carryOnContent,\n                offset: firstOffset\n              },\n              token\n            );\n          }\n          firstOffset = 0;\n          carryOnContent = \"\";\n        } else {\n          newLine.push(token);\n        }\n      }\n    });\n    return newLine;\n  });\n}\nfunction splitWhitespaceTokens(tokens) {\n  return tokens.map((line) => {\n    return line.flatMap((token) => {\n      if (token.content.match(/^\\s+$/))\n        return token;\n      const match = token.content.match(/^(\\s*)(.*?)(\\s*)$/);\n      if (!match)\n        return token;\n      const [, leading, content, trailing] = match;\n      if (!leading && !trailing)\n        return token;\n      const expanded = [{\n        ...token,\n        offset: token.offset + leading.length,\n        content\n      }];\n      if (leading) {\n        expanded.unshift({\n          content: leading,\n          offset: token.offset\n        });\n      }\n      if (trailing) {\n        expanded.push({\n          content: trailing,\n          offset: token.offset + leading.length + content.length\n        });\n      }\n      return expanded;\n    });\n  });\n}\nfunction mergeAdjacentStyledTokens(tokens) {\n  return tokens.map((line) => {\n    const newLine = [];\n    for (const token of line) {\n      if (newLine.length === 0) {\n        newLine.push({ ...token });\n        continue;\n      }\n      const prevToken = newLine[newLine.length - 1];\n      const prevStyle = stringifyTokenStyle(prevToken.htmlStyle || getTokenStyleObject(prevToken));\n      const currentStyle = stringifyTokenStyle(token.htmlStyle || getTokenStyleObject(token));\n      const isPrevDecorated = prevToken.fontStyle && (prevToken.fontStyle & FontStyle.Underline || prevToken.fontStyle & FontStyle.Strikethrough);\n      const isDecorated = token.fontStyle && (token.fontStyle & FontStyle.Underline || token.fontStyle & FontStyle.Strikethrough);\n      if (!isPrevDecorated && !isDecorated && prevStyle === currentStyle) {\n        prevToken.content += token.content;\n      } else {\n        newLine.push({ ...token });\n      }\n    }\n    return newLine;\n  });\n}\n\nconst hastToHtml = toHtml;\nfunction codeToHtml(internal, code, options) {\n  const context = {\n    meta: {},\n    options,\n    codeToHast: (_code, _options) => codeToHast(internal, _code, _options),\n    codeToTokens: (_code, _options) => codeToTokens(internal, _code, _options)\n  };\n  let result = hastToHtml(codeToHast(internal, code, options, context));\n  for (const transformer of getTransformers(options))\n    result = transformer.postprocess?.call(context, result, options) || result;\n  return result;\n}\n\nconst VSCODE_FALLBACK_EDITOR_FG = { light: \"#333333\", dark: \"#bbbbbb\" };\nconst VSCODE_FALLBACK_EDITOR_BG = { light: \"#fffffe\", dark: \"#1e1e1e\" };\nconst RESOLVED_KEY = \"__shiki_resolved\";\nfunction normalizeTheme(rawTheme) {\n  if (rawTheme?.[RESOLVED_KEY])\n    return rawTheme;\n  const theme = {\n    ...rawTheme\n  };\n  if (theme.tokenColors && !theme.settings) {\n    theme.settings = theme.tokenColors;\n    delete theme.tokenColors;\n  }\n  theme.type ||= \"dark\";\n  theme.colorReplacements = { ...theme.colorReplacements };\n  theme.settings ||= [];\n  let { bg, fg } = theme;\n  if (!bg || !fg) {\n    const globalSetting = theme.settings ? theme.settings.find((s) => !s.name && !s.scope) : void 0;\n    if (globalSetting?.settings?.foreground)\n      fg = globalSetting.settings.foreground;\n    if (globalSetting?.settings?.background)\n      bg = globalSetting.settings.background;\n    if (!fg && theme?.colors?.[\"editor.foreground\"])\n      fg = theme.colors[\"editor.foreground\"];\n    if (!bg && theme?.colors?.[\"editor.background\"])\n      bg = theme.colors[\"editor.background\"];\n    if (!fg)\n      fg = theme.type === \"light\" ? VSCODE_FALLBACK_EDITOR_FG.light : VSCODE_FALLBACK_EDITOR_FG.dark;\n    if (!bg)\n      bg = theme.type === \"light\" ? VSCODE_FALLBACK_EDITOR_BG.light : VSCODE_FALLBACK_EDITOR_BG.dark;\n    theme.fg = fg;\n    theme.bg = bg;\n  }\n  if (!(theme.settings[0] && theme.settings[0].settings && !theme.settings[0].scope)) {\n    theme.settings.unshift({\n      settings: {\n        foreground: theme.fg,\n        background: theme.bg\n      }\n    });\n  }\n  let replacementCount = 0;\n  const replacementMap = /* @__PURE__ */ new Map();\n  function getReplacementColor(value) {\n    if (replacementMap.has(value))\n      return replacementMap.get(value);\n    replacementCount += 1;\n    const hex = `#${replacementCount.toString(16).padStart(8, \"0\").toLowerCase()}`;\n    if (theme.colorReplacements?.[`#${hex}`])\n      return getReplacementColor(value);\n    replacementMap.set(value, hex);\n    return hex;\n  }\n  theme.settings = theme.settings.map((setting) => {\n    const replaceFg = setting.settings?.foreground && !setting.settings.foreground.startsWith(\"#\");\n    const replaceBg = setting.settings?.background && !setting.settings.background.startsWith(\"#\");\n    if (!replaceFg && !replaceBg)\n      return setting;\n    const clone = {\n      ...setting,\n      settings: {\n        ...setting.settings\n      }\n    };\n    if (replaceFg) {\n      const replacement = getReplacementColor(setting.settings.foreground);\n      theme.colorReplacements[replacement] = setting.settings.foreground;\n      clone.settings.foreground = replacement;\n    }\n    if (replaceBg) {\n      const replacement = getReplacementColor(setting.settings.background);\n      theme.colorReplacements[replacement] = setting.settings.background;\n      clone.settings.background = replacement;\n    }\n    return clone;\n  });\n  for (const key of Object.keys(theme.colors || {})) {\n    if (key === \"editor.foreground\" || key === \"editor.background\" || key.startsWith(\"terminal.ansi\")) {\n      if (!theme.colors[key]?.startsWith(\"#\")) {\n        const replacement = getReplacementColor(theme.colors[key]);\n        theme.colorReplacements[replacement] = theme.colors[key];\n        theme.colors[key] = replacement;\n      }\n    }\n  }\n  Object.defineProperty(theme, RESOLVED_KEY, {\n    enumerable: false,\n    writable: false,\n    value: true\n  });\n  return theme;\n}\n\nasync function resolveLangs(langs) {\n  return Array.from(new Set((await Promise.all(\n    langs.filter((l) => !isSpecialLang(l)).map(async (lang) => await normalizeGetter(lang).then((r) => Array.isArray(r) ? r : [r]))\n  )).flat()));\n}\nasync function resolveThemes(themes) {\n  const resolved = await Promise.all(\n    themes.map(\n      async (theme) => isSpecialTheme(theme) ? null : normalizeTheme(await normalizeGetter(theme))\n    )\n  );\n  return resolved.filter((i) => !!i);\n}\n\nlet _emitDeprecation = 3;\nlet _emitError = false;\nfunction enableDeprecationWarnings(emitDeprecation = true, emitError = false) {\n  _emitDeprecation = emitDeprecation;\n  _emitError = emitError;\n}\nfunction warnDeprecated(message, version = 3) {\n  if (!_emitDeprecation)\n    return;\n  if (typeof _emitDeprecation === \"number\" && version > _emitDeprecation)\n    return;\n  if (_emitError) {\n    throw new Error(`[SHIKI DEPRECATE]: ${message}`);\n  } else {\n    console.trace(`[SHIKI DEPRECATE]: ${message}`);\n  }\n}\n\nclass ShikiError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = \"ShikiError\";\n  }\n}\n\nclass Registry extends Registry$1 {\n  constructor(_resolver, _themes, _langs, _alias = {}) {\n    super(_resolver);\n    this._resolver = _resolver;\n    this._themes = _themes;\n    this._langs = _langs;\n    this._alias = _alias;\n    this._themes.map((t) => this.loadTheme(t));\n    this.loadLanguages(this._langs);\n  }\n  _resolvedThemes = /* @__PURE__ */ new Map();\n  _resolvedGrammars = /* @__PURE__ */ new Map();\n  _langMap = /* @__PURE__ */ new Map();\n  _langGraph = /* @__PURE__ */ new Map();\n  _textmateThemeCache = /* @__PURE__ */ new WeakMap();\n  _loadedThemesCache = null;\n  _loadedLanguagesCache = null;\n  getTheme(theme) {\n    if (typeof theme === \"string\")\n      return this._resolvedThemes.get(theme);\n    else\n      return this.loadTheme(theme);\n  }\n  loadTheme(theme) {\n    const _theme = normalizeTheme(theme);\n    if (_theme.name) {\n      this._resolvedThemes.set(_theme.name, _theme);\n      this._loadedThemesCache = null;\n    }\n    return _theme;\n  }\n  getLoadedThemes() {\n    if (!this._loadedThemesCache)\n      this._loadedThemesCache = [...this._resolvedThemes.keys()];\n    return this._loadedThemesCache;\n  }\n  // Override and re-implement this method to cache the textmate themes as `TextMateTheme.createFromRawTheme`\n  // is expensive. Themes can switch often especially for dual-theme support.\n  //\n  // The parent class also accepts `colorMap` as the second parameter, but since we don't use that,\n  // we omit here so it's easier to cache the themes.\n  setTheme(theme) {\n    let textmateTheme = this._textmateThemeCache.get(theme);\n    if (!textmateTheme) {\n      textmateTheme = Theme.createFromRawTheme(theme);\n      this._textmateThemeCache.set(theme, textmateTheme);\n    }\n    this._syncRegistry.setTheme(textmateTheme);\n  }\n  getGrammar(name) {\n    if (this._alias[name]) {\n      const resolved = /* @__PURE__ */ new Set([name]);\n      while (this._alias[name]) {\n        name = this._alias[name];\n        if (resolved.has(name))\n          throw new ShikiError(`Circular alias \\`${Array.from(resolved).join(\" -> \")} -> ${name}\\``);\n        resolved.add(name);\n      }\n    }\n    return this._resolvedGrammars.get(name);\n  }\n  loadLanguage(lang) {\n    if (this.getGrammar(lang.name))\n      return;\n    const embeddedLazilyBy = new Set(\n      [...this._langMap.values()].filter((i) => i.embeddedLangsLazy?.includes(lang.name))\n    );\n    this._resolver.addLanguage(lang);\n    const grammarConfig = {\n      balancedBracketSelectors: lang.balancedBracketSelectors || [\"*\"],\n      unbalancedBracketSelectors: lang.unbalancedBracketSelectors || []\n    };\n    this._syncRegistry._rawGrammars.set(lang.scopeName, lang);\n    const g = this.loadGrammarWithConfiguration(lang.scopeName, 1, grammarConfig);\n    g.name = lang.name;\n    this._resolvedGrammars.set(lang.name, g);\n    if (lang.aliases) {\n      lang.aliases.forEach((alias) => {\n        this._alias[alias] = lang.name;\n      });\n    }\n    this._loadedLanguagesCache = null;\n    if (embeddedLazilyBy.size) {\n      for (const e of embeddedLazilyBy) {\n        this._resolvedGrammars.delete(e.name);\n        this._loadedLanguagesCache = null;\n        this._syncRegistry?._injectionGrammars?.delete(e.scopeName);\n        this._syncRegistry?._grammars?.delete(e.scopeName);\n        this.loadLanguage(this._langMap.get(e.name));\n      }\n    }\n  }\n  dispose() {\n    super.dispose();\n    this._resolvedThemes.clear();\n    this._resolvedGrammars.clear();\n    this._langMap.clear();\n    this._langGraph.clear();\n    this._loadedThemesCache = null;\n  }\n  loadLanguages(langs) {\n    for (const lang of langs)\n      this.resolveEmbeddedLanguages(lang);\n    const langsGraphArray = Array.from(this._langGraph.entries());\n    const missingLangs = langsGraphArray.filter(([_, lang]) => !lang);\n    if (missingLangs.length) {\n      const dependents = langsGraphArray.filter(([_, lang]) => lang && lang.embeddedLangs?.some((l) => missingLangs.map(([name]) => name).includes(l))).filter((lang) => !missingLangs.includes(lang));\n      throw new ShikiError(`Missing languages ${missingLangs.map(([name]) => `\\`${name}\\``).join(\", \")}, required by ${dependents.map(([name]) => `\\`${name}\\``).join(\", \")}`);\n    }\n    for (const [_, lang] of langsGraphArray)\n      this._resolver.addLanguage(lang);\n    for (const [_, lang] of langsGraphArray)\n      this.loadLanguage(lang);\n  }\n  getLoadedLanguages() {\n    if (!this._loadedLanguagesCache) {\n      this._loadedLanguagesCache = [\n        .../* @__PURE__ */ new Set([...this._resolvedGrammars.keys(), ...Object.keys(this._alias)])\n      ];\n    }\n    return this._loadedLanguagesCache;\n  }\n  resolveEmbeddedLanguages(lang) {\n    this._langMap.set(lang.name, lang);\n    this._langGraph.set(lang.name, lang);\n    if (lang.embeddedLangs) {\n      for (const embeddedLang of lang.embeddedLangs)\n        this._langGraph.set(embeddedLang, this._langMap.get(embeddedLang));\n    }\n  }\n}\n\nclass Resolver {\n  _langs = /* @__PURE__ */ new Map();\n  _scopeToLang = /* @__PURE__ */ new Map();\n  _injections = /* @__PURE__ */ new Map();\n  _onigLib;\n  constructor(engine, langs) {\n    this._onigLib = {\n      createOnigScanner: (patterns) => engine.createScanner(patterns),\n      createOnigString: (s) => engine.createString(s)\n    };\n    langs.forEach((i) => this.addLanguage(i));\n  }\n  get onigLib() {\n    return this._onigLib;\n  }\n  getLangRegistration(langIdOrAlias) {\n    return this._langs.get(langIdOrAlias);\n  }\n  loadGrammar(scopeName) {\n    return this._scopeToLang.get(scopeName);\n  }\n  addLanguage(l) {\n    this._langs.set(l.name, l);\n    if (l.aliases) {\n      l.aliases.forEach((a) => {\n        this._langs.set(a, l);\n      });\n    }\n    this._scopeToLang.set(l.scopeName, l);\n    if (l.injectTo) {\n      l.injectTo.forEach((i) => {\n        if (!this._injections.get(i))\n          this._injections.set(i, []);\n        this._injections.get(i).push(l.scopeName);\n      });\n    }\n  }\n  getInjections(scopeName) {\n    const scopeParts = scopeName.split(\".\");\n    let injections = [];\n    for (let i = 1; i <= scopeParts.length; i++) {\n      const subScopeName = scopeParts.slice(0, i).join(\".\");\n      injections = [...injections, ...this._injections.get(subScopeName) || []];\n    }\n    return injections;\n  }\n}\n\nlet instancesCount = 0;\nfunction createShikiInternalSync(options) {\n  instancesCount += 1;\n  if (options.warnings !== false && instancesCount >= 10 && instancesCount % 10 === 0)\n    console.warn(`[Shiki] ${instancesCount} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \\`highlighter.dispose()\\` to release unused instances.`);\n  let isDisposed = false;\n  if (!options.engine)\n    throw new ShikiError(\"`engine` option is required for synchronous mode\");\n  const langs = (options.langs || []).flat(1);\n  const themes = (options.themes || []).flat(1).map(normalizeTheme);\n  const resolver = new Resolver(options.engine, langs);\n  const _registry = new Registry(resolver, themes, langs, options.langAlias);\n  let _lastTheme;\n  function getLanguage(name) {\n    ensureNotDisposed();\n    const _lang = _registry.getGrammar(typeof name === \"string\" ? name : name.name);\n    if (!_lang)\n      throw new ShikiError(`Language \\`${name}\\` not found, you may need to load it first`);\n    return _lang;\n  }\n  function getTheme(name) {\n    if (name === \"none\")\n      return { bg: \"\", fg: \"\", name: \"none\", settings: [], type: \"dark\" };\n    ensureNotDisposed();\n    const _theme = _registry.getTheme(name);\n    if (!_theme)\n      throw new ShikiError(`Theme \\`${name}\\` not found, you may need to load it first`);\n    return _theme;\n  }\n  function setTheme(name) {\n    ensureNotDisposed();\n    const theme = getTheme(name);\n    if (_lastTheme !== name) {\n      _registry.setTheme(theme);\n      _lastTheme = name;\n    }\n    const colorMap = _registry.getColorMap();\n    return {\n      theme,\n      colorMap\n    };\n  }\n  function getLoadedThemes() {\n    ensureNotDisposed();\n    return _registry.getLoadedThemes();\n  }\n  function getLoadedLanguages() {\n    ensureNotDisposed();\n    return _registry.getLoadedLanguages();\n  }\n  function loadLanguageSync(...langs2) {\n    ensureNotDisposed();\n    _registry.loadLanguages(langs2.flat(1));\n  }\n  async function loadLanguage(...langs2) {\n    return loadLanguageSync(await resolveLangs(langs2));\n  }\n  function loadThemeSync(...themes2) {\n    ensureNotDisposed();\n    for (const theme of themes2.flat(1)) {\n      _registry.loadTheme(theme);\n    }\n  }\n  async function loadTheme(...themes2) {\n    ensureNotDisposed();\n    return loadThemeSync(await resolveThemes(themes2));\n  }\n  function ensureNotDisposed() {\n    if (isDisposed)\n      throw new ShikiError(\"Shiki instance has been disposed\");\n  }\n  function dispose() {\n    if (isDisposed)\n      return;\n    isDisposed = true;\n    _registry.dispose();\n    instancesCount -= 1;\n  }\n  return {\n    setTheme,\n    getTheme,\n    getLanguage,\n    getLoadedThemes,\n    getLoadedLanguages,\n    loadLanguage,\n    loadLanguageSync,\n    loadTheme,\n    loadThemeSync,\n    dispose,\n    [Symbol.dispose]: dispose\n  };\n}\n\nasync function createShikiInternal(options) {\n  if (!options.engine) {\n    warnDeprecated(\"`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.\");\n  }\n  const [\n    themes,\n    langs,\n    engine\n  ] = await Promise.all([\n    resolveThemes(options.themes || []),\n    resolveLangs(options.langs || []),\n    options.engine\n  ]);\n  return createShikiInternalSync({\n    ...options,\n    themes,\n    langs,\n    engine\n  });\n}\n\nasync function createHighlighterCore(options) {\n  const internal = await createShikiInternal(options);\n  return {\n    getLastGrammarState: (...args) => getLastGrammarState(internal, ...args),\n    codeToTokensBase: (code, options2) => codeToTokensBase(internal, code, options2),\n    codeToTokensWithThemes: (code, options2) => codeToTokensWithThemes(internal, code, options2),\n    codeToTokens: (code, options2) => codeToTokens(internal, code, options2),\n    codeToHast: (code, options2) => codeToHast(internal, code, options2),\n    codeToHtml: (code, options2) => codeToHtml(internal, code, options2),\n    getBundledLanguages: () => ({}),\n    getBundledThemes: () => ({}),\n    ...internal,\n    getInternalContext: () => internal\n  };\n}\nfunction createHighlighterCoreSync(options) {\n  const internal = createShikiInternalSync(options);\n  return {\n    getLastGrammarState: (...args) => getLastGrammarState(internal, ...args),\n    codeToTokensBase: (code, options2) => codeToTokensBase(internal, code, options2),\n    codeToTokensWithThemes: (code, options2) => codeToTokensWithThemes(internal, code, options2),\n    codeToTokens: (code, options2) => codeToTokens(internal, code, options2),\n    codeToHast: (code, options2) => codeToHast(internal, code, options2),\n    codeToHtml: (code, options2) => codeToHtml(internal, code, options2),\n    getBundledLanguages: () => ({}),\n    getBundledThemes: () => ({}),\n    ...internal,\n    getInternalContext: () => internal\n  };\n}\nfunction makeSingletonHighlighterCore(createHighlighter) {\n  let _shiki;\n  async function getSingletonHighlighterCore2(options) {\n    if (!_shiki) {\n      _shiki = createHighlighter({\n        ...options,\n        themes: options.themes || [],\n        langs: options.langs || []\n      });\n      return _shiki;\n    } else {\n      const s = await _shiki;\n      await Promise.all([\n        s.loadTheme(...options.themes || []),\n        s.loadLanguage(...options.langs || [])\n      ]);\n      return s;\n    }\n  }\n  return getSingletonHighlighterCore2;\n}\nconst getSingletonHighlighterCore = /* @__PURE__ */ makeSingletonHighlighterCore(createHighlighterCore);\n\nfunction createdBundledHighlighter(options) {\n  const bundledLanguages = options.langs;\n  const bundledThemes = options.themes;\n  const engine = options.engine;\n  async function createHighlighter(options2) {\n    function resolveLang(lang) {\n      if (typeof lang === \"string\") {\n        if (isSpecialLang(lang))\n          return [];\n        lang = options2.langAlias?.[lang] || lang;\n        const bundle = bundledLanguages[lang];\n        if (!bundle)\n          throw new ShikiError$1(`Language \\`${lang}\\` is not included in this bundle. You may want to load it from external source.`);\n        return bundle;\n      }\n      return lang;\n    }\n    function resolveTheme(theme) {\n      if (isSpecialTheme(theme))\n        return \"none\";\n      if (typeof theme === \"string\") {\n        const bundle = bundledThemes[theme];\n        if (!bundle)\n          throw new ShikiError$1(`Theme \\`${theme}\\` is not included in this bundle. You may want to load it from external source.`);\n        return bundle;\n      }\n      return theme;\n    }\n    const _themes = (options2.themes ?? []).map((i) => resolveTheme(i));\n    const langs = (options2.langs ?? []).map((i) => resolveLang(i));\n    const core = await createHighlighterCore({\n      engine: options2.engine ?? engine(),\n      ...options2,\n      themes: _themes,\n      langs\n    });\n    return {\n      ...core,\n      loadLanguage(...langs2) {\n        return core.loadLanguage(...langs2.map(resolveLang));\n      },\n      loadTheme(...themes) {\n        return core.loadTheme(...themes.map(resolveTheme));\n      },\n      getBundledLanguages() {\n        return bundledLanguages;\n      },\n      getBundledThemes() {\n        return bundledThemes;\n      }\n    };\n  }\n  return createHighlighter;\n}\nfunction makeSingletonHighlighter(createHighlighter) {\n  let _shiki;\n  async function getSingletonHighlighter(options = {}) {\n    if (!_shiki) {\n      _shiki = createHighlighter({\n        ...options,\n        themes: options.themes || [],\n        langs: options.langs || []\n      });\n      return _shiki;\n    } else {\n      const s = await _shiki;\n      await Promise.all([\n        s.loadTheme(...options.themes || []),\n        s.loadLanguage(...options.langs || [])\n      ]);\n      return s;\n    }\n  }\n  return getSingletonHighlighter;\n}\nfunction createSingletonShorthands(createHighlighter, config) {\n  const getSingletonHighlighter = makeSingletonHighlighter(createHighlighter);\n  async function get(code, options) {\n    const shiki = await getSingletonHighlighter({\n      langs: [options.lang],\n      themes: \"theme\" in options ? [options.theme] : Object.values(options.themes)\n    });\n    const langs = await config?.guessEmbeddedLanguages?.(code, options.lang, shiki);\n    if (langs) {\n      await shiki.loadLanguage(...langs);\n    }\n    return shiki;\n  }\n  return {\n    getSingletonHighlighter(options) {\n      return getSingletonHighlighter(options);\n    },\n    async codeToHtml(code, options) {\n      const shiki = await get(code, options);\n      return shiki.codeToHtml(code, options);\n    },\n    async codeToHast(code, options) {\n      const shiki = await get(code, options);\n      return shiki.codeToHast(code, options);\n    },\n    async codeToTokens(code, options) {\n      const shiki = await get(code, options);\n      return shiki.codeToTokens(code, options);\n    },\n    async codeToTokensBase(code, options) {\n      const shiki = await get(code, options);\n      return shiki.codeToTokensBase(code, options);\n    },\n    async codeToTokensWithThemes(code, options) {\n      const shiki = await get(code, options);\n      return shiki.codeToTokensWithThemes(code, options);\n    },\n    async getLastGrammarState(code, options) {\n      const shiki = await getSingletonHighlighter({\n        langs: [options.lang],\n        themes: [options.theme]\n      });\n      return shiki.getLastGrammarState(code, options);\n    }\n  };\n}\n\nfunction createCssVariablesTheme(options = {}) {\n  const {\n    name = \"css-variables\",\n    variablePrefix = \"--shiki-\",\n    fontStyle = true\n  } = options;\n  const variable = (name2) => {\n    if (options.variableDefaults?.[name2])\n      return `var(${variablePrefix}${name2}, ${options.variableDefaults[name2]})`;\n    return `var(${variablePrefix}${name2})`;\n  };\n  const theme = {\n    name,\n    type: \"dark\",\n    colors: {\n      \"editor.foreground\": variable(\"foreground\"),\n      \"editor.background\": variable(\"background\"),\n      \"terminal.ansiBlack\": variable(\"ansi-black\"),\n      \"terminal.ansiRed\": variable(\"ansi-red\"),\n      \"terminal.ansiGreen\": variable(\"ansi-green\"),\n      \"terminal.ansiYellow\": variable(\"ansi-yellow\"),\n      \"terminal.ansiBlue\": variable(\"ansi-blue\"),\n      \"terminal.ansiMagenta\": variable(\"ansi-magenta\"),\n      \"terminal.ansiCyan\": variable(\"ansi-cyan\"),\n      \"terminal.ansiWhite\": variable(\"ansi-white\"),\n      \"terminal.ansiBrightBlack\": variable(\"ansi-bright-black\"),\n      \"terminal.ansiBrightRed\": variable(\"ansi-bright-red\"),\n      \"terminal.ansiBrightGreen\": variable(\"ansi-bright-green\"),\n      \"terminal.ansiBrightYellow\": variable(\"ansi-bright-yellow\"),\n      \"terminal.ansiBrightBlue\": variable(\"ansi-bright-blue\"),\n      \"terminal.ansiBrightMagenta\": variable(\"ansi-bright-magenta\"),\n      \"terminal.ansiBrightCyan\": variable(\"ansi-bright-cyan\"),\n      \"terminal.ansiBrightWhite\": variable(\"ansi-bright-white\")\n    },\n    tokenColors: [\n      {\n        scope: [\n          \"keyword.operator.accessor\",\n          \"meta.group.braces.round.function.arguments\",\n          \"meta.template.expression\",\n          \"markup.fenced_code meta.embedded.block\"\n        ],\n        settings: {\n          foreground: variable(\"foreground\")\n        }\n      },\n      {\n        scope: \"emphasis\",\n        settings: {\n          fontStyle: \"italic\"\n        }\n      },\n      {\n        scope: [\"strong\", \"markup.heading.markdown\", \"markup.bold.markdown\"],\n        settings: {\n          fontStyle: \"bold\"\n        }\n      },\n      {\n        scope: [\"markup.italic.markdown\"],\n        settings: {\n          fontStyle: \"italic\"\n        }\n      },\n      {\n        scope: \"meta.link.inline.markdown\",\n        settings: {\n          fontStyle: \"underline\",\n          foreground: variable(\"token-link\")\n        }\n      },\n      {\n        scope: [\"string\", \"markup.fenced_code\", \"markup.inline\"],\n        settings: {\n          foreground: variable(\"token-string\")\n        }\n      },\n      {\n        scope: [\"comment\", \"string.quoted.docstring.multi\"],\n        settings: {\n          foreground: variable(\"token-comment\")\n        }\n      },\n      {\n        scope: [\n          \"constant.numeric\",\n          \"constant.language\",\n          \"constant.other.placeholder\",\n          \"constant.character.format.placeholder\",\n          \"variable.language.this\",\n          \"variable.other.object\",\n          \"variable.other.class\",\n          \"variable.other.constant\",\n          \"meta.property-name\",\n          \"meta.property-value\",\n          \"support\"\n        ],\n        settings: {\n          foreground: variable(\"token-constant\")\n        }\n      },\n      {\n        scope: [\n          \"keyword\",\n          \"storage.modifier\",\n          \"storage.type\",\n          \"storage.control.clojure\",\n          \"entity.name.function.clojure\",\n          \"entity.name.tag.yaml\",\n          \"support.function.node\",\n          \"support.type.property-name.json\",\n          \"punctuation.separator.key-value\",\n          \"punctuation.definition.template-expression\"\n        ],\n        settings: {\n          foreground: variable(\"token-keyword\")\n        }\n      },\n      {\n        scope: \"variable.parameter.function\",\n        settings: {\n          foreground: variable(\"token-parameter\")\n        }\n      },\n      {\n        scope: [\n          \"support.function\",\n          \"entity.name.type\",\n          \"entity.other.inherited-class\",\n          \"meta.function-call\",\n          \"meta.instance.constructor\",\n          \"entity.other.attribute-name\",\n          \"entity.name.function\",\n          \"constant.keyword.clojure\"\n        ],\n        settings: {\n          foreground: variable(\"token-function\")\n        }\n      },\n      {\n        scope: [\n          \"entity.name.tag\",\n          \"string.quoted\",\n          \"string.regexp\",\n          \"string.interpolated\",\n          \"string.template\",\n          \"string.unquoted.plain.out.yaml\",\n          \"keyword.other.template\"\n        ],\n        settings: {\n          foreground: variable(\"token-string-expression\")\n        }\n      },\n      {\n        scope: [\n          \"punctuation.definition.arguments\",\n          \"punctuation.definition.dict\",\n          \"punctuation.separator\",\n          \"meta.function-call.arguments\"\n        ],\n        settings: {\n          foreground: variable(\"token-punctuation\")\n        }\n      },\n      {\n        // [Custom] Markdown links\n        scope: [\n          \"markup.underline.link\",\n          \"punctuation.definition.metadata.markdown\"\n        ],\n        settings: {\n          foreground: variable(\"token-link\")\n        }\n      },\n      {\n        // [Custom] Markdown list\n        scope: [\"beginning.punctuation.definition.list.markdown\"],\n        settings: {\n          foreground: variable(\"token-string\")\n        }\n      },\n      {\n        // [Custom] Markdown punctuation definition brackets\n        scope: [\n          \"punctuation.definition.string.begin.markdown\",\n          \"punctuation.definition.string.end.markdown\",\n          \"string.other.link.title.markdown\",\n          \"string.other.link.description.markdown\"\n        ],\n        settings: {\n          foreground: variable(\"token-keyword\")\n        }\n      },\n      {\n        // [Custom] Diff\n        scope: [\n          \"markup.inserted\",\n          \"meta.diff.header.to-file\",\n          \"punctuation.definition.inserted\"\n        ],\n        settings: {\n          foreground: variable(\"token-inserted\")\n        }\n      },\n      {\n        scope: [\n          \"markup.deleted\",\n          \"meta.diff.header.from-file\",\n          \"punctuation.definition.deleted\"\n        ],\n        settings: {\n          foreground: variable(\"token-deleted\")\n        }\n      },\n      {\n        scope: [\n          \"markup.changed\",\n          \"punctuation.definition.changed\"\n        ],\n        settings: {\n          foreground: variable(\"token-changed\")\n        }\n      }\n    ]\n  };\n  if (!fontStyle) {\n    theme.tokenColors = theme.tokenColors?.map((tokenColor) => {\n      if (tokenColor.settings?.fontStyle)\n        delete tokenColor.settings.fontStyle;\n      return tokenColor;\n    });\n  }\n  return theme;\n}\n\nexport { addClassToHast, applyColorReplacements, codeToHast, codeToHtml, codeToTokens, codeToTokensBase, codeToTokensWithThemes, createCssVariablesTheme, createHighlighterCore, createHighlighterCoreSync, createPositionConverter, createShikiInternal, createShikiInternalSync, createSingletonShorthands, createdBundledHighlighter, enableDeprecationWarnings, flatTokenVariants, getSingletonHighlighterCore, getTokenStyleObject, guessEmbeddedLanguages, hastToHtml, isNoneTheme, isPlainLang, isSpecialLang, isSpecialTheme, makeSingletonHighlighter, makeSingletonHighlighterCore, normalizeGetter, normalizeTheme, resolveColorReplacements, splitLines, splitToken, splitTokens, stringifyTokenStyle, toArray, tokenizeAnsiWithTheme, tokenizeWithTheme, tokensToHast, transformerDecorations, warnDeprecated };\n", "const bundledLanguagesInfo = [\n  {\n    \"id\": \"abap\",\n    \"name\": \"ABAP\",\n    \"import\": (() => import('@shikijs/langs/abap'))\n  },\n  {\n    \"id\": \"actionscript-3\",\n    \"name\": \"ActionScript\",\n    \"import\": (() => import('@shikijs/langs/actionscript-3'))\n  },\n  {\n    \"id\": \"ada\",\n    \"name\": \"Ada\",\n    \"import\": (() => import('@shikijs/langs/ada'))\n  },\n  {\n    \"id\": \"angular-html\",\n    \"name\": \"Angular HTML\",\n    \"import\": (() => import('@shikijs/langs/angular-html'))\n  },\n  {\n    \"id\": \"angular-ts\",\n    \"name\": \"Angular TypeScript\",\n    \"import\": (() => import('@shikijs/langs/angular-ts'))\n  },\n  {\n    \"id\": \"apache\",\n    \"name\": \"Apache Conf\",\n    \"import\": (() => import('@shikijs/langs/apache'))\n  },\n  {\n    \"id\": \"apex\",\n    \"name\": \"Apex\",\n    \"import\": (() => import('@shikijs/langs/apex'))\n  },\n  {\n    \"id\": \"apl\",\n    \"name\": \"APL\",\n    \"import\": (() => import('@shikijs/langs/apl'))\n  },\n  {\n    \"id\": \"applescript\",\n    \"name\": \"AppleScript\",\n    \"import\": (() => import('@shikijs/langs/applescript'))\n  },\n  {\n    \"id\": \"ara\",\n    \"name\": \"Ara\",\n    \"import\": (() => import('@shikijs/langs/ara'))\n  },\n  {\n    \"id\": \"asciidoc\",\n    \"name\": \"AsciiDoc\",\n    \"aliases\": [\n      \"adoc\"\n    ],\n    \"import\": (() => import('@shikijs/langs/asciidoc'))\n  },\n  {\n    \"id\": \"asm\",\n    \"name\": \"Assembly\",\n    \"import\": (() => import('@shikijs/langs/asm'))\n  },\n  {\n    \"id\": \"astro\",\n    \"name\": \"Astro\",\n    \"import\": (() => import('@shikijs/langs/astro'))\n  },\n  {\n    \"id\": \"awk\",\n    \"name\": \"AWK\",\n    \"import\": (() => import('@shikijs/langs/awk'))\n  },\n  {\n    \"id\": \"ballerina\",\n    \"name\": \"Ballerina\",\n    \"import\": (() => import('@shikijs/langs/ballerina'))\n  },\n  {\n    \"id\": \"bat\",\n    \"name\": \"Batch File\",\n    \"aliases\": [\n      \"batch\"\n    ],\n    \"import\": (() => import('@shikijs/langs/bat'))\n  },\n  {\n    \"id\": \"beancount\",\n    \"name\": \"Beancount\",\n    \"import\": (() => import('@shikijs/langs/beancount'))\n  },\n  {\n    \"id\": \"berry\",\n    \"name\": \"Berry\",\n    \"aliases\": [\n      \"be\"\n    ],\n    \"import\": (() => import('@shikijs/langs/berry'))\n  },\n  {\n    \"id\": \"bibtex\",\n    \"name\": \"BibTeX\",\n    \"import\": (() => import('@shikijs/langs/bibtex'))\n  },\n  {\n    \"id\": \"bicep\",\n    \"name\": \"Bicep\",\n    \"import\": (() => import('@shikijs/langs/bicep'))\n  },\n  {\n    \"id\": \"blade\",\n    \"name\": \"Blade\",\n    \"import\": (() => import('@shikijs/langs/blade'))\n  },\n  {\n    \"id\": \"bsl\",\n    \"name\": \"1C (Enterprise)\",\n    \"aliases\": [\n      \"1c\"\n    ],\n    \"import\": (() => import('@shikijs/langs/bsl'))\n  },\n  {\n    \"id\": \"c\",\n    \"name\": \"C\",\n    \"import\": (() => import('@shikijs/langs/c'))\n  },\n  {\n    \"id\": \"cadence\",\n    \"name\": \"Cadence\",\n    \"aliases\": [\n      \"cdc\"\n    ],\n    \"import\": (() => import('@shikijs/langs/cadence'))\n  },\n  {\n    \"id\": \"cairo\",\n    \"name\": \"Cairo\",\n    \"import\": (() => import('@shikijs/langs/cairo'))\n  },\n  {\n    \"id\": \"clarity\",\n    \"name\": \"Clarity\",\n    \"import\": (() => import('@shikijs/langs/clarity'))\n  },\n  {\n    \"id\": \"clojure\",\n    \"name\": \"Clojure\",\n    \"aliases\": [\n      \"clj\"\n    ],\n    \"import\": (() => import('@shikijs/langs/clojure'))\n  },\n  {\n    \"id\": \"cmake\",\n    \"name\": \"CMake\",\n    \"import\": (() => import('@shikijs/langs/cmake'))\n  },\n  {\n    \"id\": \"cobol\",\n    \"name\": \"COBOL\",\n    \"import\": (() => import('@shikijs/langs/cobol'))\n  },\n  {\n    \"id\": \"codeowners\",\n    \"name\": \"CODEOWNERS\",\n    \"import\": (() => import('@shikijs/langs/codeowners'))\n  },\n  {\n    \"id\": \"codeql\",\n    \"name\": \"CodeQL\",\n    \"aliases\": [\n      \"ql\"\n    ],\n    \"import\": (() => import('@shikijs/langs/codeql'))\n  },\n  {\n    \"id\": \"coffee\",\n    \"name\": \"CoffeeScript\",\n    \"aliases\": [\n      \"coffeescript\"\n    ],\n    \"import\": (() => import('@shikijs/langs/coffee'))\n  },\n  {\n    \"id\": \"common-lisp\",\n    \"name\": \"Common Lisp\",\n    \"aliases\": [\n      \"lisp\"\n    ],\n    \"import\": (() => import('@shikijs/langs/common-lisp'))\n  },\n  {\n    \"id\": \"coq\",\n    \"name\": \"Coq\",\n    \"import\": (() => import('@shikijs/langs/coq'))\n  },\n  {\n    \"id\": \"cpp\",\n    \"name\": \"C++\",\n    \"aliases\": [\n      \"c++\"\n    ],\n    \"import\": (() => import('@shikijs/langs/cpp'))\n  },\n  {\n    \"id\": \"crystal\",\n    \"name\": \"Crystal\",\n    \"import\": (() => import('@shikijs/langs/crystal'))\n  },\n  {\n    \"id\": \"csharp\",\n    \"name\": \"C#\",\n    \"aliases\": [\n      \"c#\",\n      \"cs\"\n    ],\n    \"import\": (() => import('@shikijs/langs/csharp'))\n  },\n  {\n    \"id\": \"css\",\n    \"name\": \"CSS\",\n    \"import\": (() => import('@shikijs/langs/css'))\n  },\n  {\n    \"id\": \"csv\",\n    \"name\": \"CSV\",\n    \"import\": (() => import('@shikijs/langs/csv'))\n  },\n  {\n    \"id\": \"cue\",\n    \"name\": \"CUE\",\n    \"import\": (() => import('@shikijs/langs/cue'))\n  },\n  {\n    \"id\": \"cypher\",\n    \"name\": \"Cypher\",\n    \"aliases\": [\n      \"cql\"\n    ],\n    \"import\": (() => import('@shikijs/langs/cypher'))\n  },\n  {\n    \"id\": \"d\",\n    \"name\": \"D\",\n    \"import\": (() => import('@shikijs/langs/d'))\n  },\n  {\n    \"id\": \"dart\",\n    \"name\": \"Dart\",\n    \"import\": (() => import('@shikijs/langs/dart'))\n  },\n  {\n    \"id\": \"dax\",\n    \"name\": \"DAX\",\n    \"import\": (() => import('@shikijs/langs/dax'))\n  },\n  {\n    \"id\": \"desktop\",\n    \"name\": \"Desktop\",\n    \"import\": (() => import('@shikijs/langs/desktop'))\n  },\n  {\n    \"id\": \"diff\",\n    \"name\": \"Diff\",\n    \"import\": (() => import('@shikijs/langs/diff'))\n  },\n  {\n    \"id\": \"docker\",\n    \"name\": \"Dockerfile\",\n    \"aliases\": [\n      \"dockerfile\"\n    ],\n    \"import\": (() => import('@shikijs/langs/docker'))\n  },\n  {\n    \"id\": \"dotenv\",\n    \"name\": \"dotEnv\",\n    \"import\": (() => import('@shikijs/langs/dotenv'))\n  },\n  {\n    \"id\": \"dream-maker\",\n    \"name\": \"Dream Maker\",\n    \"import\": (() => import('@shikijs/langs/dream-maker'))\n  },\n  {\n    \"id\": \"edge\",\n    \"name\": \"Edge\",\n    \"import\": (() => import('@shikijs/langs/edge'))\n  },\n  {\n    \"id\": \"elixir\",\n    \"name\": \"Elixir\",\n    \"import\": (() => import('@shikijs/langs/elixir'))\n  },\n  {\n    \"id\": \"elm\",\n    \"name\": \"Elm\",\n    \"import\": (() => import('@shikijs/langs/elm'))\n  },\n  {\n    \"id\": \"emacs-lisp\",\n    \"name\": \"Emacs Lisp\",\n    \"aliases\": [\n      \"elisp\"\n    ],\n    \"import\": (() => import('@shikijs/langs/emacs-lisp'))\n  },\n  {\n    \"id\": \"erb\",\n    \"name\": \"ERB\",\n    \"import\": (() => import('@shikijs/langs/erb'))\n  },\n  {\n    \"id\": \"erlang\",\n    \"name\": \"Erlang\",\n    \"aliases\": [\n      \"erl\"\n    ],\n    \"import\": (() => import('@shikijs/langs/erlang'))\n  },\n  {\n    \"id\": \"fennel\",\n    \"name\": \"Fennel\",\n    \"import\": (() => import('@shikijs/langs/fennel'))\n  },\n  {\n    \"id\": \"fish\",\n    \"name\": \"Fish\",\n    \"import\": (() => import('@shikijs/langs/fish'))\n  },\n  {\n    \"id\": \"fluent\",\n    \"name\": \"Fluent\",\n    \"aliases\": [\n      \"ftl\"\n    ],\n    \"import\": (() => import('@shikijs/langs/fluent'))\n  },\n  {\n    \"id\": \"fortran-fixed-form\",\n    \"name\": \"Fortran (Fixed Form)\",\n    \"aliases\": [\n      \"f\",\n      \"for\",\n      \"f77\"\n    ],\n    \"import\": (() => import('@shikijs/langs/fortran-fixed-form'))\n  },\n  {\n    \"id\": \"fortran-free-form\",\n    \"name\": \"Fortran (Free Form)\",\n    \"aliases\": [\n      \"f90\",\n      \"f95\",\n      \"f03\",\n      \"f08\",\n      \"f18\"\n    ],\n    \"import\": (() => import('@shikijs/langs/fortran-free-form'))\n  },\n  {\n    \"id\": \"fsharp\",\n    \"name\": \"F#\",\n    \"aliases\": [\n      \"f#\",\n      \"fs\"\n    ],\n    \"import\": (() => import('@shikijs/langs/fsharp'))\n  },\n  {\n    \"id\": \"gdresource\",\n    \"name\": \"GDResource\",\n    \"import\": (() => import('@shikijs/langs/gdresource'))\n  },\n  {\n    \"id\": \"gdscript\",\n    \"name\": \"GDScript\",\n    \"import\": (() => import('@shikijs/langs/gdscript'))\n  },\n  {\n    \"id\": \"gdshader\",\n    \"name\": \"GDShader\",\n    \"import\": (() => import('@shikijs/langs/gdshader'))\n  },\n  {\n    \"id\": \"genie\",\n    \"name\": \"Genie\",\n    \"import\": (() => import('@shikijs/langs/genie'))\n  },\n  {\n    \"id\": \"gherkin\",\n    \"name\": \"Gherkin\",\n    \"import\": (() => import('@shikijs/langs/gherkin'))\n  },\n  {\n    \"id\": \"git-commit\",\n    \"name\": \"Git Commit Message\",\n    \"import\": (() => import('@shikijs/langs/git-commit'))\n  },\n  {\n    \"id\": \"git-rebase\",\n    \"name\": \"Git Rebase Message\",\n    \"import\": (() => import('@shikijs/langs/git-rebase'))\n  },\n  {\n    \"id\": \"gleam\",\n    \"name\": \"Gleam\",\n    \"import\": (() => import('@shikijs/langs/gleam'))\n  },\n  {\n    \"id\": \"glimmer-js\",\n    \"name\": \"Glimmer JS\",\n    \"aliases\": [\n      \"gjs\"\n    ],\n    \"import\": (() => import('@shikijs/langs/glimmer-js'))\n  },\n  {\n    \"id\": \"glimmer-ts\",\n    \"name\": \"Glimmer TS\",\n    \"aliases\": [\n      \"gts\"\n    ],\n    \"import\": (() => import('@shikijs/langs/glimmer-ts'))\n  },\n  {\n    \"id\": \"glsl\",\n    \"name\": \"GLSL\",\n    \"import\": (() => import('@shikijs/langs/glsl'))\n  },\n  {\n    \"id\": \"gnuplot\",\n    \"name\": \"Gnuplot\",\n    \"import\": (() => import('@shikijs/langs/gnuplot'))\n  },\n  {\n    \"id\": \"go\",\n    \"name\": \"Go\",\n    \"import\": (() => import('@shikijs/langs/go'))\n  },\n  {\n    \"id\": \"graphql\",\n    \"name\": \"GraphQL\",\n    \"aliases\": [\n      \"gql\"\n    ],\n    \"import\": (() => import('@shikijs/langs/graphql'))\n  },\n  {\n    \"id\": \"groovy\",\n    \"name\": \"Groovy\",\n    \"import\": (() => import('@shikijs/langs/groovy'))\n  },\n  {\n    \"id\": \"hack\",\n    \"name\": \"Hack\",\n    \"import\": (() => import('@shikijs/langs/hack'))\n  },\n  {\n    \"id\": \"haml\",\n    \"name\": \"Ruby Haml\",\n    \"import\": (() => import('@shikijs/langs/haml'))\n  },\n  {\n    \"id\": \"handlebars\",\n    \"name\": \"Handlebars\",\n    \"aliases\": [\n      \"hbs\"\n    ],\n    \"import\": (() => import('@shikijs/langs/handlebars'))\n  },\n  {\n    \"id\": \"haskell\",\n    \"name\": \"Haskell\",\n    \"aliases\": [\n      \"hs\"\n    ],\n    \"import\": (() => import('@shikijs/langs/haskell'))\n  },\n  {\n    \"id\": \"haxe\",\n    \"name\": \"Haxe\",\n    \"import\": (() => import('@shikijs/langs/haxe'))\n  },\n  {\n    \"id\": \"hcl\",\n    \"name\": \"HashiCorp HCL\",\n    \"import\": (() => import('@shikijs/langs/hcl'))\n  },\n  {\n    \"id\": \"hjson\",\n    \"name\": \"Hjson\",\n    \"import\": (() => import('@shikijs/langs/hjson'))\n  },\n  {\n    \"id\": \"hlsl\",\n    \"name\": \"HLSL\",\n    \"import\": (() => import('@shikijs/langs/hlsl'))\n  },\n  {\n    \"id\": \"html\",\n    \"name\": \"HTML\",\n    \"import\": (() => import('@shikijs/langs/html'))\n  },\n  {\n    \"id\": \"html-derivative\",\n    \"name\": \"HTML (Derivative)\",\n    \"import\": (() => import('@shikijs/langs/html-derivative'))\n  },\n  {\n    \"id\": \"http\",\n    \"name\": \"HTTP\",\n    \"import\": (() => import('@shikijs/langs/http'))\n  },\n  {\n    \"id\": \"hurl\",\n    \"name\": \"Hurl\",\n    \"import\": (() => import('@shikijs/langs/hurl'))\n  },\n  {\n    \"id\": \"hxml\",\n    \"name\": \"HXML\",\n    \"import\": (() => import('@shikijs/langs/hxml'))\n  },\n  {\n    \"id\": \"hy\",\n    \"name\": \"Hy\",\n    \"import\": (() => import('@shikijs/langs/hy'))\n  },\n  {\n    \"id\": \"imba\",\n    \"name\": \"Imba\",\n    \"import\": (() => import('@shikijs/langs/imba'))\n  },\n  {\n    \"id\": \"ini\",\n    \"name\": \"INI\",\n    \"aliases\": [\n      \"properties\"\n    ],\n    \"import\": (() => import('@shikijs/langs/ini'))\n  },\n  {\n    \"id\": \"java\",\n    \"name\": \"Java\",\n    \"import\": (() => import('@shikijs/langs/java'))\n  },\n  {\n    \"id\": \"javascript\",\n    \"name\": \"JavaScript\",\n    \"aliases\": [\n      \"js\",\n      \"cjs\",\n      \"mjs\"\n    ],\n    \"import\": (() => import('@shikijs/langs/javascript'))\n  },\n  {\n    \"id\": \"jinja\",\n    \"name\": \"Jinja\",\n    \"import\": (() => import('@shikijs/langs/jinja'))\n  },\n  {\n    \"id\": \"jison\",\n    \"name\": \"Jison\",\n    \"import\": (() => import('@shikijs/langs/jison'))\n  },\n  {\n    \"id\": \"json\",\n    \"name\": \"JSON\",\n    \"import\": (() => import('@shikijs/langs/json'))\n  },\n  {\n    \"id\": \"json5\",\n    \"name\": \"JSON5\",\n    \"import\": (() => import('@shikijs/langs/json5'))\n  },\n  {\n    \"id\": \"jsonc\",\n    \"name\": \"JSON with Comments\",\n    \"import\": (() => import('@shikijs/langs/jsonc'))\n  },\n  {\n    \"id\": \"jsonl\",\n    \"name\": \"JSON Lines\",\n    \"import\": (() => import('@shikijs/langs/jsonl'))\n  },\n  {\n    \"id\": \"jsonnet\",\n    \"name\": \"Jsonnet\",\n    \"import\": (() => import('@shikijs/langs/jsonnet'))\n  },\n  {\n    \"id\": \"jssm\",\n    \"name\": \"JSSM\",\n    \"aliases\": [\n      \"fsl\"\n    ],\n    \"import\": (() => import('@shikijs/langs/jssm'))\n  },\n  {\n    \"id\": \"jsx\",\n    \"name\": \"JSX\",\n    \"import\": (() => import('@shikijs/langs/jsx'))\n  },\n  {\n    \"id\": \"julia\",\n    \"name\": \"Julia\",\n    \"aliases\": [\n      \"jl\"\n    ],\n    \"import\": (() => import('@shikijs/langs/julia'))\n  },\n  {\n    \"id\": \"kdl\",\n    \"name\": \"KDL\",\n    \"import\": (() => import('@shikijs/langs/kdl'))\n  },\n  {\n    \"id\": \"kotlin\",\n    \"name\": \"Kotlin\",\n    \"aliases\": [\n      \"kt\",\n      \"kts\"\n    ],\n    \"import\": (() => import('@shikijs/langs/kotlin'))\n  },\n  {\n    \"id\": \"kusto\",\n    \"name\": \"Kusto\",\n    \"aliases\": [\n      \"kql\"\n    ],\n    \"import\": (() => import('@shikijs/langs/kusto'))\n  },\n  {\n    \"id\": \"latex\",\n    \"name\": \"LaTeX\",\n    \"import\": (() => import('@shikijs/langs/latex'))\n  },\n  {\n    \"id\": \"lean\",\n    \"name\": \"Lean 4\",\n    \"aliases\": [\n      \"lean4\"\n    ],\n    \"import\": (() => import('@shikijs/langs/lean'))\n  },\n  {\n    \"id\": \"less\",\n    \"name\": \"Less\",\n    \"import\": (() => import('@shikijs/langs/less'))\n  },\n  {\n    \"id\": \"liquid\",\n    \"name\": \"Liquid\",\n    \"import\": (() => import('@shikijs/langs/liquid'))\n  },\n  {\n    \"id\": \"llvm\",\n    \"name\": \"LLVM IR\",\n    \"import\": (() => import('@shikijs/langs/llvm'))\n  },\n  {\n    \"id\": \"log\",\n    \"name\": \"Log file\",\n    \"import\": (() => import('@shikijs/langs/log'))\n  },\n  {\n    \"id\": \"logo\",\n    \"name\": \"Logo\",\n    \"import\": (() => import('@shikijs/langs/logo'))\n  },\n  {\n    \"id\": \"lua\",\n    \"name\": \"Lua\",\n    \"import\": (() => import('@shikijs/langs/lua'))\n  },\n  {\n    \"id\": \"luau\",\n    \"name\": \"Luau\",\n    \"import\": (() => import('@shikijs/langs/luau'))\n  },\n  {\n    \"id\": \"make\",\n    \"name\": \"Makefile\",\n    \"aliases\": [\n      \"makefile\"\n    ],\n    \"import\": (() => import('@shikijs/langs/make'))\n  },\n  {\n    \"id\": \"markdown\",\n    \"name\": \"Markdown\",\n    \"aliases\": [\n      \"md\"\n    ],\n    \"import\": (() => import('@shikijs/langs/markdown'))\n  },\n  {\n    \"id\": \"marko\",\n    \"name\": \"Marko\",\n    \"import\": (() => import('@shikijs/langs/marko'))\n  },\n  {\n    \"id\": \"matlab\",\n    \"name\": \"MATLAB\",\n    \"import\": (() => import('@shikijs/langs/matlab'))\n  },\n  {\n    \"id\": \"mdc\",\n    \"name\": \"MDC\",\n    \"import\": (() => import('@shikijs/langs/mdc'))\n  },\n  {\n    \"id\": \"mdx\",\n    \"name\": \"MDX\",\n    \"import\": (() => import('@shikijs/langs/mdx'))\n  },\n  {\n    \"id\": \"mermaid\",\n    \"name\": \"Mermaid\",\n    \"aliases\": [\n      \"mmd\"\n    ],\n    \"import\": (() => import('@shikijs/langs/mermaid'))\n  },\n  {\n    \"id\": \"mipsasm\",\n    \"name\": \"MIPS Assembly\",\n    \"aliases\": [\n      \"mips\"\n    ],\n    \"import\": (() => import('@shikijs/langs/mipsasm'))\n  },\n  {\n    \"id\": \"mojo\",\n    \"name\": \"Mojo\",\n    \"import\": (() => import('@shikijs/langs/mojo'))\n  },\n  {\n    \"id\": \"move\",\n    \"name\": \"Move\",\n    \"import\": (() => import('@shikijs/langs/move'))\n  },\n  {\n    \"id\": \"narrat\",\n    \"name\": \"Narrat Language\",\n    \"aliases\": [\n      \"nar\"\n    ],\n    \"import\": (() => import('@shikijs/langs/narrat'))\n  },\n  {\n    \"id\": \"nextflow\",\n    \"name\": \"Nextflow\",\n    \"aliases\": [\n      \"nf\"\n    ],\n    \"import\": (() => import('@shikijs/langs/nextflow'))\n  },\n  {\n    \"id\": \"nginx\",\n    \"name\": \"Nginx\",\n    \"import\": (() => import('@shikijs/langs/nginx'))\n  },\n  {\n    \"id\": \"nim\",\n    \"name\": \"Nim\",\n    \"import\": (() => import('@shikijs/langs/nim'))\n  },\n  {\n    \"id\": \"nix\",\n    \"name\": \"Nix\",\n    \"import\": (() => import('@shikijs/langs/nix'))\n  },\n  {\n    \"id\": \"nushell\",\n    \"name\": \"nushell\",\n    \"aliases\": [\n      \"nu\"\n    ],\n    \"import\": (() => import('@shikijs/langs/nushell'))\n  },\n  {\n    \"id\": \"objective-c\",\n    \"name\": \"Objective-C\",\n    \"aliases\": [\n      \"objc\"\n    ],\n    \"import\": (() => import('@shikijs/langs/objective-c'))\n  },\n  {\n    \"id\": \"objective-cpp\",\n    \"name\": \"Objective-C++\",\n    \"import\": (() => import('@shikijs/langs/objective-cpp'))\n  },\n  {\n    \"id\": \"ocaml\",\n    \"name\": \"OCaml\",\n    \"import\": (() => import('@shikijs/langs/ocaml'))\n  },\n  {\n    \"id\": \"pascal\",\n    \"name\": \"Pascal\",\n    \"import\": (() => import('@shikijs/langs/pascal'))\n  },\n  {\n    \"id\": \"perl\",\n    \"name\": \"Perl\",\n    \"import\": (() => import('@shikijs/langs/perl'))\n  },\n  {\n    \"id\": \"php\",\n    \"name\": \"PHP\",\n    \"import\": (() => import('@shikijs/langs/php'))\n  },\n  {\n    \"id\": \"pkl\",\n    \"name\": \"Pkl\",\n    \"import\": (() => import('@shikijs/langs/pkl'))\n  },\n  {\n    \"id\": \"plsql\",\n    \"name\": \"PL/SQL\",\n    \"import\": (() => import('@shikijs/langs/plsql'))\n  },\n  {\n    \"id\": \"po\",\n    \"name\": \"Gettext PO\",\n    \"aliases\": [\n      \"pot\",\n      \"potx\"\n    ],\n    \"import\": (() => import('@shikijs/langs/po'))\n  },\n  {\n    \"id\": \"polar\",\n    \"name\": \"Polar\",\n    \"import\": (() => import('@shikijs/langs/polar'))\n  },\n  {\n    \"id\": \"postcss\",\n    \"name\": \"PostCSS\",\n    \"import\": (() => import('@shikijs/langs/postcss'))\n  },\n  {\n    \"id\": \"powerquery\",\n    \"name\": \"PowerQuery\",\n    \"import\": (() => import('@shikijs/langs/powerquery'))\n  },\n  {\n    \"id\": \"powershell\",\n    \"name\": \"PowerShell\",\n    \"aliases\": [\n      \"ps\",\n      \"ps1\"\n    ],\n    \"import\": (() => import('@shikijs/langs/powershell'))\n  },\n  {\n    \"id\": \"prisma\",\n    \"name\": \"Prisma\",\n    \"import\": (() => import('@shikijs/langs/prisma'))\n  },\n  {\n    \"id\": \"prolog\",\n    \"name\": \"Prolog\",\n    \"import\": (() => import('@shikijs/langs/prolog'))\n  },\n  {\n    \"id\": \"proto\",\n    \"name\": \"Protocol Buffer 3\",\n    \"aliases\": [\n      \"protobuf\"\n    ],\n    \"import\": (() => import('@shikijs/langs/proto'))\n  },\n  {\n    \"id\": \"pug\",\n    \"name\": \"Pug\",\n    \"aliases\": [\n      \"jade\"\n    ],\n    \"import\": (() => import('@shikijs/langs/pug'))\n  },\n  {\n    \"id\": \"puppet\",\n    \"name\": \"Puppet\",\n    \"import\": (() => import('@shikijs/langs/puppet'))\n  },\n  {\n    \"id\": \"purescript\",\n    \"name\": \"PureScript\",\n    \"import\": (() => import('@shikijs/langs/purescript'))\n  },\n  {\n    \"id\": \"python\",\n    \"name\": \"Python\",\n    \"aliases\": [\n      \"py\"\n    ],\n    \"import\": (() => import('@shikijs/langs/python'))\n  },\n  {\n    \"id\": \"qml\",\n    \"name\": \"QML\",\n    \"import\": (() => import('@shikijs/langs/qml'))\n  },\n  {\n    \"id\": \"qmldir\",\n    \"name\": \"QML Directory\",\n    \"import\": (() => import('@shikijs/langs/qmldir'))\n  },\n  {\n    \"id\": \"qss\",\n    \"name\": \"Qt Style Sheets\",\n    \"import\": (() => import('@shikijs/langs/qss'))\n  },\n  {\n    \"id\": \"r\",\n    \"name\": \"R\",\n    \"import\": (() => import('@shikijs/langs/r'))\n  },\n  {\n    \"id\": \"racket\",\n    \"name\": \"Racket\",\n    \"import\": (() => import('@shikijs/langs/racket'))\n  },\n  {\n    \"id\": \"raku\",\n    \"name\": \"Raku\",\n    \"aliases\": [\n      \"perl6\"\n    ],\n    \"import\": (() => import('@shikijs/langs/raku'))\n  },\n  {\n    \"id\": \"razor\",\n    \"name\": \"ASP.NET Razor\",\n    \"import\": (() => import('@shikijs/langs/razor'))\n  },\n  {\n    \"id\": \"reg\",\n    \"name\": \"Windows Registry Script\",\n    \"import\": (() => import('@shikijs/langs/reg'))\n  },\n  {\n    \"id\": \"regexp\",\n    \"name\": \"RegExp\",\n    \"aliases\": [\n      \"regex\"\n    ],\n    \"import\": (() => import('@shikijs/langs/regexp'))\n  },\n  {\n    \"id\": \"rel\",\n    \"name\": \"Rel\",\n    \"import\": (() => import('@shikijs/langs/rel'))\n  },\n  {\n    \"id\": \"riscv\",\n    \"name\": \"RISC-V\",\n    \"import\": (() => import('@shikijs/langs/riscv'))\n  },\n  {\n    \"id\": \"rosmsg\",\n    \"name\": \"ROS Interface\",\n    \"import\": (() => import('@shikijs/langs/rosmsg'))\n  },\n  {\n    \"id\": \"rst\",\n    \"name\": \"reStructuredText\",\n    \"import\": (() => import('@shikijs/langs/rst'))\n  },\n  {\n    \"id\": \"ruby\",\n    \"name\": \"Ruby\",\n    \"aliases\": [\n      \"rb\"\n    ],\n    \"import\": (() => import('@shikijs/langs/ruby'))\n  },\n  {\n    \"id\": \"rust\",\n    \"name\": \"Rust\",\n    \"aliases\": [\n      \"rs\"\n    ],\n    \"import\": (() => import('@shikijs/langs/rust'))\n  },\n  {\n    \"id\": \"sas\",\n    \"name\": \"SAS\",\n    \"import\": (() => import('@shikijs/langs/sas'))\n  },\n  {\n    \"id\": \"sass\",\n    \"name\": \"Sass\",\n    \"import\": (() => import('@shikijs/langs/sass'))\n  },\n  {\n    \"id\": \"scala\",\n    \"name\": \"Scala\",\n    \"import\": (() => import('@shikijs/langs/scala'))\n  },\n  {\n    \"id\": \"scheme\",\n    \"name\": \"Scheme\",\n    \"import\": (() => import('@shikijs/langs/scheme'))\n  },\n  {\n    \"id\": \"scss\",\n    \"name\": \"SCSS\",\n    \"import\": (() => import('@shikijs/langs/scss'))\n  },\n  {\n    \"id\": \"sdbl\",\n    \"name\": \"1C (Query)\",\n    \"aliases\": [\n      \"1c-query\"\n    ],\n    \"import\": (() => import('@shikijs/langs/sdbl'))\n  },\n  {\n    \"id\": \"shaderlab\",\n    \"name\": \"ShaderLab\",\n    \"aliases\": [\n      \"shader\"\n    ],\n    \"import\": (() => import('@shikijs/langs/shaderlab'))\n  },\n  {\n    \"id\": \"shellscript\",\n    \"name\": \"Shell\",\n    \"aliases\": [\n      \"bash\",\n      \"sh\",\n      \"shell\",\n      \"zsh\"\n    ],\n    \"import\": (() => import('@shikijs/langs/shellscript'))\n  },\n  {\n    \"id\": \"shellsession\",\n    \"name\": \"Shell Session\",\n    \"aliases\": [\n      \"console\"\n    ],\n    \"import\": (() => import('@shikijs/langs/shellsession'))\n  },\n  {\n    \"id\": \"smalltalk\",\n    \"name\": \"Smalltalk\",\n    \"import\": (() => import('@shikijs/langs/smalltalk'))\n  },\n  {\n    \"id\": \"solidity\",\n    \"name\": \"Solidity\",\n    \"import\": (() => import('@shikijs/langs/solidity'))\n  },\n  {\n    \"id\": \"soy\",\n    \"name\": \"Closure Templates\",\n    \"aliases\": [\n      \"closure-templates\"\n    ],\n    \"import\": (() => import('@shikijs/langs/soy'))\n  },\n  {\n    \"id\": \"sparql\",\n    \"name\": \"SPARQL\",\n    \"import\": (() => import('@shikijs/langs/sparql'))\n  },\n  {\n    \"id\": \"splunk\",\n    \"name\": \"Splunk Query Language\",\n    \"aliases\": [\n      \"spl\"\n    ],\n    \"import\": (() => import('@shikijs/langs/splunk'))\n  },\n  {\n    \"id\": \"sql\",\n    \"name\": \"SQL\",\n    \"import\": (() => import('@shikijs/langs/sql'))\n  },\n  {\n    \"id\": \"ssh-config\",\n    \"name\": \"SSH Config\",\n    \"import\": (() => import('@shikijs/langs/ssh-config'))\n  },\n  {\n    \"id\": \"stata\",\n    \"name\": \"Stata\",\n    \"import\": (() => import('@shikijs/langs/stata'))\n  },\n  {\n    \"id\": \"stylus\",\n    \"name\": \"Stylus\",\n    \"aliases\": [\n      \"styl\"\n    ],\n    \"import\": (() => import('@shikijs/langs/stylus'))\n  },\n  {\n    \"id\": \"svelte\",\n    \"name\": \"Svelte\",\n    \"import\": (() => import('@shikijs/langs/svelte'))\n  },\n  {\n    \"id\": \"swift\",\n    \"name\": \"Swift\",\n    \"import\": (() => import('@shikijs/langs/swift'))\n  },\n  {\n    \"id\": \"system-verilog\",\n    \"name\": \"SystemVerilog\",\n    \"import\": (() => import('@shikijs/langs/system-verilog'))\n  },\n  {\n    \"id\": \"systemd\",\n    \"name\": \"Systemd Units\",\n    \"import\": (() => import('@shikijs/langs/systemd'))\n  },\n  {\n    \"id\": \"talonscript\",\n    \"name\": \"TalonScript\",\n    \"aliases\": [\n      \"talon\"\n    ],\n    \"import\": (() => import('@shikijs/langs/talonscript'))\n  },\n  {\n    \"id\": \"tasl\",\n    \"name\": \"Tasl\",\n    \"import\": (() => import('@shikijs/langs/tasl'))\n  },\n  {\n    \"id\": \"tcl\",\n    \"name\": \"Tcl\",\n    \"import\": (() => import('@shikijs/langs/tcl'))\n  },\n  {\n    \"id\": \"templ\",\n    \"name\": \"Templ\",\n    \"import\": (() => import('@shikijs/langs/templ'))\n  },\n  {\n    \"id\": \"terraform\",\n    \"name\": \"Terraform\",\n    \"aliases\": [\n      \"tf\",\n      \"tfvars\"\n    ],\n    \"import\": (() => import('@shikijs/langs/terraform'))\n  },\n  {\n    \"id\": \"tex\",\n    \"name\": \"TeX\",\n    \"import\": (() => import('@shikijs/langs/tex'))\n  },\n  {\n    \"id\": \"toml\",\n    \"name\": \"TOML\",\n    \"import\": (() => import('@shikijs/langs/toml'))\n  },\n  {\n    \"id\": \"ts-tags\",\n    \"name\": \"TypeScript with Tags\",\n    \"aliases\": [\n      \"lit\"\n    ],\n    \"import\": (() => import('@shikijs/langs/ts-tags'))\n  },\n  {\n    \"id\": \"tsv\",\n    \"name\": \"TSV\",\n    \"import\": (() => import('@shikijs/langs/tsv'))\n  },\n  {\n    \"id\": \"tsx\",\n    \"name\": \"TSX\",\n    \"import\": (() => import('@shikijs/langs/tsx'))\n  },\n  {\n    \"id\": \"turtle\",\n    \"name\": \"Turtle\",\n    \"import\": (() => import('@shikijs/langs/turtle'))\n  },\n  {\n    \"id\": \"twig\",\n    \"name\": \"Twig\",\n    \"import\": (() => import('@shikijs/langs/twig'))\n  },\n  {\n    \"id\": \"typescript\",\n    \"name\": \"TypeScript\",\n    \"aliases\": [\n      \"ts\",\n      \"cts\",\n      \"mts\"\n    ],\n    \"import\": (() => import('@shikijs/langs/typescript'))\n  },\n  {\n    \"id\": \"typespec\",\n    \"name\": \"TypeSpec\",\n    \"aliases\": [\n      \"tsp\"\n    ],\n    \"import\": (() => import('@shikijs/langs/typespec'))\n  },\n  {\n    \"id\": \"typst\",\n    \"name\": \"Typst\",\n    \"aliases\": [\n      \"typ\"\n    ],\n    \"import\": (() => import('@shikijs/langs/typst'))\n  },\n  {\n    \"id\": \"v\",\n    \"name\": \"V\",\n    \"import\": (() => import('@shikijs/langs/v'))\n  },\n  {\n    \"id\": \"vala\",\n    \"name\": \"Vala\",\n    \"import\": (() => import('@shikijs/langs/vala'))\n  },\n  {\n    \"id\": \"vb\",\n    \"name\": \"Visual Basic\",\n    \"aliases\": [\n      \"cmd\"\n    ],\n    \"import\": (() => import('@shikijs/langs/vb'))\n  },\n  {\n    \"id\": \"verilog\",\n    \"name\": \"Verilog\",\n    \"import\": (() => import('@shikijs/langs/verilog'))\n  },\n  {\n    \"id\": \"vhdl\",\n    \"name\": \"VHDL\",\n    \"import\": (() => import('@shikijs/langs/vhdl'))\n  },\n  {\n    \"id\": \"viml\",\n    \"name\": \"Vim Script\",\n    \"aliases\": [\n      \"vim\",\n      \"vimscript\"\n    ],\n    \"import\": (() => import('@shikijs/langs/viml'))\n  },\n  {\n    \"id\": \"vue\",\n    \"name\": \"Vue\",\n    \"import\": (() => import('@shikijs/langs/vue'))\n  },\n  {\n    \"id\": \"vue-html\",\n    \"name\": \"Vue HTML\",\n    \"import\": (() => import('@shikijs/langs/vue-html'))\n  },\n  {\n    \"id\": \"vue-vine\",\n    \"name\": \"Vue Vine\",\n    \"import\": (() => import('@shikijs/langs/vue-vine'))\n  },\n  {\n    \"id\": \"vyper\",\n    \"name\": \"Vyper\",\n    \"aliases\": [\n      \"vy\"\n    ],\n    \"import\": (() => import('@shikijs/langs/vyper'))\n  },\n  {\n    \"id\": \"wasm\",\n    \"name\": \"WebAssembly\",\n    \"import\": (() => import('@shikijs/langs/wasm'))\n  },\n  {\n    \"id\": \"wenyan\",\n    \"name\": \"Wenyan\",\n    \"aliases\": [\n      \"\\u6587\\u8A00\"\n    ],\n    \"import\": (() => import('@shikijs/langs/wenyan'))\n  },\n  {\n    \"id\": \"wgsl\",\n    \"name\": \"WGSL\",\n    \"import\": (() => import('@shikijs/langs/wgsl'))\n  },\n  {\n    \"id\": \"wikitext\",\n    \"name\": \"Wikitext\",\n    \"aliases\": [\n      \"mediawiki\",\n      \"wiki\"\n    ],\n    \"import\": (() => import('@shikijs/langs/wikitext'))\n  },\n  {\n    \"id\": \"wit\",\n    \"name\": \"WebAssembly Interface Types\",\n    \"import\": (() => import('@shikijs/langs/wit'))\n  },\n  {\n    \"id\": \"wolfram\",\n    \"name\": \"Wolfram\",\n    \"aliases\": [\n      \"wl\"\n    ],\n    \"import\": (() => import('@shikijs/langs/wolfram'))\n  },\n  {\n    \"id\": \"xml\",\n    \"name\": \"XML\",\n    \"import\": (() => import('@shikijs/langs/xml'))\n  },\n  {\n    \"id\": \"xsl\",\n    \"name\": \"XSL\",\n    \"import\": (() => import('@shikijs/langs/xsl'))\n  },\n  {\n    \"id\": \"yaml\",\n    \"name\": \"YAML\",\n    \"aliases\": [\n      \"yml\"\n    ],\n    \"import\": (() => import('@shikijs/langs/yaml'))\n  },\n  {\n    \"id\": \"zenscript\",\n    \"name\": \"ZenScript\",\n    \"import\": (() => import('@shikijs/langs/zenscript'))\n  },\n  {\n    \"id\": \"zig\",\n    \"name\": \"Zig\",\n    \"import\": (() => import('@shikijs/langs/zig'))\n  }\n];\nconst bundledLanguagesBase = Object.fromEntries(bundledLanguagesInfo.map((i) => [i.id, i.import]));\nconst bundledLanguagesAlias = Object.fromEntries(bundledLanguagesInfo.flatMap((i) => i.aliases?.map((a) => [a, i.import]) || []));\nconst bundledLanguages = {\n  ...bundledLanguagesBase,\n  ...bundledLanguagesAlias\n};\n\nexport { bundledLanguages, bundledLanguagesAlias, bundledLanguagesBase, bundledLanguagesInfo };\n", "const bundledThemesInfo = [\n  {\n    \"id\": \"andromeeda\",\n    \"displayName\": \"Andromeeda\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/andromeeda'))\n  },\n  {\n    \"id\": \"aurora-x\",\n    \"displayName\": \"Aurora X\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/aurora-x'))\n  },\n  {\n    \"id\": \"ayu-dark\",\n    \"displayName\": \"Ayu Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/ayu-dark'))\n  },\n  {\n    \"id\": \"catppuccin-frappe\",\n    \"displayName\": \"Catppuccin Frapp\\xE9\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/catppuccin-frappe'))\n  },\n  {\n    \"id\": \"catppuccin-latte\",\n    \"displayName\": \"Catppuccin Latte\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/catppuccin-latte'))\n  },\n  {\n    \"id\": \"catppuccin-macchiato\",\n    \"displayName\": \"Catppuccin Macchiato\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/catppuccin-macchiato'))\n  },\n  {\n    \"id\": \"catppuccin-mocha\",\n    \"displayName\": \"Catppuccin Mocha\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/catppuccin-mocha'))\n  },\n  {\n    \"id\": \"dark-plus\",\n    \"displayName\": \"Dark Plus\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/dark-plus'))\n  },\n  {\n    \"id\": \"dracula\",\n    \"displayName\": \"Dracula Theme\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/dracula'))\n  },\n  {\n    \"id\": \"dracula-soft\",\n    \"displayName\": \"Dracula Theme Soft\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/dracula-soft'))\n  },\n  {\n    \"id\": \"everforest-dark\",\n    \"displayName\": \"Everforest Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/everforest-dark'))\n  },\n  {\n    \"id\": \"everforest-light\",\n    \"displayName\": \"Everforest Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/everforest-light'))\n  },\n  {\n    \"id\": \"github-dark\",\n    \"displayName\": \"GitHub Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/github-dark'))\n  },\n  {\n    \"id\": \"github-dark-default\",\n    \"displayName\": \"GitHub Dark Default\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/github-dark-default'))\n  },\n  {\n    \"id\": \"github-dark-dimmed\",\n    \"displayName\": \"GitHub Dark Dimmed\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/github-dark-dimmed'))\n  },\n  {\n    \"id\": \"github-dark-high-contrast\",\n    \"displayName\": \"GitHub Dark High Contrast\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/github-dark-high-contrast'))\n  },\n  {\n    \"id\": \"github-light\",\n    \"displayName\": \"GitHub Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/github-light'))\n  },\n  {\n    \"id\": \"github-light-default\",\n    \"displayName\": \"GitHub Light Default\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/github-light-default'))\n  },\n  {\n    \"id\": \"github-light-high-contrast\",\n    \"displayName\": \"GitHub Light High Contrast\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/github-light-high-contrast'))\n  },\n  {\n    \"id\": \"gruvbox-dark-hard\",\n    \"displayName\": \"Gruvbox Dark Hard\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/gruvbox-dark-hard'))\n  },\n  {\n    \"id\": \"gruvbox-dark-medium\",\n    \"displayName\": \"Gruvbox Dark Medium\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/gruvbox-dark-medium'))\n  },\n  {\n    \"id\": \"gruvbox-dark-soft\",\n    \"displayName\": \"Gruvbox Dark Soft\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/gruvbox-dark-soft'))\n  },\n  {\n    \"id\": \"gruvbox-light-hard\",\n    \"displayName\": \"Gruvbox Light Hard\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/gruvbox-light-hard'))\n  },\n  {\n    \"id\": \"gruvbox-light-medium\",\n    \"displayName\": \"Gruvbox Light Medium\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/gruvbox-light-medium'))\n  },\n  {\n    \"id\": \"gruvbox-light-soft\",\n    \"displayName\": \"Gruvbox Light Soft\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/gruvbox-light-soft'))\n  },\n  {\n    \"id\": \"houston\",\n    \"displayName\": \"Houston\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/houston'))\n  },\n  {\n    \"id\": \"kanagawa-dragon\",\n    \"displayName\": \"Kanagawa Dragon\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/kanagawa-dragon'))\n  },\n  {\n    \"id\": \"kanagawa-lotus\",\n    \"displayName\": \"Kanagawa Lotus\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/kanagawa-lotus'))\n  },\n  {\n    \"id\": \"kanagawa-wave\",\n    \"displayName\": \"Kanagawa Wave\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/kanagawa-wave'))\n  },\n  {\n    \"id\": \"laserwave\",\n    \"displayName\": \"LaserWave\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/laserwave'))\n  },\n  {\n    \"id\": \"light-plus\",\n    \"displayName\": \"Light Plus\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/light-plus'))\n  },\n  {\n    \"id\": \"material-theme\",\n    \"displayName\": \"Material Theme\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/material-theme'))\n  },\n  {\n    \"id\": \"material-theme-darker\",\n    \"displayName\": \"Material Theme Darker\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/material-theme-darker'))\n  },\n  {\n    \"id\": \"material-theme-lighter\",\n    \"displayName\": \"Material Theme Lighter\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/material-theme-lighter'))\n  },\n  {\n    \"id\": \"material-theme-ocean\",\n    \"displayName\": \"Material Theme Ocean\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/material-theme-ocean'))\n  },\n  {\n    \"id\": \"material-theme-palenight\",\n    \"displayName\": \"Material Theme Palenight\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/material-theme-palenight'))\n  },\n  {\n    \"id\": \"min-dark\",\n    \"displayName\": \"Min Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/min-dark'))\n  },\n  {\n    \"id\": \"min-light\",\n    \"displayName\": \"Min Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/min-light'))\n  },\n  {\n    \"id\": \"monokai\",\n    \"displayName\": \"Monokai\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/monokai'))\n  },\n  {\n    \"id\": \"night-owl\",\n    \"displayName\": \"Night Owl\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/night-owl'))\n  },\n  {\n    \"id\": \"nord\",\n    \"displayName\": \"Nord\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/nord'))\n  },\n  {\n    \"id\": \"one-dark-pro\",\n    \"displayName\": \"One Dark Pro\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/one-dark-pro'))\n  },\n  {\n    \"id\": \"one-light\",\n    \"displayName\": \"One Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/one-light'))\n  },\n  {\n    \"id\": \"plastic\",\n    \"displayName\": \"Plastic\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/plastic'))\n  },\n  {\n    \"id\": \"poimandres\",\n    \"displayName\": \"Poimandres\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/poimandres'))\n  },\n  {\n    \"id\": \"red\",\n    \"displayName\": \"Red\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/red'))\n  },\n  {\n    \"id\": \"rose-pine\",\n    \"displayName\": \"Ros\\xE9 Pine\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/rose-pine'))\n  },\n  {\n    \"id\": \"rose-pine-dawn\",\n    \"displayName\": \"Ros\\xE9 Pine Dawn\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/rose-pine-dawn'))\n  },\n  {\n    \"id\": \"rose-pine-moon\",\n    \"displayName\": \"Ros\\xE9 Pine Moon\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/rose-pine-moon'))\n  },\n  {\n    \"id\": \"slack-dark\",\n    \"displayName\": \"Slack Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/slack-dark'))\n  },\n  {\n    \"id\": \"slack-ochin\",\n    \"displayName\": \"Slack Ochin\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/slack-ochin'))\n  },\n  {\n    \"id\": \"snazzy-light\",\n    \"displayName\": \"Snazzy Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/snazzy-light'))\n  },\n  {\n    \"id\": \"solarized-dark\",\n    \"displayName\": \"Solarized Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/solarized-dark'))\n  },\n  {\n    \"id\": \"solarized-light\",\n    \"displayName\": \"Solarized Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/solarized-light'))\n  },\n  {\n    \"id\": \"synthwave-84\",\n    \"displayName\": \"Synthwave '84\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/synthwave-84'))\n  },\n  {\n    \"id\": \"tokyo-night\",\n    \"displayName\": \"Tokyo Night\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/tokyo-night'))\n  },\n  {\n    \"id\": \"vesper\",\n    \"displayName\": \"Vesper\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/vesper'))\n  },\n  {\n    \"id\": \"vitesse-black\",\n    \"displayName\": \"Vitesse Black\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/vitesse-black'))\n  },\n  {\n    \"id\": \"vitesse-dark\",\n    \"displayName\": \"Vitesse Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/vitesse-dark'))\n  },\n  {\n    \"id\": \"vitesse-light\",\n    \"displayName\": \"Vitesse Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/vitesse-light'))\n  }\n];\nconst bundledThemes = Object.fromEntries(bundledThemesInfo.map((i) => [i.id, i.import]));\n\nexport { bundledThemes, bundledThemesInfo };\n", "class ShikiError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = \"ShikiError\";\n  }\n}\n\nfunction getHeapMax() {\n  return 2147483648;\n}\nfunction _emscripten_get_now() {\n  return typeof performance !== \"undefined\" ? performance.now() : Date.now();\n}\nconst alignUp = (x, multiple) => x + (multiple - x % multiple) % multiple;\nasync function main(init) {\n  let wasmMemory;\n  let buffer;\n  const binding = {};\n  function updateGlobalBufferAndViews(buf) {\n    buffer = buf;\n    binding.HEAPU8 = new Uint8Array(buf);\n    binding.HEAPU32 = new Uint32Array(buf);\n  }\n  function _emscripten_memcpy_big(dest, src, num) {\n    binding.HEAPU8.copyWithin(dest, src, src + num);\n  }\n  function emscripten_realloc_buffer(size) {\n    try {\n      wasmMemory.grow(size - buffer.byteLength + 65535 >>> 16);\n      updateGlobalBufferAndViews(wasmMemory.buffer);\n      return 1;\n    } catch {\n    }\n  }\n  function _emscripten_resize_heap(requestedSize) {\n    const oldSize = binding.HEAPU8.length;\n    requestedSize = requestedSize >>> 0;\n    const maxHeapSize = getHeapMax();\n    if (requestedSize > maxHeapSize)\n      return false;\n    for (let cutDown = 1; cutDown <= 4; cutDown *= 2) {\n      let overGrownHeapSize = oldSize * (1 + 0.2 / cutDown);\n      overGrownHeapSize = Math.min(overGrownHeapSize, requestedSize + 100663296);\n      const newSize = Math.min(maxHeapSize, alignUp(Math.max(requestedSize, overGrownHeapSize), 65536));\n      const replacement = emscripten_realloc_buffer(newSize);\n      if (replacement)\n        return true;\n    }\n    return false;\n  }\n  const UTF8Decoder = typeof TextDecoder != \"undefined\" ? new TextDecoder(\"utf8\") : void 0;\n  function UTF8ArrayToString(heapOrArray, idx, maxBytesToRead = 1024) {\n    const endIdx = idx + maxBytesToRead;\n    let endPtr = idx;\n    while (heapOrArray[endPtr] && !(endPtr >= endIdx)) ++endPtr;\n    if (endPtr - idx > 16 && heapOrArray.buffer && UTF8Decoder) {\n      return UTF8Decoder.decode(heapOrArray.subarray(idx, endPtr));\n    }\n    let str = \"\";\n    while (idx < endPtr) {\n      let u0 = heapOrArray[idx++];\n      if (!(u0 & 128)) {\n        str += String.fromCharCode(u0);\n        continue;\n      }\n      const u1 = heapOrArray[idx++] & 63;\n      if ((u0 & 224) === 192) {\n        str += String.fromCharCode((u0 & 31) << 6 | u1);\n        continue;\n      }\n      const u2 = heapOrArray[idx++] & 63;\n      if ((u0 & 240) === 224) {\n        u0 = (u0 & 15) << 12 | u1 << 6 | u2;\n      } else {\n        u0 = (u0 & 7) << 18 | u1 << 12 | u2 << 6 | heapOrArray[idx++] & 63;\n      }\n      if (u0 < 65536) {\n        str += String.fromCharCode(u0);\n      } else {\n        const ch = u0 - 65536;\n        str += String.fromCharCode(55296 | ch >> 10, 56320 | ch & 1023);\n      }\n    }\n    return str;\n  }\n  function UTF8ToString(ptr, maxBytesToRead) {\n    return ptr ? UTF8ArrayToString(binding.HEAPU8, ptr, maxBytesToRead) : \"\";\n  }\n  const asmLibraryArg = {\n    emscripten_get_now: _emscripten_get_now,\n    emscripten_memcpy_big: _emscripten_memcpy_big,\n    emscripten_resize_heap: _emscripten_resize_heap,\n    fd_write: () => 0\n  };\n  async function createWasm() {\n    const info = {\n      env: asmLibraryArg,\n      wasi_snapshot_preview1: asmLibraryArg\n    };\n    const exports = await init(info);\n    wasmMemory = exports.memory;\n    updateGlobalBufferAndViews(wasmMemory.buffer);\n    Object.assign(binding, exports);\n    binding.UTF8ToString = UTF8ToString;\n  }\n  await createWasm();\n  return binding;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nlet onigBinding = null;\nfunction throwLastOnigError(onigBinding2) {\n  throw new ShikiError(onigBinding2.UTF8ToString(onigBinding2.getLastOnigError()));\n}\nclass UtfString {\n  constructor(str) {\n    __publicField(this, \"utf16Length\");\n    __publicField(this, \"utf8Length\");\n    __publicField(this, \"utf16Value\");\n    __publicField(this, \"utf8Value\");\n    __publicField(this, \"utf16OffsetToUtf8\");\n    __publicField(this, \"utf8OffsetToUtf16\");\n    const utf16Length = str.length;\n    const utf8Length = UtfString._utf8ByteLength(str);\n    const computeIndicesMapping = utf8Length !== utf16Length;\n    const utf16OffsetToUtf8 = computeIndicesMapping ? new Uint32Array(utf16Length + 1) : null;\n    if (computeIndicesMapping)\n      utf16OffsetToUtf8[utf16Length] = utf8Length;\n    const utf8OffsetToUtf16 = computeIndicesMapping ? new Uint32Array(utf8Length + 1) : null;\n    if (computeIndicesMapping)\n      utf8OffsetToUtf16[utf8Length] = utf16Length;\n    const utf8Value = new Uint8Array(utf8Length);\n    let i8 = 0;\n    for (let i16 = 0; i16 < utf16Length; i16++) {\n      const charCode = str.charCodeAt(i16);\n      let codePoint = charCode;\n      let wasSurrogatePair = false;\n      if (charCode >= 55296 && charCode <= 56319) {\n        if (i16 + 1 < utf16Length) {\n          const nextCharCode = str.charCodeAt(i16 + 1);\n          if (nextCharCode >= 56320 && nextCharCode <= 57343) {\n            codePoint = (charCode - 55296 << 10) + 65536 | nextCharCode - 56320;\n            wasSurrogatePair = true;\n          }\n        }\n      }\n      if (computeIndicesMapping) {\n        utf16OffsetToUtf8[i16] = i8;\n        if (wasSurrogatePair)\n          utf16OffsetToUtf8[i16 + 1] = i8;\n        if (codePoint <= 127) {\n          utf8OffsetToUtf16[i8 + 0] = i16;\n        } else if (codePoint <= 2047) {\n          utf8OffsetToUtf16[i8 + 0] = i16;\n          utf8OffsetToUtf16[i8 + 1] = i16;\n        } else if (codePoint <= 65535) {\n          utf8OffsetToUtf16[i8 + 0] = i16;\n          utf8OffsetToUtf16[i8 + 1] = i16;\n          utf8OffsetToUtf16[i8 + 2] = i16;\n        } else {\n          utf8OffsetToUtf16[i8 + 0] = i16;\n          utf8OffsetToUtf16[i8 + 1] = i16;\n          utf8OffsetToUtf16[i8 + 2] = i16;\n          utf8OffsetToUtf16[i8 + 3] = i16;\n        }\n      }\n      if (codePoint <= 127) {\n        utf8Value[i8++] = codePoint;\n      } else if (codePoint <= 2047) {\n        utf8Value[i8++] = 192 | (codePoint & 1984) >>> 6;\n        utf8Value[i8++] = 128 | (codePoint & 63) >>> 0;\n      } else if (codePoint <= 65535) {\n        utf8Value[i8++] = 224 | (codePoint & 61440) >>> 12;\n        utf8Value[i8++] = 128 | (codePoint & 4032) >>> 6;\n        utf8Value[i8++] = 128 | (codePoint & 63) >>> 0;\n      } else {\n        utf8Value[i8++] = 240 | (codePoint & 1835008) >>> 18;\n        utf8Value[i8++] = 128 | (codePoint & 258048) >>> 12;\n        utf8Value[i8++] = 128 | (codePoint & 4032) >>> 6;\n        utf8Value[i8++] = 128 | (codePoint & 63) >>> 0;\n      }\n      if (wasSurrogatePair)\n        i16++;\n    }\n    this.utf16Length = utf16Length;\n    this.utf8Length = utf8Length;\n    this.utf16Value = str;\n    this.utf8Value = utf8Value;\n    this.utf16OffsetToUtf8 = utf16OffsetToUtf8;\n    this.utf8OffsetToUtf16 = utf8OffsetToUtf16;\n  }\n  static _utf8ByteLength(str) {\n    let result = 0;\n    for (let i = 0, len = str.length; i < len; i++) {\n      const charCode = str.charCodeAt(i);\n      let codepoint = charCode;\n      let wasSurrogatePair = false;\n      if (charCode >= 55296 && charCode <= 56319) {\n        if (i + 1 < len) {\n          const nextCharCode = str.charCodeAt(i + 1);\n          if (nextCharCode >= 56320 && nextCharCode <= 57343) {\n            codepoint = (charCode - 55296 << 10) + 65536 | nextCharCode - 56320;\n            wasSurrogatePair = true;\n          }\n        }\n      }\n      if (codepoint <= 127)\n        result += 1;\n      else if (codepoint <= 2047)\n        result += 2;\n      else if (codepoint <= 65535)\n        result += 3;\n      else\n        result += 4;\n      if (wasSurrogatePair)\n        i++;\n    }\n    return result;\n  }\n  createString(onigBinding2) {\n    const result = onigBinding2.omalloc(this.utf8Length);\n    onigBinding2.HEAPU8.set(this.utf8Value, result);\n    return result;\n  }\n}\nconst _OnigString = class _OnigString {\n  constructor(str) {\n    __publicField(this, \"id\", ++_OnigString.LAST_ID);\n    __publicField(this, \"_onigBinding\");\n    __publicField(this, \"content\");\n    __publicField(this, \"utf16Length\");\n    __publicField(this, \"utf8Length\");\n    __publicField(this, \"utf16OffsetToUtf8\");\n    __publicField(this, \"utf8OffsetToUtf16\");\n    __publicField(this, \"ptr\");\n    if (!onigBinding)\n      throw new ShikiError(\"Must invoke loadWasm first.\");\n    this._onigBinding = onigBinding;\n    this.content = str;\n    const utfString = new UtfString(str);\n    this.utf16Length = utfString.utf16Length;\n    this.utf8Length = utfString.utf8Length;\n    this.utf16OffsetToUtf8 = utfString.utf16OffsetToUtf8;\n    this.utf8OffsetToUtf16 = utfString.utf8OffsetToUtf16;\n    if (this.utf8Length < 1e4 && !_OnigString._sharedPtrInUse) {\n      if (!_OnigString._sharedPtr)\n        _OnigString._sharedPtr = onigBinding.omalloc(1e4);\n      _OnigString._sharedPtrInUse = true;\n      onigBinding.HEAPU8.set(utfString.utf8Value, _OnigString._sharedPtr);\n      this.ptr = _OnigString._sharedPtr;\n    } else {\n      this.ptr = utfString.createString(onigBinding);\n    }\n  }\n  convertUtf8OffsetToUtf16(utf8Offset) {\n    if (this.utf8OffsetToUtf16) {\n      if (utf8Offset < 0)\n        return 0;\n      if (utf8Offset > this.utf8Length)\n        return this.utf16Length;\n      return this.utf8OffsetToUtf16[utf8Offset];\n    }\n    return utf8Offset;\n  }\n  convertUtf16OffsetToUtf8(utf16Offset) {\n    if (this.utf16OffsetToUtf8) {\n      if (utf16Offset < 0)\n        return 0;\n      if (utf16Offset > this.utf16Length)\n        return this.utf8Length;\n      return this.utf16OffsetToUtf8[utf16Offset];\n    }\n    return utf16Offset;\n  }\n  dispose() {\n    if (this.ptr === _OnigString._sharedPtr)\n      _OnigString._sharedPtrInUse = false;\n    else\n      this._onigBinding.ofree(this.ptr);\n  }\n};\n__publicField(_OnigString, \"LAST_ID\", 0);\n__publicField(_OnigString, \"_sharedPtr\", 0);\n// a pointer to a string of 10000 bytes\n__publicField(_OnigString, \"_sharedPtrInUse\", false);\nlet OnigString = _OnigString;\nclass OnigScanner {\n  constructor(patterns) {\n    __publicField(this, \"_onigBinding\");\n    __publicField(this, \"_ptr\");\n    if (!onigBinding)\n      throw new ShikiError(\"Must invoke loadWasm first.\");\n    const strPtrsArr = [];\n    const strLenArr = [];\n    for (let i = 0, len = patterns.length; i < len; i++) {\n      const utfString = new UtfString(patterns[i]);\n      strPtrsArr[i] = utfString.createString(onigBinding);\n      strLenArr[i] = utfString.utf8Length;\n    }\n    const strPtrsPtr = onigBinding.omalloc(4 * patterns.length);\n    onigBinding.HEAPU32.set(strPtrsArr, strPtrsPtr / 4);\n    const strLenPtr = onigBinding.omalloc(4 * patterns.length);\n    onigBinding.HEAPU32.set(strLenArr, strLenPtr / 4);\n    const scannerPtr = onigBinding.createOnigScanner(strPtrsPtr, strLenPtr, patterns.length);\n    for (let i = 0, len = patterns.length; i < len; i++)\n      onigBinding.ofree(strPtrsArr[i]);\n    onigBinding.ofree(strLenPtr);\n    onigBinding.ofree(strPtrsPtr);\n    if (scannerPtr === 0)\n      throwLastOnigError(onigBinding);\n    this._onigBinding = onigBinding;\n    this._ptr = scannerPtr;\n  }\n  dispose() {\n    this._onigBinding.freeOnigScanner(this._ptr);\n  }\n  findNextMatchSync(string, startPosition, arg) {\n    let options = 0 /* None */;\n    if (typeof arg === \"number\") {\n      options = arg;\n    }\n    if (typeof string === \"string\") {\n      string = new OnigString(string);\n      const result = this._findNextMatchSync(string, startPosition, false, options);\n      string.dispose();\n      return result;\n    }\n    return this._findNextMatchSync(string, startPosition, false, options);\n  }\n  _findNextMatchSync(string, startPosition, debugCall, options) {\n    const onigBinding2 = this._onigBinding;\n    const resultPtr = onigBinding2.findNextOnigScannerMatch(this._ptr, string.id, string.ptr, string.utf8Length, string.convertUtf16OffsetToUtf8(startPosition), options);\n    if (resultPtr === 0) {\n      return null;\n    }\n    const HEAPU32 = onigBinding2.HEAPU32;\n    let offset = resultPtr / 4;\n    const index = HEAPU32[offset++];\n    const count = HEAPU32[offset++];\n    const captureIndices = [];\n    for (let i = 0; i < count; i++) {\n      const beg = string.convertUtf8OffsetToUtf16(HEAPU32[offset++]);\n      const end = string.convertUtf8OffsetToUtf16(HEAPU32[offset++]);\n      captureIndices[i] = {\n        start: beg,\n        end,\n        length: end - beg\n      };\n    }\n    return {\n      index,\n      captureIndices\n    };\n  }\n}\nfunction isInstantiatorOptionsObject(dataOrOptions) {\n  return typeof dataOrOptions.instantiator === \"function\";\n}\nfunction isInstantiatorModule(dataOrOptions) {\n  return typeof dataOrOptions.default === \"function\";\n}\nfunction isDataOptionsObject(dataOrOptions) {\n  return typeof dataOrOptions.data !== \"undefined\";\n}\nfunction isResponse(dataOrOptions) {\n  return typeof Response !== \"undefined\" && dataOrOptions instanceof Response;\n}\nfunction isArrayBuffer(data) {\n  return typeof ArrayBuffer !== \"undefined\" && (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) || typeof Buffer !== \"undefined\" && Buffer.isBuffer?.(data) || typeof SharedArrayBuffer !== \"undefined\" && data instanceof SharedArrayBuffer || typeof Uint32Array !== \"undefined\" && data instanceof Uint32Array;\n}\nlet initPromise;\nfunction loadWasm(options) {\n  if (initPromise)\n    return initPromise;\n  async function _load() {\n    onigBinding = await main(async (info) => {\n      let instance = options;\n      instance = await instance;\n      if (typeof instance === \"function\")\n        instance = await instance(info);\n      if (typeof instance === \"function\")\n        instance = await instance(info);\n      if (isInstantiatorOptionsObject(instance)) {\n        instance = await instance.instantiator(info);\n      } else if (isInstantiatorModule(instance)) {\n        instance = await instance.default(info);\n      } else {\n        if (isDataOptionsObject(instance))\n          instance = instance.data;\n        if (isResponse(instance)) {\n          if (typeof WebAssembly.instantiateStreaming === \"function\")\n            instance = await _makeResponseStreamingLoader(instance)(info);\n          else\n            instance = await _makeResponseNonStreamingLoader(instance)(info);\n        } else if (isArrayBuffer(instance)) {\n          instance = await _makeArrayBufferLoader(instance)(info);\n        } else if (instance instanceof WebAssembly.Module) {\n          instance = await _makeArrayBufferLoader(instance)(info);\n        } else if (\"default\" in instance && instance.default instanceof WebAssembly.Module) {\n          instance = await _makeArrayBufferLoader(instance.default)(info);\n        }\n      }\n      if (\"instance\" in instance)\n        instance = instance.instance;\n      if (\"exports\" in instance)\n        instance = instance.exports;\n      return instance;\n    });\n  }\n  initPromise = _load();\n  return initPromise;\n}\nfunction _makeArrayBufferLoader(data) {\n  return (importObject) => WebAssembly.instantiate(data, importObject);\n}\nfunction _makeResponseStreamingLoader(data) {\n  return (importObject) => WebAssembly.instantiateStreaming(data, importObject);\n}\nfunction _makeResponseNonStreamingLoader(data) {\n  return async (importObject) => {\n    const arrayBuffer = await data.arrayBuffer();\n    return WebAssembly.instantiate(arrayBuffer, importObject);\n  };\n}\n\nlet _defaultWasmLoader;\nfunction setDefaultWasmLoader(_loader) {\n  _defaultWasmLoader = _loader;\n}\nfunction getDefaultWasmLoader() {\n  return _defaultWasmLoader;\n}\nasync function createOnigurumaEngine(options) {\n  if (options)\n    await loadWasm(options);\n  return {\n    createScanner(patterns) {\n      return new OnigScanner(patterns.map((p) => typeof p === \"string\" ? p : p.source));\n    },\n    createString(s) {\n      return new OnigString(s);\n    }\n  };\n}\n\nexport { createOnigurumaEngine, getDefaultWasmLoader, loadWasm, setDefaultWasmLoader };\n", "import { createSingletonShorthands, createdBundledHighlighter, guessEmbeddedLanguages } from '@shikijs/core';\nexport * from '@shikijs/core';\nimport { bundledLanguages } from './langs.mjs';\nexport { bundledLanguagesAlias, bundledLanguagesBase, bundledLanguagesInfo } from './langs.mjs';\nimport { bundledThemes } from './themes.mjs';\nexport { bundledThemesInfo } from './themes.mjs';\nimport { createOnigurumaEngine } from '@shikijs/engine-oniguruma';\n\nconst createHighlighter = /* @__PURE__ */ createdBundledHighlighter({\n  langs: bundledLanguages,\n  themes: bundledThemes,\n  engine: () => createOnigurumaEngine(import('shiki/wasm'))\n});\nconst {\n  codeToHtml,\n  codeToHast,\n  codeToTokens,\n  codeToTokensBase,\n  codeToTokensWithThemes,\n  getSingletonHighlighter,\n  getLastGrammarState\n} = /* @__PURE__ */ createSingletonShorthands(\n  createHighlighter,\n  { guessEmbeddedLanguages }\n);\n\nexport { bundledLanguages, bundledThemes, codeToHast, codeToHtml, codeToTokens, codeToTokensBase, codeToTokensWithThemes, createHighlighter, getLastGrammarState, getSingletonHighlighter };\n", "const MAX = 4294967295;\nclass JavaScriptScanner {\n  constructor(patterns, options = {}) {\n    this.patterns = patterns;\n    this.options = options;\n    const {\n      forgiving = false,\n      cache,\n      regexConstructor\n    } = options;\n    if (!regexConstructor) {\n      throw new Error(\"Option `regexConstructor` is not provided\");\n    }\n    this.regexps = patterns.map((p) => {\n      if (typeof p !== \"string\") {\n        return p;\n      }\n      const cached = cache?.get(p);\n      if (cached) {\n        if (cached instanceof RegExp) {\n          return cached;\n        }\n        if (forgiving)\n          return null;\n        throw cached;\n      }\n      try {\n        const regex = regexConstructor(p);\n        cache?.set(p, regex);\n        return regex;\n      } catch (e) {\n        cache?.set(p, e);\n        if (forgiving)\n          return null;\n        throw e;\n      }\n    });\n  }\n  regexps;\n  findNextMatchSync(string, startPosition, _options) {\n    const str = typeof string === \"string\" ? string : string.content;\n    const pending = [];\n    function toResult(index, match, offset = 0) {\n      return {\n        index,\n        captureIndices: match.indices.map((indice) => {\n          if (indice == null) {\n            return {\n              start: MAX,\n              end: MAX,\n              length: 0\n            };\n          }\n          return {\n            start: indice[0] + offset,\n            end: indice[1] + offset,\n            length: indice[1] - indice[0]\n          };\n        })\n      };\n    }\n    for (let i = 0; i < this.regexps.length; i++) {\n      const regexp = this.regexps[i];\n      if (!regexp)\n        continue;\n      try {\n        regexp.lastIndex = startPosition;\n        const match = regexp.exec(str);\n        if (!match)\n          continue;\n        if (match.index === startPosition) {\n          return toResult(i, match, 0);\n        }\n        pending.push([i, match, 0]);\n      } catch (e) {\n        if (this.options.forgiving)\n          continue;\n        throw e;\n      }\n    }\n    if (pending.length) {\n      const minIndex = Math.min(...pending.map((m) => m[1].index));\n      for (const [i, match, offset] of pending) {\n        if (match.index === minIndex) {\n          return toResult(i, match, offset);\n        }\n      }\n    }\n    return null;\n  }\n}\n\nexport { JavaScriptScanner as J };\n", "import { toRegExp } from 'oniguruma-to-es';\nimport { J as JavaScriptScanner } from './shared/engine-javascript.hzpS1_41.mjs';\n\nfunction defaultJavaScriptRegexConstructor(pattern, options) {\n  return toRegExp(\n    pattern,\n    {\n      global: true,\n      hasIndices: true,\n      // This has no benefit for the standard JS engine, but it avoids a perf penalty for\n      // precompiled grammars when constructing extremely long patterns that aren't always used\n      lazyCompileLength: 3e3,\n      rules: {\n        // Needed since TextMate grammars merge backrefs across patterns\n        allowOrphanBackrefs: true,\n        // Improves search performance for generated regexes\n        asciiWordBoundaries: true,\n        // Follow `vscode-oniguruma` which enables this Oniguruma option by default\n        captureGroup: true,\n        // Oniguruma uses depth limit `20`; lowered here to keep regexes shorter and maybe\n        // sometimes faster, but can be increased if issues reported due to low limit\n        recursionLimit: 5,\n        // Oniguruma option for `^`->`\\A`, `$`->`\\Z`; improves search performance without any\n        // change in meaning since TM grammars search line by line\n        singleline: true\n      },\n      ...options\n    }\n  );\n}\nfunction createJavaScriptRegexEngine(options = {}) {\n  const _options = Object.assign(\n    {\n      target: \"auto\",\n      cache: /* @__PURE__ */ new Map()\n    },\n    options\n  );\n  _options.regexConstructor ||= (pattern) => defaultJavaScriptRegexConstructor(pattern, { target: _options.target });\n  return {\n    createScanner(patterns) {\n      return new JavaScriptScanner(patterns, _options);\n    },\n    createString(s) {\n      return {\n        content: s\n      };\n    }\n  };\n}\n\nexport { createJavaScriptRegexEngine, defaultJavaScriptRegexConstructor };\n", "import {\n  createHighlighter,\n  createJavaScriptRegexEngine,\n  createOnigurumaEngine,\n  loadWasm,\n} from 'shiki';\n\nimport type {\n  PJSHighlighter,\n  PJSThemeNames,\n  SupportedLanguages,\n  ThemeRegistrationResolved,\n} from './types';\n\ntype CachedOrLoadingHighlighterType =\n  | Promise<PJSHighlighter>\n  | PJSHighlighter\n  | undefined;\n\nlet highlighter: CachedOrLoadingHighlighterType;\n\nconst loadedThemes = new Map<string, true | Promise<void>>();\nconst loadedLanguages = new Map<SupportedLanguages, true | Promise<void>>();\n\ninterface HighlighterOptions {\n  themes: PJSThemeNames[];\n  langs: SupportedLanguages[];\n  preferWasmHighlighter?: boolean;\n}\n\nexport async function getSharedHighlighter({\n  themes,\n  langs,\n  preferWasmHighlighter = false,\n}: HighlighterOptions): Promise<PJSHighlighter> {\n  if (isHighlighterNull(highlighter)) {\n    // NOTE(amadeus): We should probably build in some logic for rejection\n    // handling...\n    highlighter = new Promise((resolve) => {\n      void (\n        preferWasmHighlighter\n          ? loadWasm(import('shiki/wasm'))\n          : Promise.resolve()\n      )\n        .then(() => {\n          // Since we are loading the languages and themes along with the\n          // highlighter, we can just go ahead and mark them as loaded since\n          // they'll be ready when the highlighter is ready which any calls to\n          // getSharedHighlighter will resolve automatically for us\n          const themesToLoad: (\n            | PJSThemeNames\n            | Promise<ThemeRegistrationResolved>\n          )[] = [];\n          for (const theme of themes) {\n            loadedThemes.set(theme, true);\n            const customTheme = CustomThemes.get(theme);\n            if (customTheme != null) {\n              themesToLoad.push(customTheme());\n            } else {\n              themesToLoad.push(theme);\n            }\n          }\n          for (const language of langs) {\n            loadedLanguages.set(language, true);\n          }\n          loadedLanguages.set('text', true);\n          return createHighlighter({\n            themes: themesToLoad,\n            langs: [...langs, 'text'],\n            engine: preferWasmHighlighter\n              ? createOnigurumaEngine()\n              : createJavaScriptRegexEngine(),\n          }) as Promise<PJSHighlighter>;\n        })\n        .then((instance) => {\n          highlighter = instance;\n          resolve(instance);\n        });\n    });\n    return highlighter;\n  }\n  const instance = isHighlighterLoading(highlighter)\n    ? await highlighter\n    : highlighter;\n  const loaders: Promise<void>[] = [];\n  for (const language of langs) {\n    const loadedOrLoading = loadedLanguages.get(language);\n    // We haven't loaded this language yet, so lets queue it up\n    if (loadedOrLoading == null) {\n      const promise = instance\n        .loadLanguage(language)\n        .then(() => void loadedLanguages.set(language, true));\n      loadedLanguages.set(language, promise);\n      loaders.push(promise);\n    }\n    // We are currently loading the language,\n    // so lets queue the existing promise\n    else if (loadedOrLoading !== true) {\n      loaders.push(loadedOrLoading);\n    }\n  }\n  for (const themeName of themes) {\n    const loadedOrLoading = loadedThemes.get(themeName);\n    // We haven't loaded this theme yet, so lets queue it up\n    if (loadedOrLoading == null) {\n      const customTheme = CustomThemes.get(themeName);\n      const promise = instance\n        .loadTheme(customTheme != null ? customTheme() : themeName)\n        .then(() => void loadedThemes.set(themeName, true));\n      loadedThemes.set(themeName, promise);\n      loaders.push(promise);\n    }\n    // We are currently loading the theme,\n    // so lets queue the existing promise\n    else if (loadedOrLoading !== true) {\n      loaders.push(loadedOrLoading);\n    }\n  }\n  if (loaders.length > 0) {\n    await Promise.all(loaders);\n  }\n  return instance;\n}\n\nexport function hasLoadedThemes(themes: PJSThemeNames[]): boolean {\n  for (const theme of themes) {\n    if (loadedThemes.get(theme) === true) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}\n\nexport function hasLoadedLanguage(lang: SupportedLanguages): boolean {\n  return loadedLanguages.get(lang) === true;\n}\n\nexport function isHighlighterLoaded(\n  h: CachedOrLoadingHighlighterType = highlighter\n): h is PJSHighlighter {\n  return h != null && !('then' in h);\n}\n\nexport function isHighlighterLoading(\n  h: CachedOrLoadingHighlighterType = highlighter\n): h is Promise<PJSHighlighter> {\n  return h != null && 'then' in h;\n}\n\nexport function isHighlighterNull(\n  h: CachedOrLoadingHighlighterType = highlighter\n): h is undefined {\n  return h == null;\n}\n\nexport async function preloadHighlighter(\n  options: HighlighterOptions\n): Promise<void> {\n  return void (await getSharedHighlighter(options));\n}\n\nexport async function disposeHighlighter(): Promise<void> {\n  if (highlighter == null) return;\n  (await highlighter).dispose();\n  loadedThemes.clear();\n  loadedLanguages.clear();\n  highlighter = undefined;\n}\n\nconst CustomThemes = new Map<\n  string,\n  () => Promise<ThemeRegistrationResolved>\n>();\n\nexport function registerCustomTheme(\n  themeName: string,\n  loader: () => Promise<ThemeRegistrationResolved>\n): void {\n  if (CustomThemes.has(themeName)) {\n    console.error(\n      'SharedHighlight.registerCustomTheme: theme name already registered',\n      themeName\n    );\n    return;\n  }\n  CustomThemes.set(themeName, loader);\n}\n\nregisterCustomTheme(\n  'pierre-dark',\n  () =>\n    import(\n      './themes/pierre-dark.json'\n    ) as unknown as Promise<ThemeRegistrationResolved>\n);\n\nregisterCustomTheme(\n  'pierre-light',\n  () =>\n    import(\n      './themes/pierre-light.json'\n    ) as unknown as Promise<ThemeRegistrationResolved>\n);\n", "import type { ThemesType } from './types';\n\n// Misc patch/content parsing regexes\nexport const COMMIT_METADATA_SPLIT: RegExp = /(?=^From [a-f0-9]+ .+$)/m;\nexport const GIT_DIFF_FILE_BREAK_REGEX: RegExp = /(?=^diff --git)/gm;\nexport const UNIFIED_DIFF_FILE_BREAK_REGEX: RegExp = /(?=^---\\s+\\S)/gm;\nexport const FILE_CONTEXT_BLOB: RegExp = /(?=^@@ )/gm;\nexport const HUNK_HEADER: RegExp =\n  /^@@ -(\\d+)(?:,(\\d+))? \\+(\\d+)(?:,(\\d+))? @@(?: (.*))?/m;\nexport const SPLIT_WITH_NEWLINES: RegExp = /(?<=\\n)/;\nexport const FILENAME_HEADER_REGEX: RegExp = /^(---|\\+\\+\\+)\\s+([^\\t\\n]+)/;\nexport const FILENAME_HEADER_REGEX_GIT: RegExp =\n  /^(---|\\+\\+\\+)\\s+[ab]\\/([^\\t\\n]+)/;\nexport const ALTERNATE_FILE_NAMES_GIT: RegExp =\n  /^diff --git (?:\"a\\/(.+?)\"|a\\/(.+?)) (?:\"b\\/(.+?)\"|b\\/(.+?))$/;\nexport const FILE_MODE_FROM_INDEX: RegExp =\n  /^index (?:[0-9a-f]+)\\.\\.(?:[0-9a-f]+)(?: (\\d+))?/;\n\nexport const HEADER_METADATA_SLOT_ID = 'header-metadata';\n\nexport const DEFAULT_THEMES: ThemesType = {\n  dark: 'pierre-dark',\n  light: 'pierre-light',\n};\n", "import type { DiffLineAnnotation, LineAnnotation } from '../types';\n\nexport function getLineAnnotationName<T = undefined>(\n  annotation: LineAnnotation<T> | DiffLineAnnotation<T>\n): string {\n  return `annotation-${'side' in annotation ? `${annotation.side}-` : ''}${annotation.lineNumber}`;\n}\n", "import type { ExtensionFormatMap, SupportedLanguages } from '../types';\n\nexport const EXTENSION_TO_FILE_FORMAT: ExtensionFormatMap = {\n  '1c': '1c',\n  abap: 'abap',\n  as: 'actionscript-3',\n  ada: 'ada',\n  adb: 'ada',\n  ads: 'ada',\n  adoc: 'asciidoc',\n  asciidoc: 'asciidoc',\n  'component.html': 'angular-html',\n  'component.ts': 'angular-ts',\n  conf: 'nginx',\n  htaccess: 'apache',\n  cls: 'tex',\n  trigger: 'apex',\n  apl: 'apl',\n  applescript: 'applescript',\n  scpt: 'applescript',\n  ara: 'ara',\n  asm: 'asm',\n  s: 'riscv',\n  astro: 'astro',\n  awk: 'awk',\n  bal: 'ballerina',\n  sh: 'zsh',\n  bash: 'zsh',\n  bat: 'cmd',\n  cmd: 'cmd',\n  be: 'berry',\n  beancount: 'beancount',\n  bib: 'bibtex',\n  bicep: 'bicep',\n  'blade.php': 'blade',\n  bsl: 'bsl',\n  c: 'c',\n  h: 'objective-cpp',\n  cs: 'csharp',\n  cpp: 'cpp',\n  hpp: 'cpp',\n  cc: 'cpp',\n  cxx: 'cpp',\n  hh: 'cpp',\n  cdc: 'cdc',\n  cairo: 'cairo',\n  clar: 'clarity',\n  clj: 'clojure',\n  cljs: 'clojure',\n  cljc: 'clojure',\n  soy: 'soy',\n  cmake: 'cmake',\n  'CMakeLists.txt': 'cmake',\n  cob: 'cobol',\n  cbl: 'cobol',\n  cobol: 'cobol',\n  CODEOWNERS: 'codeowners',\n  ql: 'ql',\n  coffee: 'coffeescript',\n  lisp: 'lisp',\n  cl: 'lisp',\n  lsp: 'lisp',\n  log: 'log',\n  v: 'verilog',\n  cql: 'cql',\n  cr: 'crystal',\n  css: 'css',\n  csv: 'csv',\n  cue: 'cue',\n  cypher: 'cypher',\n  cyp: 'cypher',\n  d: 'd',\n  dart: 'dart',\n  dax: 'dax',\n  desktop: 'desktop',\n  diff: 'diff',\n  patch: 'diff',\n  Dockerfile: 'dockerfile',\n  dockerfile: 'dockerfile',\n  env: 'dotenv',\n  dm: 'dream-maker',\n  edge: 'edge',\n  el: 'emacs-lisp',\n  ex: 'elixir',\n  exs: 'elixir',\n  elm: 'elm',\n  erb: 'erb',\n  erl: 'erlang',\n  hrl: 'erlang',\n  f: 'fortran-fixed-form',\n  for: 'fortran-fixed-form',\n  fs: 'fsharp',\n  fsi: 'fsharp',\n  fsx: 'fsharp',\n  f03: 'f03',\n  f08: 'f08',\n  f18: 'f18',\n  f77: 'f77',\n  f90: 'fortran-free-form',\n  f95: 'fortran-free-form',\n  fnl: 'fennel',\n  fish: 'fish',\n  ftl: 'ftl',\n  tres: 'gdresource',\n  res: 'gdresource',\n  gd: 'gdscript',\n  gdshader: 'gdshader',\n  gs: 'genie',\n  feature: 'gherkin',\n  COMMIT_EDITMSG: 'git-commit',\n  'git-rebase-todo': 'git-rebase',\n  gjs: 'glimmer-js',\n  gleam: 'gleam',\n  gts: 'glimmer-ts',\n  glsl: 'glsl',\n  vert: 'glsl',\n  frag: 'glsl',\n  shader: 'shaderlab',\n  gp: 'gnuplot',\n  plt: 'gnuplot',\n  gnuplot: 'gnuplot',\n  go: 'go',\n  graphql: 'graphql',\n  gql: 'graphql',\n  groovy: 'groovy',\n  gvy: 'groovy',\n  hack: 'hack',\n  haml: 'haml',\n  hbs: 'handlebars',\n  handlebars: 'handlebars',\n  hs: 'haskell',\n  lhs: 'haskell',\n  hx: 'haxe',\n  hcl: 'hcl',\n  hjson: 'hjson',\n  hlsl: 'hlsl',\n  fx: 'hlsl',\n  html: 'html',\n  htm: 'html',\n  http: 'http',\n  rest: 'http',\n  hxml: 'hxml',\n  hy: 'hy',\n  imba: 'imba',\n  ini: 'ini',\n  cfg: 'ini',\n  jade: 'pug',\n  pug: 'pug',\n  java: 'java',\n  js: 'javascript',\n  mjs: 'javascript',\n  cjs: 'javascript',\n  jinja: 'jinja',\n  jinja2: 'jinja',\n  j2: 'jinja',\n  jison: 'jison',\n  jl: 'julia',\n  json: 'json',\n  json5: 'json5',\n  jsonc: 'jsonc',\n  jsonl: 'jsonl',\n  jsonnet: 'jsonnet',\n  libsonnet: 'jsonnet',\n  jssm: 'jssm',\n  jsx: 'jsx',\n  kt: 'kotlin',\n  kts: 'kts',\n  kql: 'kusto',\n  tex: 'tex',\n  ltx: 'tex',\n  lean: 'lean4',\n  less: 'less',\n  liquid: 'liquid',\n  lit: 'lit',\n  ll: 'llvm',\n  logo: 'logo',\n  lua: 'lua',\n  luau: 'luau',\n  Makefile: 'makefile',\n  mk: 'makefile',\n  makefile: 'makefile',\n  md: 'markdown',\n  markdown: 'markdown',\n  marko: 'marko',\n  m: 'wolfram',\n  mat: 'matlab',\n  mdc: 'mdc',\n  mdx: 'mdx',\n  wiki: 'wikitext',\n  mediawiki: 'wikitext',\n  mmd: 'mermaid',\n  mermaid: 'mermaid',\n  mips: 'mipsasm',\n  mojo: 'mojo',\n  '': 'mojo',\n  move: 'move',\n  nar: 'narrat',\n  nf: 'nextflow',\n  nim: 'nim',\n  nims: 'nim',\n  nimble: 'nim',\n  nix: 'nix',\n  nu: 'nushell',\n  mm: 'objective-cpp',\n  ml: 'ocaml',\n  mli: 'ocaml',\n  mll: 'ocaml',\n  mly: 'ocaml',\n  pas: 'pascal',\n  p: 'pascal',\n  pl: 'prolog',\n  pm: 'perl',\n  t: 'perl',\n  raku: 'raku',\n  p6: 'raku',\n  pl6: 'raku',\n  php: 'php',\n  phtml: 'php',\n  pls: 'plsql',\n  sql: 'sql',\n  po: 'po',\n  polar: 'polar',\n  pcss: 'postcss',\n  pot: 'pot',\n  potx: 'potx',\n  pq: 'powerquery',\n  pqm: 'powerquery',\n  ps1: 'powershell',\n  psm1: 'powershell',\n  psd1: 'powershell',\n  prisma: 'prisma',\n  pro: 'prolog',\n  P: 'prolog',\n  properties: 'properties',\n  proto: 'protobuf',\n  pp: 'puppet',\n  purs: 'purescript',\n  py: 'python',\n  pyw: 'python',\n  pyi: 'python',\n  qml: 'qml',\n  qmldir: 'qmldir',\n  qss: 'qss',\n  r: 'r',\n  R: 'r',\n  rkt: 'racket',\n  rktl: 'racket',\n  razor: 'razor',\n  cshtml: 'razor',\n  rb: 'ruby',\n  rbw: 'ruby',\n  reg: 'reg',\n  regex: 'regexp',\n  rel: 'rel',\n  rs: 'rust',\n  rst: 'rst',\n  rake: 'ruby',\n  gemspec: 'ruby',\n  sas: 'sas',\n  sass: 'sass',\n  scala: 'scala',\n  sc: 'scala',\n  scm: 'scheme',\n  ss: 'scheme',\n  sld: 'scheme',\n  scss: 'scss',\n  sdbl: 'sdbl',\n  shadergraph: 'shader',\n  st: 'smalltalk',\n  sol: 'solidity',\n  sparql: 'sparql',\n  rq: 'sparql',\n  spl: 'splunk',\n  config: 'ssh-config',\n  do: 'stata',\n  ado: 'stata',\n  dta: 'stata',\n  styl: 'stylus',\n  stylus: 'stylus',\n  svelte: 'svelte',\n  swift: 'swift',\n  sv: 'system-verilog',\n  svh: 'system-verilog',\n  service: 'systemd',\n  socket: 'systemd',\n  device: 'systemd',\n  timer: 'systemd',\n  talon: 'talonscript',\n  tasl: 'tasl',\n  tcl: 'tcl',\n  templ: 'templ',\n  tf: 'tf',\n  tfvars: 'tfvars',\n  toml: 'toml',\n  ts: 'typescript',\n  tsp: 'typespec',\n  tsv: 'tsv',\n  tsx: 'tsx',\n  ttl: 'turtle',\n  twig: 'twig',\n  typ: 'typst',\n  vv: 'v',\n  vala: 'vala',\n  vapi: 'vala',\n  vb: 'vb',\n  vbs: 'vb',\n  bas: 'vb',\n  vh: 'verilog',\n  vhd: 'vhdl',\n  vhdl: 'vhdl',\n  vim: 'vimscript',\n  vue: 'vue',\n  'vine.ts': 'vue-vine',\n  vy: 'vyper',\n  wasm: 'wasm',\n  wat: 'wasm',\n  wy: '',\n  wgsl: 'wgsl',\n  wit: 'wit',\n  wl: 'wolfram',\n  nb: 'wolfram',\n  xml: 'xml',\n  xsl: 'xsl',\n  xslt: 'xsl',\n  yaml: 'yaml',\n  yml: 'yml',\n  zs: 'zenscript',\n  zig: 'zig',\n  zsh: 'zsh',\n  sty: 'tex',\n};\n\nexport function getFiletypeFromFileName(fileName: string): SupportedLanguages {\n  // Handle special files without extensions first\n  if (EXTENSION_TO_FILE_FORMAT[fileName] != null) {\n    return EXTENSION_TO_FILE_FORMAT[fileName];\n  }\n\n  // Try compound extensions first (e.g., .blade.php, .component.ts)\n  const compoundMatch = fileName.match(/\\.([^/\\\\]+\\.[^/\\\\]+)$/);\n  if (\n    compoundMatch != null &&\n    EXTENSION_TO_FILE_FORMAT[compoundMatch[1]] != null\n  ) {\n    return EXTENSION_TO_FILE_FORMAT[compoundMatch[1]] ?? 'text';\n  }\n\n  // Fall back to simple extension\n  const simpleMatch = fileName.match(/\\.([^.]+)$/);\n  return EXTENSION_TO_FILE_FORMAT[simpleMatch?.[1] ?? ''] ?? 'text';\n}\n\nexport function extendFileFormatMap(map: ExtensionFormatMap): void {\n  for (const key in map) {\n    EXTENSION_TO_FILE_FORMAT[key] = map[key];\n  }\n}\n", "import type { HunkLineType } from '../types';\n\nexport interface ParseLineTypeReturn {\n  line: string;\n  type: HunkLineType;\n  longLine: boolean;\n}\n\nexport function parseLineType(\n  line: string,\n  maxLineLength: number\n): ParseLineTypeReturn {\n  const firstChar = line.substring(0, 1);\n  if (\n    firstChar !== '+' &&\n    firstChar !== '-' &&\n    firstChar !== ' ' &&\n    firstChar !== '\\\\'\n  ) {\n    throw new Error(\n      `parseLineType: Invalid firstChar: \"${firstChar}\", full line: \"${line}\"`\n    );\n  }\n  return {\n    line: line.substring(1),\n    type:\n      firstChar === ' '\n        ? 'context'\n        : firstChar === '\\\\'\n          ? 'metadata'\n          : firstChar === '+'\n            ? 'addition'\n            : 'deletion',\n    longLine: line.length - 1 >= maxLineLength,\n  };\n}\n", "import type { AnnotationLineMap, AnnotationSpan } from '../types';\nimport { getLineAnnotationName } from './getLineAnnotationName';\n\ninterface CreateMirroredAnnotationSpanProps<LAnnotation> {\n  deletionLineNumber: number;\n  additionLineNumber: number;\n  hunkIndex: number;\n  lineIndex: number;\n  deletionAnnotations: AnnotationLineMap<LAnnotation>;\n  additionAnnotations: AnnotationLineMap<LAnnotation>;\n}\n\nexport function createMirroredAnnotationSpan<LAnnotation>(\n  props: CreateMirroredAnnotationSpanProps<LAnnotation> & { unified: true }\n): AnnotationSpan | undefined;\nexport function createMirroredAnnotationSpan<LAnnotation>(\n  props: CreateMirroredAnnotationSpanProps<LAnnotation> & { unified: false }\n): [AnnotationSpan, AnnotationSpan] | [undefined, undefined];\nexport function createMirroredAnnotationSpan<LAnnotation>({\n  deletionLineNumber,\n  additionLineNumber,\n  hunkIndex,\n  lineIndex,\n  deletionAnnotations,\n  additionAnnotations,\n  unified,\n}: CreateMirroredAnnotationSpanProps<LAnnotation> & { unified: boolean }):\n  | [AnnotationSpan, AnnotationSpan]\n  | [undefined, undefined]\n  | AnnotationSpan\n  | undefined {\n  const dAnnotations: string[] = [];\n  for (const anno of deletionAnnotations[deletionLineNumber] ?? []) {\n    dAnnotations.push(getLineAnnotationName(anno));\n  }\n  const aAnnotations: string[] = [];\n  for (const anno of additionAnnotations[additionLineNumber] ?? []) {\n    (unified ? dAnnotations : aAnnotations).push(getLineAnnotationName(anno));\n  }\n  if (aAnnotations.length === 0 && dAnnotations.length === 0) {\n    if (unified) {\n      return undefined;\n    }\n    return [undefined, undefined];\n  }\n  if (unified) {\n    return {\n      type: 'annotation',\n      hunkIndex,\n      lineIndex,\n      annotations: dAnnotations,\n    };\n  }\n  return [\n    {\n      type: 'annotation',\n      hunkIndex,\n      lineIndex,\n      annotations: dAnnotations,\n    },\n    {\n      type: 'annotation',\n      hunkIndex,\n      lineIndex,\n      annotations: aAnnotations,\n    },\n  ];\n}\n", "import type { AnnotationLineMap, AnnotationSpan } from '../types';\nimport { getLineAnnotationName } from './getLineAnnotationName';\n\ninterface CreateSingleAnnotationProps<LAnnotation> {\n  hunkIndex: number;\n  lineIndex: number;\n  rowNumber: number;\n  annotationMap: AnnotationLineMap<LAnnotation>;\n}\n\nexport function createSingleAnnotationSpan<LAnnotation>({\n  rowNumber,\n  hunkIndex,\n  lineIndex,\n  annotationMap,\n}: CreateSingleAnnotationProps<LAnnotation>): AnnotationSpan | undefined {\n  const span: AnnotationSpan = {\n    type: 'annotation',\n    hunkIndex,\n    lineIndex,\n    annotations: [],\n  };\n  for (const anno of annotationMap[rowNumber] ?? []) {\n    span.annotations.push(getLineAnnotationName(anno));\n  }\n  return span.annotations.length > 0 ? span : undefined;\n}\n", "export function formatCSSVariablePrefix(prefix: string = 'pjs') {\n  return `--${prefix}-`;\n}\n", "import { DEFAULT_THEMES } from 'src/constants';\n\nimport type {\n  PJSHighlighter,\n  PJSThemeNames,\n  ThemeRegistrationResolved,\n  ThemesType,\n} from '../types';\nimport { formatCSSVariablePrefix } from './formatCSSVariablePrefix';\n\ninterface GetHighlighterThemeStylesProps {\n  theme?: PJSThemeNames | ThemesType;\n  highlighter: PJSHighlighter;\n  prefix?: string;\n}\n\n// FIXME(amadeus): We'll probably need to\n// re-think this when it comes to removing inline\n// styles\nexport function getHighlighterThemeStyles({\n  theme = DEFAULT_THEMES,\n  highlighter,\n  prefix,\n}: GetHighlighterThemeStylesProps): string {\n  let styles = '';\n  if (typeof theme === 'string') {\n    const themeData = highlighter.getTheme(theme);\n    styles += `color:${themeData.fg};`;\n    styles += `background-color:${themeData.bg};`;\n    styles += `${formatCSSVariablePrefix(prefix)}fg:${themeData.fg};`;\n    styles += `${formatCSSVariablePrefix(prefix)}bg:${themeData.bg};`;\n    styles += getThemeVariables(themeData, prefix);\n  } else {\n    let themeData = highlighter.getTheme(theme.dark);\n    styles += `${formatCSSVariablePrefix(prefix)}dark:${themeData.fg};`;\n    styles += `${formatCSSVariablePrefix(prefix)}dark-bg:${themeData.bg};`;\n    styles += getThemeVariables(themeData, prefix, 'dark');\n\n    themeData = highlighter.getTheme(theme.light);\n    styles += `${formatCSSVariablePrefix(prefix)}light:${themeData.fg};`;\n    styles += `${formatCSSVariablePrefix(prefix)}light-bg:${themeData.bg};`;\n    styles += getThemeVariables(themeData, prefix, 'light');\n  }\n  return styles;\n}\n\nfunction getThemeVariables(\n  themeData: ThemeRegistrationResolved,\n  prefix?: string,\n  modePrefix?: string\n) {\n  modePrefix = modePrefix != null ? `${modePrefix}-` : '';\n  let styles = '';\n  const additionGreen =\n    themeData.colors?.['gitDecoration.addedResourceForeground'] ??\n    themeData.colors?.['terminal.ansiGreen'];\n  if (additionGreen != null) {\n    styles += `${formatCSSVariablePrefix(prefix)}${modePrefix}addition-color:${additionGreen};`;\n  }\n  const deletionRed =\n    themeData.colors?.['gitDecoration.deletedResourceForeground'] ??\n    themeData.colors?.['terminal.ansiRed'];\n  if (deletionRed != null) {\n    styles += `${formatCSSVariablePrefix(prefix)}${modePrefix}deletion-color:${deletionRed};`;\n  }\n  const modifiedBlue =\n    themeData.colors?.['gitDecoration.modifiedResourceForeground'] ??\n    themeData.colors?.['terminal.ansiBlue'];\n  if (modifiedBlue != null) {\n    styles += `${formatCSSVariablePrefix(prefix)}${modePrefix}modified-color:${modifiedBlue};`;\n  }\n  return styles;\n}\n", "import type { ChangeTypes } from '../types';\n\nexport function getIconForType(type: ChangeTypes | 'file'): string {\n  switch (type) {\n    case 'file':\n      return 'pjs-icon-file-code';\n    case 'change':\n      return 'pjs-icon-symbol-modified';\n    case 'new':\n      return 'pjs-icon-symbol-added';\n    case 'deleted':\n      return 'pjs-icon-symbol-deleted';\n    case 'rename-pure':\n    case 'rename-changed':\n      return 'pjs-icon-symbol-moved';\n  }\n}\n", "import type {\n  Element,\n  ElementContent,\n  Properties,\n  Root,\n  RootContent,\n  Text,\n} from 'hast';\n\nimport { DEFAULT_THEMES, HEADER_METADATA_SLOT_ID } from '../constants';\nimport type {\n  AnnotationSpan,\n  BaseDiffOptions,\n  ChangeTypes,\n  FileContents,\n  FileDiffMetadata,\n  HunkSeparators,\n  PJSHighlighter,\n  PJSThemeNames,\n  SharedRenderState,\n  ThemeTypes,\n  ThemesType,\n} from '../types';\nimport { getHighlighterThemeStyles } from './getHighlighterThemeStyles';\nimport { getIconForType } from './getIconForType';\n\nexport function createTextNode(value: string): Text {\n  return { type: 'text', value };\n}\n\ninterface CreateHastElementProps {\n  tagName:\n    | 'span'\n    | 'div'\n    | 'code'\n    | 'pre'\n    | 'slot'\n    | 'svg'\n    | 'use'\n    | 'style'\n    | 'template';\n  children?: ElementContent[];\n  properties?: Properties;\n}\n\nexport function createHastElement({\n  tagName,\n  children = [],\n  properties = {},\n}: CreateHastElementProps): Element {\n  return {\n    type: 'element',\n    tagName,\n    properties,\n    children,\n  };\n}\n\ninterface CreateSeparatorProps {\n  type: HunkSeparators;\n  content?: string;\n  expandIndex?: number;\n  slotName?: string;\n  isFirstHunk: boolean;\n  isLastHunk: boolean;\n}\n\nexport function createSeparator({\n  type,\n  content,\n  expandIndex,\n  slotName,\n  isFirstHunk,\n  isLastHunk,\n}: CreateSeparatorProps): Element {\n  const children = [];\n  if (type === 'metadata' && content != null) {\n    children.push(\n      createHastElement({\n        tagName: 'div',\n        children: [createTextNode(content)],\n        properties: { 'data-separator-content': '' },\n      })\n    );\n  }\n  if (type === 'line-info' && content != null) {\n    const contentChildren: ElementContent[] = [createTextNode(content)];\n    if (expandIndex != null) {\n      contentChildren.unshift(createIcon({ name: 'pjs-icon-chevrons-narrow' }));\n    }\n    children.push(\n      createHastElement({\n        tagName: 'div',\n        children: contentChildren,\n        properties: { 'data-separator-content': '' },\n      })\n    );\n  }\n  if (type === 'custom' && slotName != null) {\n    children.push(\n      createHastElement({\n        tagName: 'slot',\n        properties: { name: slotName },\n      })\n    );\n  }\n  return createHastElement({\n    tagName: 'div',\n    children,\n    properties: {\n      'data-separator': children.length === 0 ? '' : type,\n      'data-expand-index': expandIndex,\n      'data-separator-first': isFirstHunk ? '' : undefined,\n      'data-separator-last': isLastHunk ? '' : undefined,\n    },\n  });\n}\n\ninterface CreateIconProps {\n  name: string;\n  width?: number;\n  height?: number;\n  properties?: Properties;\n}\n\nexport function createIcon({\n  name,\n  width = 16,\n  height = 16,\n  properties,\n}: CreateIconProps): Element {\n  return createHastElement({\n    tagName: 'svg',\n    properties: { width, height, viewBox: '0 0 16 16', ...properties },\n    children: [\n      createHastElement({\n        tagName: 'use',\n        properties: { href: `#${name.replace(/^#/, '')}` },\n      }),\n    ],\n  });\n}\n\nexport function createAnnotationElement(span: AnnotationSpan): Element {\n  return createHastElement({\n    tagName: 'div',\n    children: [\n      createHastElement({\n        tagName: 'div',\n        children: span.annotations?.map((slotId) =>\n          createHastElement({ tagName: 'slot', properties: { name: slotId } })\n        ),\n        properties: { 'data-annotation-content': '' },\n      }),\n    ],\n    properties: {\n      'data-line-annotation': `${span.hunkIndex},${span.lineIndex}`,\n    },\n  });\n}\n\nexport function createEmptyRowBuffer(size: number): Element {\n  return createHastElement({\n    tagName: 'div',\n    properties: {\n      'data-buffer': '',\n      style: `grid-row: span ${size};min-height:calc(${size} * 1lh)`,\n    },\n  });\n}\n\nexport function findCodeElement(nodes: Root | Element): Element | undefined {\n  let firstChild: RootContent | Element | Root | null = nodes.children[0];\n  while (firstChild != null) {\n    if (firstChild.type === 'element' && firstChild.tagName === 'code') {\n      return firstChild;\n    }\n    if ('children' in firstChild) {\n      firstChild = firstChild.children[0];\n    } else {\n      firstChild = null;\n    }\n  }\n  return undefined;\n}\n\nexport function convertLine(\n  node: Element,\n  line: number,\n  state: SharedRenderState\n): ElementContent {\n  const lineInfo = state.lineInfo[line];\n  if (lineInfo == null) {\n    console.error({ node, line, state });\n    throw new Error(`convertLine: line ${line}, contains no state.lineInfo`);\n  }\n  // We need to convert the current line to a div but keep all the decorations\n  // that may be applied\n  node.tagName = 'span';\n  node.properties['data-column-content'] = '';\n  if (lineInfo.metadataContent != null) {\n    node.children.push(\n      createHastElement({\n        tagName: 'span',\n        children: [createTextNode(lineInfo.metadataContent)],\n        properties: { 'data-no-newline': '' },\n      })\n    );\n  }\n  // NOTE(amadeus): We need to push newline characters into empty rows or else\n  // copy/pasta will have issues\n  else if (node.children.length === 0) {\n    node.children.push(createTextNode('\\n'));\n  }\n  const children = [node];\n  if (!state.disableLineNumbers) {\n    children.unshift(\n      createHastElement({\n        tagName: 'span',\n        children:\n          lineInfo.metadataContent == null\n            ? [{ type: 'text', value: `${lineInfo.lineNumber}` }]\n            : [],\n        properties: { 'data-column-number': '' },\n      })\n    );\n  }\n  return createHastElement({\n    tagName: 'div',\n    children,\n    properties: {\n      'data-line':\n        lineInfo.metadataContent == null ? `${lineInfo.lineNumber}` : '',\n      'data-line-type': lineInfo.type,\n    },\n  });\n}\n\ninterface CreatePreWrapperPropertiesProps\n  extends Pick<\n    BaseDiffOptions,\n    'overflow' | 'themeType' | 'diffIndicators' | 'disableBackground' | 'theme'\n  > {\n  split: boolean;\n  highlighter: PJSHighlighter;\n  totalLines: number;\n}\n\nexport function createPreWrapperProperties({\n  diffIndicators = 'bars',\n  disableBackground = false,\n  highlighter,\n  overflow = 'scroll',\n  split,\n  theme = DEFAULT_THEMES,\n  themeType = 'system',\n  totalLines,\n}: CreatePreWrapperPropertiesProps): Properties {\n  const properties: Properties = {\n    'data-pjs': '',\n    'data-type': split ? 'split' : 'file',\n    'data-overflow': overflow,\n    // NOTE(amadeus): Alex, here we would probably set a class property\n    // instead, when that's working and supported\n    style: getHighlighterThemeStyles({ theme, highlighter }),\n    tabIndex: 0,\n  };\n  properties.style += `--pjs-min-number-column-width-default:${`${totalLines}`.length}ch;`;\n\n  if (typeof theme === 'string' && themeType !== 'system') {\n    properties['data-theme-type'] = themeType;\n  } else if (typeof theme === 'string') {\n    const themeData = highlighter.getTheme(theme);\n    properties['data-theme-type'] = themeData.type;\n  }\n\n  switch (diffIndicators) {\n    case 'bars':\n    case 'classic':\n      properties['data-indicators'] = diffIndicators;\n      break;\n  }\n\n  if (!disableBackground) {\n    properties['data-background'] = '';\n  }\n\n  return properties;\n}\n\ninterface CreateFileHeaderProps {\n  fileOrDiff: FileDiffMetadata | FileContents;\n  theme?: PJSThemeNames | ThemesType;\n  highlighter: PJSHighlighter;\n  prefix?: string;\n  themeType?: ThemeTypes;\n}\n\nexport function createFileHeaderElement({\n  fileOrDiff,\n  theme,\n  highlighter,\n  prefix,\n  themeType = 'system',\n}: CreateFileHeaderProps): Element {\n  const fileDiff = 'type' in fileOrDiff ? fileOrDiff : undefined;\n  const properties: Properties = {\n    'data-pjs-header': '',\n    style: getHighlighterThemeStyles({ theme, highlighter, prefix }),\n  };\n\n  if (fileDiff != null) {\n    properties['data-change-type'] = fileDiff.type;\n  }\n\n  // If a theme is specified, then we should just override the themeType and\n  // ignore whatever might be passed in\n  if (typeof theme === 'string') {\n    const themeData = highlighter.getTheme(theme);\n    properties['data-theme-type'] = themeData.type;\n  } else if (themeType !== 'system') {\n    properties['data-theme-type'] = themeType;\n  }\n\n  return createHastElement({\n    tagName: 'div',\n    children: [\n      createHeaderElement({\n        name: fileOrDiff.name,\n        prevName: 'prevName' in fileOrDiff ? fileOrDiff.prevName : undefined,\n        iconType: fileDiff?.type ?? 'file',\n      }),\n      createMetadataElement(fileDiff),\n    ],\n    properties,\n  });\n}\n\ninterface CreateHeaderElementOptions {\n  name: string;\n  prevName?: string;\n  iconType: ChangeTypes | 'file';\n}\n\nfunction createHeaderElement({\n  name,\n  prevName,\n  iconType,\n}: CreateHeaderElementOptions): Element {\n  const children: ElementContent[] = [\n    createIcon({\n      name: getIconForType(iconType),\n      properties: { 'data-change-icon': iconType },\n    }),\n  ];\n  if (prevName != null) {\n    children.push(\n      createHastElement({\n        tagName: 'div',\n        children: [createTextNode(prevName)],\n        properties: {\n          'data-prev-name': '',\n        },\n      })\n    );\n    children.push(\n      createIcon({\n        name: 'pjs-icon-arrow',\n        properties: {\n          'data-rename-icon': '',\n        },\n      })\n    );\n  }\n  children.push(\n    createHastElement({\n      tagName: 'div',\n      children: [createTextNode(name)],\n      properties: { 'data-title': '' },\n    })\n  );\n  return createHastElement({\n    tagName: 'div',\n    children,\n    properties: { 'data-header-content': '' },\n  });\n}\n\nfunction createMetadataElement(\n  fileDiff: FileDiffMetadata | undefined\n): Element {\n  const children: ElementContent[] = [];\n  if (fileDiff != null) {\n    let additions = 0;\n    let deletions = 0;\n    for (const hunk of fileDiff.hunks) {\n      for (const line of hunk.hunkContent ?? []) {\n        if (line.startsWith('+')) {\n          additions++;\n        } else if (line.startsWith('-')) {\n          deletions++;\n        }\n      }\n    }\n    if (deletions > 0) {\n      children.push(\n        createHastElement({\n          tagName: 'span',\n          children: [createTextNode(`-${deletions}`)],\n          properties: { 'data-deletions-count': '' },\n        })\n      );\n    }\n    if (additions > 0) {\n      children.push(\n        createHastElement({\n          tagName: 'span',\n          children: [createTextNode(`+${additions}`)],\n          properties: { 'data-additions-count': '' },\n        })\n      );\n    }\n    if (deletions === 0 && additions === 0) {\n      children.push(\n        createHastElement({\n          tagName: 'span',\n          children: [createTextNode('No diff')],\n        })\n      );\n    }\n  }\n  children.push(\n    createHastElement({\n      tagName: 'slot',\n      properties: { name: HEADER_METADATA_SLOT_ID },\n    })\n  );\n  return createHastElement({\n    tagName: 'div',\n    children,\n    properties: { 'data-metadata': '' },\n  });\n}\n", "const matchers = [\n  [/^(<!--)(.+)(-->)$/, false],\n  [/^(\\/\\*)(.+)(\\*\\/)$/, false],\n  [/^(\\/\\/|[\"'#]|;{1,2}|%{1,2}|--)(.*)$/, true],\n  /**\n   * for multi-line comments like this\n   */\n  [/^(\\*)(.+)$/, true]\n];\nfunction parseComments(lines, jsx, matchAlgorithm) {\n  const out = [];\n  for (const line of lines) {\n    if (matchAlgorithm === \"v3\") {\n      const splittedElements = line.children.flatMap((element, idx) => {\n        if (element.type !== \"element\")\n          return element;\n        const token = element.children[0];\n        if (token.type !== \"text\")\n          return element;\n        const isLast = idx === line.children.length - 1;\n        const isComment = matchToken(token.value, isLast);\n        if (!isComment)\n          return element;\n        const rawSplits = token.value.split(/(\\s+\\/\\/)/);\n        if (rawSplits.length <= 1)\n          return element;\n        let splits = [rawSplits[0]];\n        for (let i = 1; i < rawSplits.length; i += 2) {\n          splits.push(rawSplits[i] + (rawSplits[i + 1] || \"\"));\n        }\n        splits = splits.filter(Boolean);\n        if (splits.length <= 1)\n          return element;\n        return splits.map((split) => {\n          return {\n            ...element,\n            children: [\n              {\n                type: \"text\",\n                value: split\n              }\n            ]\n          };\n        });\n      });\n      if (splittedElements.length !== line.children.length)\n        line.children = splittedElements;\n    }\n    const elements = line.children;\n    let start = elements.length - 1;\n    if (matchAlgorithm === \"v1\")\n      start = 0;\n    else if (jsx)\n      start = elements.length - 2;\n    for (let i = Math.max(start, 0); i < elements.length; i++) {\n      const token = elements[i];\n      if (token.type !== \"element\")\n        continue;\n      const head = token.children.at(0);\n      if (head?.type !== \"text\")\n        continue;\n      const isLast = i === elements.length - 1;\n      const match = matchToken(head.value, isLast);\n      if (!match)\n        continue;\n      if (jsx && !isLast && i !== 0) {\n        const isJsxStyle = isValue(elements[i - 1], \"{\") && isValue(elements[i + 1], \"}\");\n        out.push({\n          info: match,\n          line,\n          token,\n          isLineCommentOnly: elements.length === 3 && token.children.length === 1,\n          isJsxStyle\n        });\n      } else {\n        out.push({\n          info: match,\n          line,\n          token,\n          isLineCommentOnly: elements.length === 1 && token.children.length === 1,\n          isJsxStyle: false\n        });\n      }\n    }\n  }\n  return out;\n}\nfunction isValue(element, value) {\n  if (element.type !== \"element\")\n    return false;\n  const text = element.children[0];\n  if (text.type !== \"text\")\n    return false;\n  return text.value.trim() === value;\n}\nfunction matchToken(text, isLast) {\n  let trimmed = text.trimStart();\n  const spaceFront = text.length - trimmed.length;\n  trimmed = trimmed.trimEnd();\n  const spaceEnd = text.length - trimmed.length - spaceFront;\n  for (const [matcher, endOfLine] of matchers) {\n    if (endOfLine && !isLast)\n      continue;\n    const result = matcher.exec(trimmed);\n    if (!result)\n      continue;\n    return [\n      \" \".repeat(spaceFront) + result[1],\n      result[2],\n      result[3] ? result[3] + \" \".repeat(spaceEnd) : void 0\n    ];\n  }\n}\nfunction v1ClearEndCommentPrefix(text) {\n  const match = text.match(/(?:\\/\\/|[\"'#]|;{1,2}|%{1,2}|--)(\\s*)$/);\n  if (match && match[1].trim().length === 0) {\n    return text.slice(0, match.index);\n  }\n  return text;\n}\n\nfunction createCommentNotationTransformer(name, regex, onMatch, matchAlgorithm) {\n  if (matchAlgorithm == null) {\n    matchAlgorithm = \"v3\";\n  }\n  return {\n    name,\n    code(code) {\n      const lines = code.children.filter((i) => i.type === \"element\");\n      const linesToRemove = [];\n      code.data ??= {};\n      const data = code.data;\n      data._shiki_notation ??= parseComments(lines, [\"jsx\", \"tsx\"].includes(this.options.lang), matchAlgorithm);\n      const parsed = data._shiki_notation;\n      for (const comment of parsed) {\n        if (comment.info[1].length === 0)\n          continue;\n        let lineIdx = lines.indexOf(comment.line);\n        if (comment.isLineCommentOnly && matchAlgorithm !== \"v1\")\n          lineIdx++;\n        let replaced = false;\n        comment.info[1] = comment.info[1].replace(regex, (...match) => {\n          if (onMatch.call(this, match, comment.line, comment.token, lines, lineIdx)) {\n            replaced = true;\n            return \"\";\n          }\n          return match[0];\n        });\n        if (!replaced)\n          continue;\n        if (matchAlgorithm === \"v1\")\n          comment.info[1] = v1ClearEndCommentPrefix(comment.info[1]);\n        const isEmpty = comment.info[1].trim().length === 0;\n        if (isEmpty)\n          comment.info[1] = \"\";\n        if (isEmpty && comment.isLineCommentOnly) {\n          linesToRemove.push(comment.line);\n        } else if (isEmpty && comment.isJsxStyle) {\n          comment.line.children.splice(comment.line.children.indexOf(comment.token) - 1, 3);\n        } else if (isEmpty) {\n          comment.line.children.splice(comment.line.children.indexOf(comment.token), 1);\n        } else {\n          const head = comment.token.children[0];\n          if (head.type === \"text\") {\n            head.value = comment.info.join(\"\");\n          }\n        }\n      }\n      for (const line of linesToRemove) {\n        const index = code.children.indexOf(line);\n        const nextLine = code.children[index + 1];\n        let removeLength = 1;\n        if (nextLine?.type === \"text\" && nextLine?.value === \"\\n\")\n          removeLength = 2;\n        code.children.splice(index, removeLength);\n      }\n    }\n  };\n}\n\nfunction transformerCompactLineOptions(lineOptions = []) {\n  return {\n    name: \"@shikijs/transformers:compact-line-options\",\n    line(node, line) {\n      const lineOption = lineOptions.find((o) => o.line === line);\n      if (lineOption?.classes)\n        this.addClassToHast(node, lineOption.classes);\n      return node;\n    }\n  };\n}\n\nfunction parseMetaHighlightString(meta) {\n  if (!meta)\n    return null;\n  const match = meta.match(/\\{([\\d,-]+)\\}/);\n  if (!match)\n    return null;\n  const lines = match[1].split(\",\").flatMap((v) => {\n    const num = v.split(\"-\").map((v2) => Number.parseInt(v2, 10));\n    if (num.length === 1)\n      return [num[0]];\n    return Array.from({ length: num[1] - num[0] + 1 }, (_, i) => i + num[0]);\n  });\n  return lines;\n}\nconst symbol = Symbol(\"highlighted-lines\");\nfunction transformerMetaHighlight(options = {}) {\n  const {\n    className = \"highlighted\"\n  } = options;\n  return {\n    name: \"@shikijs/transformers:meta-highlight\",\n    line(node, line) {\n      if (!this.options.meta?.__raw) {\n        return;\n      }\n      const meta = this.meta;\n      meta[symbol] ??= parseMetaHighlightString(this.options.meta.__raw);\n      const lines = meta[symbol] ?? [];\n      if (lines.includes(line))\n        this.addClassToHast(node, className);\n      return node;\n    }\n  };\n}\n\nfunction parseMetaHighlightWords(meta) {\n  if (!meta)\n    return [];\n  const match = Array.from(meta.matchAll(/\\/((?:\\\\.|[^/])+)\\//g));\n  return match.map((v) => v[1].replace(/\\\\(.)/g, \"$1\"));\n}\nfunction transformerMetaWordHighlight(options = {}) {\n  const {\n    className = \"highlighted-word\"\n  } = options;\n  return {\n    name: \"@shikijs/transformers:meta-word-highlight\",\n    preprocess(code, options2) {\n      if (!this.options.meta?.__raw)\n        return;\n      const words = parseMetaHighlightWords(this.options.meta.__raw);\n      options2.decorations ||= [];\n      for (const word of words) {\n        const indexes = findAllSubstringIndexes(code, word);\n        for (const index of indexes) {\n          options2.decorations.push({\n            start: index,\n            end: index + word.length,\n            properties: {\n              class: className\n            }\n          });\n        }\n      }\n    }\n  };\n}\nfunction findAllSubstringIndexes(str, substr) {\n  const indexes = [];\n  let cursor = 0;\n  while (true) {\n    const index = str.indexOf(substr, cursor);\n    if (index === -1 || index >= str.length)\n      break;\n    if (index < cursor)\n      break;\n    indexes.push(index);\n    cursor = index + substr.length;\n  }\n  return indexes;\n}\n\nfunction escapeRegExp(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction transformerNotationMap(options = {}, name = \"@shikijs/transformers:notation-map\") {\n  const {\n    classMap = {},\n    classActivePre = void 0\n  } = options;\n  return createCommentNotationTransformer(\n    name,\n    new RegExp(`\\\\s*\\\\[!code (${Object.keys(classMap).map(escapeRegExp).join(\"|\")})(:\\\\d+)?\\\\]`),\n    function([_, match, range = \":1\"], _line, _comment, lines, index) {\n      const lineNum = Number.parseInt(range.slice(1), 10);\n      for (let i = index; i < Math.min(index + lineNum, lines.length); i++) {\n        this.addClassToHast(lines[i], classMap[match]);\n      }\n      if (classActivePre)\n        this.addClassToHast(this.pre, classActivePre);\n      return true;\n    },\n    options.matchAlgorithm\n  );\n}\n\nfunction transformerNotationDiff(options = {}) {\n  const {\n    classLineAdd = \"diff add\",\n    classLineRemove = \"diff remove\",\n    classActivePre = \"has-diff\"\n  } = options;\n  return transformerNotationMap(\n    {\n      classMap: {\n        \"++\": classLineAdd,\n        \"--\": classLineRemove\n      },\n      classActivePre,\n      matchAlgorithm: options.matchAlgorithm\n    },\n    \"@shikijs/transformers:notation-diff\"\n  );\n}\n\nfunction transformerNotationErrorLevel(options = {}) {\n  const {\n    classMap = {\n      error: [\"highlighted\", \"error\"],\n      warning: [\"highlighted\", \"warning\"]\n    },\n    classActivePre = \"has-highlighted\"\n  } = options;\n  return transformerNotationMap(\n    {\n      classMap,\n      classActivePre,\n      matchAlgorithm: options.matchAlgorithm\n    },\n    \"@shikijs/transformers:notation-error-level\"\n  );\n}\n\nfunction transformerNotationFocus(options = {}) {\n  const {\n    classActiveLine = \"focused\",\n    classActivePre = \"has-focused\"\n  } = options;\n  return transformerNotationMap(\n    {\n      classMap: {\n        focus: classActiveLine\n      },\n      classActivePre,\n      matchAlgorithm: options.matchAlgorithm\n    },\n    \"@shikijs/transformers:notation-focus\"\n  );\n}\n\nfunction transformerNotationHighlight(options = {}) {\n  const {\n    classActiveLine = \"highlighted\",\n    classActivePre = \"has-highlighted\"\n  } = options;\n  return transformerNotationMap(\n    {\n      classMap: {\n        highlight: classActiveLine,\n        hl: classActiveLine\n      },\n      classActivePre,\n      matchAlgorithm: options.matchAlgorithm\n    },\n    \"@shikijs/transformers:notation-highlight\"\n  );\n}\n\nfunction highlightWordInLine(line, ignoredElement, word, className) {\n  const content = getTextContent(line);\n  let index = content.indexOf(word);\n  while (index !== -1) {\n    highlightRange.call(this, line.children, ignoredElement, index, word.length, className);\n    index = content.indexOf(word, index + 1);\n  }\n}\nfunction getTextContent(element) {\n  if (element.type === \"text\")\n    return element.value;\n  if (element.type === \"element\" && element.tagName === \"span\")\n    return element.children.map(getTextContent).join(\"\");\n  return \"\";\n}\nfunction highlightRange(elements, ignoredElement, index, len, className) {\n  let currentIdx = 0;\n  for (let i = 0; i < elements.length; i++) {\n    const element = elements[i];\n    if (element.type !== \"element\" || element.tagName !== \"span\" || element === ignoredElement)\n      continue;\n    const textNode = element.children[0];\n    if (textNode.type !== \"text\")\n      continue;\n    if (hasOverlap([currentIdx, currentIdx + textNode.value.length - 1], [index, index + len])) {\n      const start = Math.max(0, index - currentIdx);\n      const length = len - Math.max(0, currentIdx - index);\n      if (length === 0)\n        continue;\n      const separated = separateToken(element, textNode, start, length);\n      this.addClassToHast(separated[1], className);\n      const output = separated.filter(Boolean);\n      elements.splice(i, 1, ...output);\n      i += output.length - 1;\n    }\n    currentIdx += textNode.value.length;\n  }\n}\nfunction hasOverlap(range1, range2) {\n  return range1[0] <= range2[1] && range1[1] >= range2[0];\n}\nfunction separateToken(span, textNode, index, len) {\n  const text = textNode.value;\n  const createNode = (value) => inheritElement(span, {\n    children: [\n      {\n        type: \"text\",\n        value\n      }\n    ]\n  });\n  return [\n    index > 0 ? createNode(text.slice(0, index)) : void 0,\n    createNode(text.slice(index, index + len)),\n    index + len < text.length ? createNode(text.slice(index + len)) : void 0\n  ];\n}\nfunction inheritElement(original, overrides) {\n  return {\n    ...original,\n    properties: {\n      ...original.properties\n    },\n    ...overrides\n  };\n}\n\nfunction transformerNotationWordHighlight(options = {}) {\n  const {\n    classActiveWord = \"highlighted-word\",\n    classActivePre = void 0\n  } = options;\n  return createCommentNotationTransformer(\n    \"@shikijs/transformers:notation-highlight-word\",\n    /\\s*\\[!code word:((?:\\\\.|[^:\\]])+)(:\\d+)?\\]/,\n    function([_, word, range], _line, comment, lines, index) {\n      const lineNum = range ? Number.parseInt(range.slice(1), 10) : lines.length;\n      word = word.replace(/\\\\(.)/g, \"$1\");\n      for (let i = index; i < Math.min(index + lineNum, lines.length); i++) {\n        highlightWordInLine.call(this, lines[i], comment, word, classActiveWord);\n      }\n      if (classActivePre)\n        this.addClassToHast(this.pre, classActivePre);\n      return true;\n    },\n    options.matchAlgorithm\n  );\n}\n\nfunction transformerRemoveLineBreak() {\n  return {\n    name: \"@shikijs/transformers:remove-line-break\",\n    code(code) {\n      code.children = code.children.filter((line) => !(line.type === \"text\" && line.value === \"\\n\"));\n    }\n  };\n}\n\nfunction transformerRemoveNotationEscape() {\n  return {\n    name: \"@shikijs/transformers:remove-notation-escape\",\n    code(hast) {\n      function replace(node) {\n        if (node.type === \"text\") {\n          node.value = node.value.replace(\"[\\\\!code\", \"[!code\");\n        } else if (\"children\" in node) {\n          for (const child of node.children) {\n            replace(child);\n          }\n        }\n      }\n      replace(hast);\n      return hast;\n    }\n  };\n}\n\nfunction transformerRenderIndentGuides(options = {}) {\n  return {\n    name: \"@shikijs/transformers:render-indent-guides\",\n    code(hast) {\n      let { indent = 2 } = options;\n      const match = this.options.meta?.__raw?.match(/\\{indent:(\\d+|false)\\}/);\n      if (match) {\n        if (match[1] === \"false\") {\n          return hast;\n        }\n        indent = Number(match[1]);\n      }\n      const indentRegex = new RegExp(` {${indent}}| {0,${indent - 1}}\t| {1,}$`, \"g\");\n      const emptyLines = [];\n      let level = 0;\n      for (const line of hast.children) {\n        if (line.type !== \"element\") {\n          continue;\n        }\n        const first = line.children[0];\n        if (first?.type !== \"element\" || first?.children[0]?.type !== \"text\") {\n          emptyLines.push([line, level]);\n          continue;\n        }\n        const text = first.children[0];\n        const blanks = text.value.split(/[^ \\t]/, 1)[0];\n        const ranges = [];\n        for (const match2 of blanks.matchAll(indentRegex)) {\n          const start = match2.index;\n          const end = start + match2[0].length;\n          ranges.push([start, end]);\n        }\n        for (const [line2, level2] of emptyLines) {\n          line2.children.unshift(...Array.from({ length: Math.min(ranges.length, level2 + 1) }, (_, i) => ({\n            type: \"element\",\n            tagName: \"span\",\n            properties: {\n              class: \"indent\",\n              style: `--indent-offset: ${i * indent}ch;`\n            },\n            children: []\n          })));\n        }\n        emptyLines.length = 0;\n        level = ranges.length;\n        if (ranges.length) {\n          line.children.unshift(\n            ...ranges.map(([start, end]) => ({\n              type: \"element\",\n              tagName: \"span\",\n              properties: {\n                class: \"indent\"\n              },\n              children: [{\n                type: \"text\",\n                value: text.value.slice(start, end)\n              }]\n            }))\n          );\n          text.value = text.value.slice(ranges.at(-1)[1]);\n        }\n      }\n      return hast;\n    }\n  };\n}\n\nfunction isTab(part) {\n  return part === \"\t\";\n}\nfunction isSpace(part) {\n  return part === \" \" || part === \"\t\";\n}\nfunction separateContinuousSpaces(inputs) {\n  const result = [];\n  let current = \"\";\n  function bump() {\n    if (current.length)\n      result.push(current);\n    current = \"\";\n  }\n  inputs.forEach((part, idx) => {\n    if (isTab(part)) {\n      bump();\n      result.push(part);\n    } else if (isSpace(part) && (isSpace(inputs[idx - 1]) || isSpace(inputs[idx + 1]))) {\n      bump();\n      result.push(part);\n    } else {\n      current += part;\n    }\n  });\n  bump();\n  return result;\n}\nfunction splitSpaces(parts, type, renderContinuousSpaces = true) {\n  if (type === \"all\")\n    return parts;\n  let leftCount = 0;\n  let rightCount = 0;\n  if (type === \"boundary\") {\n    for (let i = 0; i < parts.length; i++) {\n      if (isSpace(parts[i]))\n        leftCount++;\n      else\n        break;\n    }\n  }\n  if (type === \"boundary\" || type === \"trailing\") {\n    for (let i = parts.length - 1; i >= 0; i--) {\n      if (isSpace(parts[i]))\n        rightCount++;\n      else\n        break;\n    }\n  }\n  const middle = parts.slice(leftCount, parts.length - rightCount);\n  return [\n    ...parts.slice(0, leftCount),\n    ...renderContinuousSpaces ? separateContinuousSpaces(middle) : [middle.join(\"\")],\n    ...parts.slice(parts.length - rightCount)\n  ];\n}\n\nfunction transformerRenderWhitespace(options = {}) {\n  const classMap = {\n    \" \": options.classSpace ?? \"space\",\n    \"\t\": options.classTab ?? \"tab\"\n  };\n  const position = options.position ?? \"all\";\n  const keys = Object.keys(classMap);\n  return {\n    name: \"@shikijs/transformers:render-whitespace\",\n    // We use `root` hook here to ensure it runs after all other transformers\n    root(root) {\n      const pre = root.children[0];\n      const code = pre.tagName === \"pre\" ? pre.children[0] : { children: [root] };\n      code.children.forEach(\n        (line) => {\n          if (line.type !== \"element\" && line.type !== \"root\")\n            return;\n          const elements = line.children.filter((token) => token.type === \"element\");\n          const last = elements.length - 1;\n          line.children = line.children.flatMap((token) => {\n            if (token.type !== \"element\")\n              return token;\n            const index = elements.indexOf(token);\n            if (position === \"boundary\" && index !== 0 && index !== last)\n              return token;\n            if (position === \"trailing\" && index !== last)\n              return token;\n            const node = token.children[0];\n            if (node.type !== \"text\" || !node.value)\n              return token;\n            const parts = splitSpaces(\n              node.value.split(/([ \\t])/).filter((i) => i.length),\n              position === \"boundary\" && index === last && last !== 0 ? \"trailing\" : position,\n              position !== \"trailing\"\n            );\n            if (parts.length <= 1)\n              return token;\n            return parts.map((part) => {\n              const clone = {\n                ...token,\n                properties: { ...token.properties }\n              };\n              clone.children = [{ type: \"text\", value: part }];\n              if (keys.includes(part)) {\n                this.addClassToHast(clone, classMap[part]);\n                delete clone.properties.style;\n              }\n              return clone;\n            });\n          });\n        }\n      );\n    }\n  };\n}\n\nfunction transformerStyleToClass(options = {}) {\n  const {\n    classPrefix = \"__shiki_\",\n    classSuffix = \"\",\n    classReplacer = (className) => className\n  } = options;\n  const classToStyle = /* @__PURE__ */ new Map();\n  function stringifyStyle(style) {\n    return Object.entries(style).map(([key, value]) => `${key}:${value}`).join(\";\");\n  }\n  function registerStyle(style) {\n    const str = typeof style === \"string\" ? style : stringifyStyle(style);\n    let className = classPrefix + cyrb53(str) + classSuffix;\n    className = classReplacer(className);\n    if (!classToStyle.has(className)) {\n      classToStyle.set(\n        className,\n        typeof style === \"string\" ? style : { ...style }\n      );\n    }\n    return className;\n  }\n  return {\n    name: \"@shikijs/transformers:style-to-class\",\n    pre(t) {\n      if (!t.properties.style)\n        return;\n      const className = registerStyle(t.properties.style);\n      delete t.properties.style;\n      this.addClassToHast(t, className);\n    },\n    tokens(lines) {\n      for (const line of lines) {\n        for (const token of line) {\n          if (!token.htmlStyle)\n            continue;\n          const className = registerStyle(token.htmlStyle);\n          token.htmlStyle = {};\n          token.htmlAttrs ||= {};\n          if (!token.htmlAttrs.class)\n            token.htmlAttrs.class = className;\n          else\n            token.htmlAttrs.class += ` ${className}`;\n        }\n      }\n    },\n    getClassRegistry() {\n      return classToStyle;\n    },\n    getCSS() {\n      let css = \"\";\n      for (const [className, style] of classToStyle.entries()) {\n        css += `.${className}{${typeof style === \"string\" ? style : stringifyStyle(style)}}`;\n      }\n      return css;\n    },\n    clearRegistry() {\n      classToStyle.clear();\n    }\n  };\n}\nfunction cyrb53(str, seed = 0) {\n  let h1 = 3735928559 ^ seed;\n  let h2 = 1103547991 ^ seed;\n  for (let i = 0, ch; i < str.length; i++) {\n    ch = str.charCodeAt(i);\n    h1 = Math.imul(h1 ^ ch, 2654435761);\n    h2 = Math.imul(h2 ^ ch, 1597334677);\n  }\n  h1 = Math.imul(h1 ^ h1 >>> 16, 2246822507);\n  h1 ^= Math.imul(h2 ^ h2 >>> 13, 3266489909);\n  h2 = Math.imul(h2 ^ h2 >>> 16, 2246822507);\n  h2 ^= Math.imul(h1 ^ h1 >>> 13, 3266489909);\n  return (4294967296 * (2097151 & h2) + (h1 >>> 0)).toString(36).slice(0, 6);\n}\n\nexport { createCommentNotationTransformer, findAllSubstringIndexes, parseMetaHighlightString, parseMetaHighlightWords, transformerCompactLineOptions, transformerMetaHighlight, transformerMetaWordHighlight, transformerNotationDiff, transformerNotationErrorLevel, transformerNotationFocus, transformerNotationHighlight, transformerNotationMap, transformerNotationWordHighlight, transformerRemoveLineBreak, transformerRemoveNotationEscape, transformerRenderIndentGuides, transformerRenderWhitespace, transformerStyleToClass };\n", "import {\n  type ShikiTransformerStyleToClass,\n  transformerStyleToClass,\n} from '@shikijs/transformers';\nimport type { ElementContent } from 'hast';\n\nimport type { SharedRenderState, ShikiTransformer } from '../types';\nimport {\n  convertLine,\n  createAnnotationElement,\n  createEmptyRowBuffer,\n  findCodeElement,\n} from './hast_utils';\n\ninterface CreateTransformerWithStateOptions {\n  disableLineNumbers: boolean;\n  useCSSClasses: boolean;\n}\n\ninterface CreateTransformerWithStateReturn {\n  state: SharedRenderState;\n  transformers: ShikiTransformer[];\n  toClass: ShikiTransformerStyleToClass;\n}\n\nexport function createTransformerWithState({\n  disableLineNumbers,\n  useCSSClasses,\n}: CreateTransformerWithStateOptions): CreateTransformerWithStateReturn {\n  const state: SharedRenderState = {\n    lineInfo: {},\n    decorations: [],\n    disableLineNumbers,\n  };\n  const transformers: ShikiTransformer[] = [\n    {\n      line(node) {\n        // Remove the default class\n        delete node.properties.class;\n        return node;\n      },\n      pre(pre) {\n        // NOTE(amadeus): This kinda sucks -- basically we can't apply our\n        // line node changes until AFTER decorations have been applied\n        const code = findCodeElement(pre);\n        const children: ElementContent[] = [];\n        if (code != null) {\n          let index = 1;\n          for (const node of code.children) {\n            if (node.type !== 'element') {\n              continue;\n            }\n            // Do we need to inject an empty span above the first line line?\n            if (index === 1 && state.lineInfo[0]?.spans != null) {\n              for (const span of state.lineInfo[0]?.spans ?? []) {\n                if (span.type === 'gap') {\n                  children.push(createEmptyRowBuffer(span.rows));\n                } else {\n                  children.push(createAnnotationElement(span));\n                }\n              }\n            }\n            children.push(convertLine(node, index, state));\n            const lineInfo = state.lineInfo[index];\n            if (lineInfo?.spans != null) {\n              for (const span of lineInfo.spans) {\n                if (span.type === 'gap') {\n                  children.push(createEmptyRowBuffer(span.rows));\n                } else {\n                  children.push(createAnnotationElement(span));\n                }\n              }\n            }\n            index++;\n          }\n          code.children = children;\n        }\n        return pre;\n      },\n    },\n  ];\n  if (useCSSClasses) {\n    transformers.push(tokenStyleNormalizer, toClass);\n  }\n  return { state, transformers, toClass };\n}\n\nconst toClass = transformerStyleToClass({ classPrefix: 'hl-' });\n\n// Create a transformer that converts token color/fontStyle to htmlStyle\n// This needs to run BEFORE transformerStyleToClass\nconst tokenStyleNormalizer: ShikiTransformer = {\n  name: 'token-style-normalizer',\n  tokens(lines) {\n    for (const line of lines) {\n      for (const token of line) {\n        // Skip if htmlStyle is already set\n        if (token.htmlStyle != null) continue;\n\n        const style: Record<string, string> = {};\n\n        if (token.color != null) {\n          style.color = token.color;\n        }\n        if (token.bgColor != null) {\n          style['background-color'] = token.bgColor;\n        }\n        if (token.fontStyle != null && token.fontStyle !== 0) {\n          // FontStyle is a bitmask: 1 = italic, 2 = bold, 4 = underline\n          if ((token.fontStyle & 1) !== 0) {\n            style['font-style'] = 'italic';\n          }\n          if ((token.fontStyle & 2) !== 0) {\n            style['font-weight'] = 'bold';\n          }\n          if ((token.fontStyle & 4) !== 0) {\n            style['text-decoration'] = 'underline';\n          }\n        }\n\n        // Only set htmlStyle if we have any styles\n        if (Object.keys(style).length > 0) {\n          token.htmlStyle = style;\n        }\n      }\n    }\n  },\n};\n", "import { DEFAULT_THEMES } from '../constants';\nimport type { PJSThemeNames, ThemesType } from '../types';\n\nexport function getThemes(\n  theme: PJSThemeNames | ThemesType = DEFAULT_THEMES\n): PJSThemeNames[] {\n  const themesArr: PJSThemeNames[] = [];\n  if (typeof theme === 'string') {\n    themesArr.push(theme);\n  } else {\n    themesArr.push(theme.dark);\n    themesArr.push(theme.light);\n  }\n  return themesArr;\n}\n", "import type { PJSThemeNames, SupportedLanguages, ThemesType } from '../types';\nimport { getThemes } from './getThemes';\n\ninterface HighlighterOptionsShape {\n  theme?: PJSThemeNames | ThemesType;\n  preferWasmHighlighter?: boolean;\n}\n\ninterface GetHighlighterOptionsReturn {\n  langs: SupportedLanguages[];\n  themes: PJSThemeNames[];\n  preferWasmHighlighter?: boolean;\n}\n\nexport function getHighlighterOptions(\n  lang: SupportedLanguages | undefined,\n  options: HighlighterOptionsShape\n): GetHighlighterOptionsReturn {\n  return {\n    langs: [lang ?? 'text'],\n    themes: getThemes(options.theme),\n    preferWasmHighlighter: options.preferWasmHighlighter,\n  };\n}\n", "export function getHunkSeparatorSlotName(\n  type: 'unified' | 'additions' | 'deletions',\n  hunkIndex: number\n) {\n  return `hunk-separator-${type}-${hunkIndex}`;\n}\n", "import type { Hunk } from '../types';\n\nexport function getTotalLineCountFromHunks(hunks: Hunk[]): number {\n  const lastHunk = hunks[hunks.length - 1];\n  if (lastHunk == null) {\n    return 0;\n  }\n  return Math.max(\n    lastHunk.additionStart + lastHunk.additionCount,\n    lastHunk.deletedStart + lastHunk.deletedCount\n  );\n}\n", "export default class Diff {\n    diff(oldStr, newStr, \n    // Type below is not accurate/complete - see above for full possibilities - but it compiles\n    options = {}) {\n        let callback;\n        if (typeof options === 'function') {\n            callback = options;\n            options = {};\n        }\n        else if ('callback' in options) {\n            callback = options.callback;\n        }\n        // Allow subclasses to massage the input prior to running\n        const oldString = this.castInput(oldStr, options);\n        const newString = this.castInput(newStr, options);\n        const oldTokens = this.removeEmpty(this.tokenize(oldString, options));\n        const newTokens = this.removeEmpty(this.tokenize(newString, options));\n        return this.diffWithOptionsObj(oldTokens, newTokens, options, callback);\n    }\n    diffWithOptionsObj(oldTokens, newTokens, options, callback) {\n        var _a;\n        const done = (value) => {\n            value = this.postProcess(value, options);\n            if (callback) {\n                setTimeout(function () { callback(value); }, 0);\n                return undefined;\n            }\n            else {\n                return value;\n            }\n        };\n        const newLen = newTokens.length, oldLen = oldTokens.length;\n        let editLength = 1;\n        let maxEditLength = newLen + oldLen;\n        if (options.maxEditLength != null) {\n            maxEditLength = Math.min(maxEditLength, options.maxEditLength);\n        }\n        const maxExecutionTime = (_a = options.timeout) !== null && _a !== void 0 ? _a : Infinity;\n        const abortAfterTimestamp = Date.now() + maxExecutionTime;\n        const bestPath = [{ oldPos: -1, lastComponent: undefined }];\n        // Seed editLength = 0, i.e. the content starts with the same values\n        let newPos = this.extractCommon(bestPath[0], newTokens, oldTokens, 0, options);\n        if (bestPath[0].oldPos + 1 >= oldLen && newPos + 1 >= newLen) {\n            // Identity per the equality and tokenizer\n            return done(this.buildValues(bestPath[0].lastComponent, newTokens, oldTokens));\n        }\n        // Once we hit the right edge of the edit graph on some diagonal k, we can\n        // definitely reach the end of the edit graph in no more than k edits, so\n        // there's no point in considering any moves to diagonal k+1 any more (from\n        // which we're guaranteed to need at least k+1 more edits).\n        // Similarly, once we've reached the bottom of the edit graph, there's no\n        // point considering moves to lower diagonals.\n        // We record this fact by setting minDiagonalToConsider and\n        // maxDiagonalToConsider to some finite value once we've hit the edge of\n        // the edit graph.\n        // This optimization is not faithful to the original algorithm presented in\n        // Myers's paper, which instead pointlessly extends D-paths off the end of\n        // the edit graph - see page 7 of Myers's paper which notes this point\n        // explicitly and illustrates it with a diagram. This has major performance\n        // implications for some common scenarios. For instance, to compute a diff\n        // where the new text simply appends d characters on the end of the\n        // original text of length n, the true Myers algorithm will take O(n+d^2)\n        // time while this optimization needs only O(n+d) time.\n        let minDiagonalToConsider = -Infinity, maxDiagonalToConsider = Infinity;\n        // Main worker method. checks all permutations of a given edit length for acceptance.\n        const execEditLength = () => {\n            for (let diagonalPath = Math.max(minDiagonalToConsider, -editLength); diagonalPath <= Math.min(maxDiagonalToConsider, editLength); diagonalPath += 2) {\n                let basePath;\n                const removePath = bestPath[diagonalPath - 1], addPath = bestPath[diagonalPath + 1];\n                if (removePath) {\n                    // No one else is going to attempt to use this value, clear it\n                    // @ts-expect-error - perf optimisation. This type-violating value will never be read.\n                    bestPath[diagonalPath - 1] = undefined;\n                }\n                let canAdd = false;\n                if (addPath) {\n                    // what newPos will be after we do an insertion:\n                    const addPathNewPos = addPath.oldPos - diagonalPath;\n                    canAdd = addPath && 0 <= addPathNewPos && addPathNewPos < newLen;\n                }\n                const canRemove = removePath && removePath.oldPos + 1 < oldLen;\n                if (!canAdd && !canRemove) {\n                    // If this path is a terminal then prune\n                    // @ts-expect-error - perf optimisation. This type-violating value will never be read.\n                    bestPath[diagonalPath] = undefined;\n                    continue;\n                }\n                // Select the diagonal that we want to branch from. We select the prior\n                // path whose position in the old string is the farthest from the origin\n                // and does not pass the bounds of the diff graph\n                if (!canRemove || (canAdd && removePath.oldPos < addPath.oldPos)) {\n                    basePath = this.addToPath(addPath, true, false, 0, options);\n                }\n                else {\n                    basePath = this.addToPath(removePath, false, true, 1, options);\n                }\n                newPos = this.extractCommon(basePath, newTokens, oldTokens, diagonalPath, options);\n                if (basePath.oldPos + 1 >= oldLen && newPos + 1 >= newLen) {\n                    // If we have hit the end of both strings, then we are done\n                    return done(this.buildValues(basePath.lastComponent, newTokens, oldTokens)) || true;\n                }\n                else {\n                    bestPath[diagonalPath] = basePath;\n                    if (basePath.oldPos + 1 >= oldLen) {\n                        maxDiagonalToConsider = Math.min(maxDiagonalToConsider, diagonalPath - 1);\n                    }\n                    if (newPos + 1 >= newLen) {\n                        minDiagonalToConsider = Math.max(minDiagonalToConsider, diagonalPath + 1);\n                    }\n                }\n            }\n            editLength++;\n        };\n        // Performs the length of edit iteration. Is a bit fugly as this has to support the\n        // sync and async mode which is never fun. Loops over execEditLength until a value\n        // is produced, or until the edit length exceeds options.maxEditLength (if given),\n        // in which case it will return undefined.\n        if (callback) {\n            (function exec() {\n                setTimeout(function () {\n                    if (editLength > maxEditLength || Date.now() > abortAfterTimestamp) {\n                        return callback(undefined);\n                    }\n                    if (!execEditLength()) {\n                        exec();\n                    }\n                }, 0);\n            }());\n        }\n        else {\n            while (editLength <= maxEditLength && Date.now() <= abortAfterTimestamp) {\n                const ret = execEditLength();\n                if (ret) {\n                    return ret;\n                }\n            }\n        }\n    }\n    addToPath(path, added, removed, oldPosInc, options) {\n        const last = path.lastComponent;\n        if (last && !options.oneChangePerToken && last.added === added && last.removed === removed) {\n            return {\n                oldPos: path.oldPos + oldPosInc,\n                lastComponent: { count: last.count + 1, added: added, removed: removed, previousComponent: last.previousComponent }\n            };\n        }\n        else {\n            return {\n                oldPos: path.oldPos + oldPosInc,\n                lastComponent: { count: 1, added: added, removed: removed, previousComponent: last }\n            };\n        }\n    }\n    extractCommon(basePath, newTokens, oldTokens, diagonalPath, options) {\n        const newLen = newTokens.length, oldLen = oldTokens.length;\n        let oldPos = basePath.oldPos, newPos = oldPos - diagonalPath, commonCount = 0;\n        while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(oldTokens[oldPos + 1], newTokens[newPos + 1], options)) {\n            newPos++;\n            oldPos++;\n            commonCount++;\n            if (options.oneChangePerToken) {\n                basePath.lastComponent = { count: 1, previousComponent: basePath.lastComponent, added: false, removed: false };\n            }\n        }\n        if (commonCount && !options.oneChangePerToken) {\n            basePath.lastComponent = { count: commonCount, previousComponent: basePath.lastComponent, added: false, removed: false };\n        }\n        basePath.oldPos = oldPos;\n        return newPos;\n    }\n    equals(left, right, options) {\n        if (options.comparator) {\n            return options.comparator(left, right);\n        }\n        else {\n            return left === right\n                || (!!options.ignoreCase && left.toLowerCase() === right.toLowerCase());\n        }\n    }\n    removeEmpty(array) {\n        const ret = [];\n        for (let i = 0; i < array.length; i++) {\n            if (array[i]) {\n                ret.push(array[i]);\n            }\n        }\n        return ret;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    castInput(value, options) {\n        return value;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    tokenize(value, options) {\n        return Array.from(value);\n    }\n    join(chars) {\n        // Assumes ValueT is string, which is the case for most subclasses.\n        // When it's false, e.g. in diffArrays, this method needs to be overridden (e.g. with a no-op)\n        // Yes, the casts are verbose and ugly, because this pattern - of having the base class SORT OF\n        // assume tokens and values are strings, but not completely - is weird and janky.\n        return chars.join('');\n    }\n    postProcess(changeObjects, \n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    options) {\n        return changeObjects;\n    }\n    get useLongestToken() {\n        return false;\n    }\n    buildValues(lastComponent, newTokens, oldTokens) {\n        // First we convert our linked list of components in reverse order to an\n        // array in the right order:\n        const components = [];\n        let nextComponent;\n        while (lastComponent) {\n            components.push(lastComponent);\n            nextComponent = lastComponent.previousComponent;\n            delete lastComponent.previousComponent;\n            lastComponent = nextComponent;\n        }\n        components.reverse();\n        const componentLen = components.length;\n        let componentPos = 0, newPos = 0, oldPos = 0;\n        for (; componentPos < componentLen; componentPos++) {\n            const component = components[componentPos];\n            if (!component.removed) {\n                if (!component.added && this.useLongestToken) {\n                    let value = newTokens.slice(newPos, newPos + component.count);\n                    value = value.map(function (value, i) {\n                        const oldValue = oldTokens[oldPos + i];\n                        return oldValue.length > value.length ? oldValue : value;\n                    });\n                    component.value = this.join(value);\n                }\n                else {\n                    component.value = this.join(newTokens.slice(newPos, newPos + component.count));\n                }\n                newPos += component.count;\n                // Common case\n                if (!component.added) {\n                    oldPos += component.count;\n                }\n            }\n            else {\n                component.value = this.join(oldTokens.slice(oldPos, oldPos + component.count));\n                oldPos += component.count;\n            }\n        }\n        return components;\n    }\n}\n", "import Diff from './base.js';\nclass CharacterDiff extends Diff {\n}\nexport const characterDiff = new CharacterDiff();\nexport function diffChars(oldStr, newStr, options) {\n    return characterDiff.diff(oldStr, newStr, options);\n}\n", "export function longestCommonPrefix(str1, str2) {\n    let i;\n    for (i = 0; i < str1.length && i < str2.length; i++) {\n        if (str1[i] != str2[i]) {\n            return str1.slice(0, i);\n        }\n    }\n    return str1.slice(0, i);\n}\nexport function longestCommonSuffix(str1, str2) {\n    let i;\n    // Unlike longestCommonPrefix, we need a special case to handle all scenarios\n    // where we return the empty string since str1.slice(-0) will return the\n    // entire string.\n    if (!str1 || !str2 || str1[str1.length - 1] != str2[str2.length - 1]) {\n        return '';\n    }\n    for (i = 0; i < str1.length && i < str2.length; i++) {\n        if (str1[str1.length - (i + 1)] != str2[str2.length - (i + 1)]) {\n            return str1.slice(-i);\n        }\n    }\n    return str1.slice(-i);\n}\nexport function replacePrefix(string, oldPrefix, newPrefix) {\n    if (string.slice(0, oldPrefix.length) != oldPrefix) {\n        throw Error(`string ${JSON.stringify(string)} doesn't start with prefix ${JSON.stringify(oldPrefix)}; this is a bug`);\n    }\n    return newPrefix + string.slice(oldPrefix.length);\n}\nexport function replaceSuffix(string, oldSuffix, newSuffix) {\n    if (!oldSuffix) {\n        return string + newSuffix;\n    }\n    if (string.slice(-oldSuffix.length) != oldSuffix) {\n        throw Error(`string ${JSON.stringify(string)} doesn't end with suffix ${JSON.stringify(oldSuffix)}; this is a bug`);\n    }\n    return string.slice(0, -oldSuffix.length) + newSuffix;\n}\nexport function removePrefix(string, oldPrefix) {\n    return replacePrefix(string, oldPrefix, '');\n}\nexport function removeSuffix(string, oldSuffix) {\n    return replaceSuffix(string, oldSuffix, '');\n}\nexport function maximumOverlap(string1, string2) {\n    return string2.slice(0, overlapCount(string1, string2));\n}\n// Nicked from https://stackoverflow.com/a/60422853/1709587\nfunction overlapCount(a, b) {\n    // Deal with cases where the strings differ in length\n    let startA = 0;\n    if (a.length > b.length) {\n        startA = a.length - b.length;\n    }\n    let endB = b.length;\n    if (a.length < b.length) {\n        endB = a.length;\n    }\n    // Create a back-reference for each index\n    //   that should be followed in case of a mismatch.\n    //   We only need B to make these references:\n    const map = Array(endB);\n    let k = 0; // Index that lags behind j\n    map[0] = 0;\n    for (let j = 1; j < endB; j++) {\n        if (b[j] == b[k]) {\n            map[j] = map[k]; // skip over the same character (optional optimisation)\n        }\n        else {\n            map[j] = k;\n        }\n        while (k > 0 && b[j] != b[k]) {\n            k = map[k];\n        }\n        if (b[j] == b[k]) {\n            k++;\n        }\n    }\n    // Phase 2: use these references while iterating over A\n    k = 0;\n    for (let i = startA; i < a.length; i++) {\n        while (k > 0 && a[i] != b[k]) {\n            k = map[k];\n        }\n        if (a[i] == b[k]) {\n            k++;\n        }\n    }\n    return k;\n}\n/**\n * Returns true if the string consistently uses Windows line endings.\n */\nexport function hasOnlyWinLineEndings(string) {\n    return string.includes('\\r\\n') && !string.startsWith('\\n') && !string.match(/[^\\r]\\n/);\n}\n/**\n * Returns true if the string consistently uses Unix line endings.\n */\nexport function hasOnlyUnixLineEndings(string) {\n    return !string.includes('\\r\\n') && string.includes('\\n');\n}\nexport function trailingWs(string) {\n    // Yes, this looks overcomplicated and dumb - why not replace the whole function with\n    //     return string match(/\\s*$/)[0]\n    // you ask? Because:\n    // 1. the trap described at https://markamery.com/blog/quadratic-time-regexes/ would mean doing\n    //    this would cause this function to take O(n) time in the worst case (specifically when\n    //    there is a massive run of NON-TRAILING whitespace in `string`), and\n    // 2. the fix proposed in the same blog post, of using a negative lookbehind, is incompatible\n    //    with old Safari versions that we'd like to not break if possible (see\n    //    https://github.com/kpdecker/jsdiff/pull/550)\n    // It feels absurd to do this with an explicit loop instead of a regex, but I really can't see a\n    // better way that doesn't result in broken behaviour.\n    let i;\n    for (i = string.length - 1; i >= 0; i--) {\n        if (!string[i].match(/\\s/)) {\n            break;\n        }\n    }\n    return string.substring(i + 1);\n}\nexport function leadingWs(string) {\n    // Thankfully the annoying considerations described in trailingWs don't apply here:\n    const match = string.match(/^\\s*/);\n    return match ? match[0] : '';\n}\n", "import Diff from './base.js';\nimport { longestCommonPrefix, longestCommonSuffix, replacePrefix, replaceSuffix, removePrefix, removeSuffix, maximumOverlap, leadingWs, trailingWs } from '../util/string.js';\n// Based on https://en.wikipedia.org/wiki/Latin_script_in_Unicode\n//\n// Ranges and exceptions:\n// Latin-1 Supplement, 008000FF\n//  - U+00D7   Multiplication sign\n//  - U+00F7   Division sign\n// Latin Extended-A, 0100017F\n// Latin Extended-B, 0180024F\n// IPA Extensions, 025002AF\n// Spacing Modifier Letters, 02B002FF\n//  - U+02C7   &#711;  Caron\n//  - U+02D8   &#728;  Breve\n//  - U+02D9   &#729;  Dot Above\n//  - U+02DA   &#730;  Ring Above\n//  - U+02DB   &#731;  Ogonek\n//  - U+02DC   &#732;  Small Tilde\n//  - U+02DD   &#733;  Double Acute Accent\n// Latin Extended Additional, 1E001EFF\nconst extendedWordChars = 'a-zA-Z0-9_\\\\u{C0}-\\\\u{FF}\\\\u{D8}-\\\\u{F6}\\\\u{F8}-\\\\u{2C6}\\\\u{2C8}-\\\\u{2D7}\\\\u{2DE}-\\\\u{2FF}\\\\u{1E00}-\\\\u{1EFF}';\n// Each token is one of the following:\n// - A punctuation mark plus the surrounding whitespace\n// - A word plus the surrounding whitespace\n// - Pure whitespace (but only in the special case where this the entire text\n//   is just whitespace)\n//\n// We have to include surrounding whitespace in the tokens because the two\n// alternative approaches produce horribly broken results:\n// * If we just discard the whitespace, we can't fully reproduce the original\n//   text from the sequence of tokens and any attempt to render the diff will\n//   get the whitespace wrong.\n// * If we have separate tokens for whitespace, then in a typical text every\n//   second token will be a single space character. But this often results in\n//   the optimal diff between two texts being a perverse one that preserves\n//   the spaces between words but deletes and reinserts actual common words.\n//   See https://github.com/kpdecker/jsdiff/issues/160#issuecomment-1866099640\n//   for an example.\n//\n// Keeping the surrounding whitespace of course has implications for .equals\n// and .join, not just .tokenize.\n// This regex does NOT fully implement the tokenization rules described above.\n// Instead, it gives runs of whitespace their own \"token\". The tokenize method\n// then handles stitching whitespace tokens onto adjacent word or punctuation\n// tokens.\nconst tokenizeIncludingWhitespace = new RegExp(`[${extendedWordChars}]+|\\\\s+|[^${extendedWordChars}]`, 'ug');\nclass WordDiff extends Diff {\n    equals(left, right, options) {\n        if (options.ignoreCase) {\n            left = left.toLowerCase();\n            right = right.toLowerCase();\n        }\n        return left.trim() === right.trim();\n    }\n    tokenize(value, options = {}) {\n        let parts;\n        if (options.intlSegmenter) {\n            const segmenter = options.intlSegmenter;\n            if (segmenter.resolvedOptions().granularity != 'word') {\n                throw new Error('The segmenter passed must have a granularity of \"word\"');\n            }\n            parts = Array.from(segmenter.segment(value), segment => segment.segment);\n        }\n        else {\n            parts = value.match(tokenizeIncludingWhitespace) || [];\n        }\n        const tokens = [];\n        let prevPart = null;\n        parts.forEach(part => {\n            if ((/\\s/).test(part)) {\n                if (prevPart == null) {\n                    tokens.push(part);\n                }\n                else {\n                    tokens.push(tokens.pop() + part);\n                }\n            }\n            else if (prevPart != null && (/\\s/).test(prevPart)) {\n                if (tokens[tokens.length - 1] == prevPart) {\n                    tokens.push(tokens.pop() + part);\n                }\n                else {\n                    tokens.push(prevPart + part);\n                }\n            }\n            else {\n                tokens.push(part);\n            }\n            prevPart = part;\n        });\n        return tokens;\n    }\n    join(tokens) {\n        // Tokens being joined here will always have appeared consecutively in the\n        // same text, so we can simply strip off the leading whitespace from all the\n        // tokens except the first (and except any whitespace-only tokens - but such\n        // a token will always be the first and only token anyway) and then join them\n        // and the whitespace around words and punctuation will end up correct.\n        return tokens.map((token, i) => {\n            if (i == 0) {\n                return token;\n            }\n            else {\n                return token.replace((/^\\s+/), '');\n            }\n        }).join('');\n    }\n    postProcess(changes, options) {\n        if (!changes || options.oneChangePerToken) {\n            return changes;\n        }\n        let lastKeep = null;\n        // Change objects representing any insertion or deletion since the last\n        // \"keep\" change object. There can be at most one of each.\n        let insertion = null;\n        let deletion = null;\n        changes.forEach(change => {\n            if (change.added) {\n                insertion = change;\n            }\n            else if (change.removed) {\n                deletion = change;\n            }\n            else {\n                if (insertion || deletion) { // May be false at start of text\n                    dedupeWhitespaceInChangeObjects(lastKeep, deletion, insertion, change);\n                }\n                lastKeep = change;\n                insertion = null;\n                deletion = null;\n            }\n        });\n        if (insertion || deletion) {\n            dedupeWhitespaceInChangeObjects(lastKeep, deletion, insertion, null);\n        }\n        return changes;\n    }\n}\nexport const wordDiff = new WordDiff();\nexport function diffWords(oldStr, newStr, options) {\n    // This option has never been documented and never will be (it's clearer to\n    // just call `diffWordsWithSpace` directly if you need that behavior), but\n    // has existed in jsdiff for a long time, so we retain support for it here\n    // for the sake of backwards compatibility.\n    if ((options === null || options === void 0 ? void 0 : options.ignoreWhitespace) != null && !options.ignoreWhitespace) {\n        return diffWordsWithSpace(oldStr, newStr, options);\n    }\n    return wordDiff.diff(oldStr, newStr, options);\n}\nfunction dedupeWhitespaceInChangeObjects(startKeep, deletion, insertion, endKeep) {\n    // Before returning, we tidy up the leading and trailing whitespace of the\n    // change objects to eliminate cases where trailing whitespace in one object\n    // is repeated as leading whitespace in the next.\n    // Below are examples of the outcomes we want here to explain the code.\n    // I=insert, K=keep, D=delete\n    // 1. diffing 'foo bar baz' vs 'foo baz'\n    //    Prior to cleanup, we have K:'foo ' D:' bar ' K:' baz'\n    //    After cleanup, we want:   K:'foo ' D:'bar ' K:'baz'\n    //\n    // 2. Diffing 'foo bar baz' vs 'foo qux baz'\n    //    Prior to cleanup, we have K:'foo ' D:' bar ' I:' qux ' K:' baz'\n    //    After cleanup, we want K:'foo ' D:'bar' I:'qux' K:' baz'\n    //\n    // 3. Diffing 'foo\\nbar baz' vs 'foo baz'\n    //    Prior to cleanup, we have K:'foo ' D:'\\nbar ' K:' baz'\n    //    After cleanup, we want K'foo' D:'\\nbar' K:' baz'\n    //\n    // 4. Diffing 'foo baz' vs 'foo\\nbar baz'\n    //    Prior to cleanup, we have K:'foo\\n' I:'\\nbar ' K:' baz'\n    //    After cleanup, we ideally want K'foo' I:'\\nbar' K:' baz'\n    //    but don't actually manage this currently (the pre-cleanup change\n    //    objects don't contain enough information to make it possible).\n    //\n    // 5. Diffing 'foo   bar baz' vs 'foo  baz'\n    //    Prior to cleanup, we have K:'foo  ' D:'   bar ' K:'  baz'\n    //    After cleanup, we want K:'foo  ' D:' bar ' K:'baz'\n    //\n    // Our handling is unavoidably imperfect in the case where there's a single\n    // indel between keeps and the whitespace has changed. For instance, consider\n    // diffing 'foo\\tbar\\nbaz' vs 'foo baz'. Unless we create an extra change\n    // object to represent the insertion of the space character (which isn't even\n    // a token), we have no way to avoid losing information about the texts'\n    // original whitespace in the result we return. Still, we do our best to\n    // output something that will look sensible if we e.g. print it with\n    // insertions in green and deletions in red.\n    // Between two \"keep\" change objects (or before the first or after the last\n    // change object), we can have either:\n    // * A \"delete\" followed by an \"insert\"\n    // * Just an \"insert\"\n    // * Just a \"delete\"\n    // We handle the three cases separately.\n    if (deletion && insertion) {\n        const oldWsPrefix = leadingWs(deletion.value);\n        const oldWsSuffix = trailingWs(deletion.value);\n        const newWsPrefix = leadingWs(insertion.value);\n        const newWsSuffix = trailingWs(insertion.value);\n        if (startKeep) {\n            const commonWsPrefix = longestCommonPrefix(oldWsPrefix, newWsPrefix);\n            startKeep.value = replaceSuffix(startKeep.value, newWsPrefix, commonWsPrefix);\n            deletion.value = removePrefix(deletion.value, commonWsPrefix);\n            insertion.value = removePrefix(insertion.value, commonWsPrefix);\n        }\n        if (endKeep) {\n            const commonWsSuffix = longestCommonSuffix(oldWsSuffix, newWsSuffix);\n            endKeep.value = replacePrefix(endKeep.value, newWsSuffix, commonWsSuffix);\n            deletion.value = removeSuffix(deletion.value, commonWsSuffix);\n            insertion.value = removeSuffix(insertion.value, commonWsSuffix);\n        }\n    }\n    else if (insertion) {\n        // The whitespaces all reflect what was in the new text rather than\n        // the old, so we essentially have no information about whitespace\n        // insertion or deletion. We just want to dedupe the whitespace.\n        // We do that by having each change object keep its trailing\n        // whitespace and deleting duplicate leading whitespace where\n        // present.\n        if (startKeep) {\n            const ws = leadingWs(insertion.value);\n            insertion.value = insertion.value.substring(ws.length);\n        }\n        if (endKeep) {\n            const ws = leadingWs(endKeep.value);\n            endKeep.value = endKeep.value.substring(ws.length);\n        }\n        // otherwise we've got a deletion and no insertion\n    }\n    else if (startKeep && endKeep) {\n        const newWsFull = leadingWs(endKeep.value), delWsStart = leadingWs(deletion.value), delWsEnd = trailingWs(deletion.value);\n        // Any whitespace that comes straight after startKeep in both the old and\n        // new texts, assign to startKeep and remove from the deletion.\n        const newWsStart = longestCommonPrefix(newWsFull, delWsStart);\n        deletion.value = removePrefix(deletion.value, newWsStart);\n        // Any whitespace that comes straight before endKeep in both the old and\n        // new texts, and hasn't already been assigned to startKeep, assign to\n        // endKeep and remove from the deletion.\n        const newWsEnd = longestCommonSuffix(removePrefix(newWsFull, newWsStart), delWsEnd);\n        deletion.value = removeSuffix(deletion.value, newWsEnd);\n        endKeep.value = replacePrefix(endKeep.value, newWsFull, newWsEnd);\n        // If there's any whitespace from the new text that HASN'T already been\n        // assigned, assign it to the start:\n        startKeep.value = replaceSuffix(startKeep.value, newWsFull, newWsFull.slice(0, newWsFull.length - newWsEnd.length));\n    }\n    else if (endKeep) {\n        // We are at the start of the text. Preserve all the whitespace on\n        // endKeep, and just remove whitespace from the end of deletion to the\n        // extent that it overlaps with the start of endKeep.\n        const endKeepWsPrefix = leadingWs(endKeep.value);\n        const deletionWsSuffix = trailingWs(deletion.value);\n        const overlap = maximumOverlap(deletionWsSuffix, endKeepWsPrefix);\n        deletion.value = removeSuffix(deletion.value, overlap);\n    }\n    else if (startKeep) {\n        // We are at the END of the text. Preserve all the whitespace on\n        // startKeep, and just remove whitespace from the start of deletion to\n        // the extent that it overlaps with the end of startKeep.\n        const startKeepWsSuffix = trailingWs(startKeep.value);\n        const deletionWsPrefix = leadingWs(deletion.value);\n        const overlap = maximumOverlap(startKeepWsSuffix, deletionWsPrefix);\n        deletion.value = removePrefix(deletion.value, overlap);\n    }\n}\nclass WordsWithSpaceDiff extends Diff {\n    tokenize(value) {\n        // Slightly different to the tokenizeIncludingWhitespace regex used above in\n        // that this one treats each individual newline as a distinct tokens, rather\n        // than merging them into other surrounding whitespace. This was requested\n        // in https://github.com/kpdecker/jsdiff/issues/180 &\n        //    https://github.com/kpdecker/jsdiff/issues/211\n        const regex = new RegExp(`(\\\\r?\\\\n)|[${extendedWordChars}]+|[^\\\\S\\\\n\\\\r]+|[^${extendedWordChars}]`, 'ug');\n        return value.match(regex) || [];\n    }\n}\nexport const wordsWithSpaceDiff = new WordsWithSpaceDiff();\nexport function diffWordsWithSpace(oldStr, newStr, options) {\n    return wordsWithSpaceDiff.diff(oldStr, newStr, options);\n}\n", "import Diff from './base.js';\nimport { generateOptions } from '../util/params.js';\nclass LineDiff extends Diff {\n    constructor() {\n        super(...arguments);\n        this.tokenize = tokenize;\n    }\n    equals(left, right, options) {\n        // If we're ignoring whitespace, we need to normalise lines by stripping\n        // whitespace before checking equality. (This has an annoying interaction\n        // with newlineIsToken that requires special handling: if newlines get their\n        // own token, then we DON'T want to trim the *newline* tokens down to empty\n        // strings, since this would cause us to treat whitespace-only line content\n        // as equal to a separator between lines, which would be weird and\n        // inconsistent with the documented behavior of the options.)\n        if (options.ignoreWhitespace) {\n            if (!options.newlineIsToken || !left.includes('\\n')) {\n                left = left.trim();\n            }\n            if (!options.newlineIsToken || !right.includes('\\n')) {\n                right = right.trim();\n            }\n        }\n        else if (options.ignoreNewlineAtEof && !options.newlineIsToken) {\n            if (left.endsWith('\\n')) {\n                left = left.slice(0, -1);\n            }\n            if (right.endsWith('\\n')) {\n                right = right.slice(0, -1);\n            }\n        }\n        return super.equals(left, right, options);\n    }\n}\nexport const lineDiff = new LineDiff();\nexport function diffLines(oldStr, newStr, options) {\n    return lineDiff.diff(oldStr, newStr, options);\n}\nexport function diffTrimmedLines(oldStr, newStr, options) {\n    options = generateOptions(options, { ignoreWhitespace: true });\n    return lineDiff.diff(oldStr, newStr, options);\n}\n// Exported standalone so it can be used from jsonDiff too.\nexport function tokenize(value, options) {\n    if (options.stripTrailingCr) {\n        // remove one \\r before \\n to match GNU diff's --strip-trailing-cr behavior\n        value = value.replace(/\\r\\n/g, '\\n');\n    }\n    const retLines = [], linesAndNewlines = value.split(/(\\n|\\r\\n)/);\n    // Ignore the final empty token that occurs if the string ends with a new line\n    if (!linesAndNewlines[linesAndNewlines.length - 1]) {\n        linesAndNewlines.pop();\n    }\n    // Merge the content and line separators into single tokens\n    for (let i = 0; i < linesAndNewlines.length; i++) {\n        const line = linesAndNewlines[i];\n        if (i % 2 && !options.newlineIsToken) {\n            retLines[retLines.length - 1] += line;\n        }\n        else {\n            retLines.push(line);\n        }\n    }\n    return retLines;\n}\n", "import Diff from './base.js';\nfunction isSentenceEndPunct(char) {\n    return char == '.' || char == '!' || char == '?';\n}\nclass SentenceDiff extends Diff {\n    tokenize(value) {\n        var _a;\n        // If in future we drop support for environments that don't support lookbehinds, we can replace\n        // this entire function with:\n        //     return value.split(/(?<=[.!?])(\\s+|$)/);\n        // but until then, for similar reasons to the trailingWs function in string.ts, we are forced\n        // to do this verbosely \"by hand\" instead of using a regex.\n        const result = [];\n        let tokenStartI = 0;\n        for (let i = 0; i < value.length; i++) {\n            if (i == value.length - 1) {\n                result.push(value.slice(tokenStartI));\n                break;\n            }\n            if (isSentenceEndPunct(value[i]) && value[i + 1].match(/\\s/)) {\n                // We've hit a sentence break - i.e. a punctuation mark followed by whitespace.\n                // We now want to push TWO tokens to the result:\n                // 1. the sentence\n                result.push(value.slice(tokenStartI, i + 1));\n                // 2. the whitespace\n                i = tokenStartI = i + 1;\n                while ((_a = value[i + 1]) === null || _a === void 0 ? void 0 : _a.match(/\\s/)) {\n                    i++;\n                }\n                result.push(value.slice(tokenStartI, i + 1));\n                // Then the next token (a sentence) starts on the character after the whitespace.\n                // (It's okay if this is off the end of the string - then the outer loop will terminate\n                // here anyway.)\n                tokenStartI = i + 1;\n            }\n        }\n        return result;\n    }\n}\nexport const sentenceDiff = new SentenceDiff();\nexport function diffSentences(oldStr, newStr, options) {\n    return sentenceDiff.diff(oldStr, newStr, options);\n}\n", "import Diff from './base.js';\nclass CssDiff extends Diff {\n    tokenize(value) {\n        return value.split(/([{}:;,]|\\s+)/);\n    }\n}\nexport const cssDiff = new CssDiff();\nexport function diffCss(oldStr, newStr, options) {\n    return cssDiff.diff(oldStr, newStr, options);\n}\n", "import Diff from './base.js';\nimport { tokenize } from './line.js';\nclass JsonDiff extends Diff {\n    constructor() {\n        super(...arguments);\n        this.tokenize = tokenize;\n    }\n    get useLongestToken() {\n        // Discriminate between two lines of pretty-printed, serialized JSON where one of them has a\n        // dangling comma and the other doesn't. Turns out including the dangling comma yields the nicest output:\n        return true;\n    }\n    castInput(value, options) {\n        const { undefinedReplacement, stringifyReplacer = (k, v) => typeof v === 'undefined' ? undefinedReplacement : v } = options;\n        return typeof value === 'string' ? value : JSON.stringify(canonicalize(value, null, null, stringifyReplacer), null, '  ');\n    }\n    equals(left, right, options) {\n        return super.equals(left.replace(/,([\\r\\n])/g, '$1'), right.replace(/,([\\r\\n])/g, '$1'), options);\n    }\n}\nexport const jsonDiff = new JsonDiff();\nexport function diffJson(oldStr, newStr, options) {\n    return jsonDiff.diff(oldStr, newStr, options);\n}\n// This function handles the presence of circular references by bailing out when encountering an\n// object that is already on the \"stack\" of items being processed. Accepts an optional replacer\nexport function canonicalize(obj, stack, replacementStack, replacer, key) {\n    stack = stack || [];\n    replacementStack = replacementStack || [];\n    if (replacer) {\n        obj = replacer(key === undefined ? '' : key, obj);\n    }\n    let i;\n    for (i = 0; i < stack.length; i += 1) {\n        if (stack[i] === obj) {\n            return replacementStack[i];\n        }\n    }\n    let canonicalizedObj;\n    if ('[object Array]' === Object.prototype.toString.call(obj)) {\n        stack.push(obj);\n        canonicalizedObj = new Array(obj.length);\n        replacementStack.push(canonicalizedObj);\n        for (i = 0; i < obj.length; i += 1) {\n            canonicalizedObj[i] = canonicalize(obj[i], stack, replacementStack, replacer, String(i));\n        }\n        stack.pop();\n        replacementStack.pop();\n        return canonicalizedObj;\n    }\n    if (obj && obj.toJSON) {\n        obj = obj.toJSON();\n    }\n    if (typeof obj === 'object' && obj !== null) {\n        stack.push(obj);\n        canonicalizedObj = {};\n        replacementStack.push(canonicalizedObj);\n        const sortedKeys = [];\n        let key;\n        for (key in obj) {\n            /* istanbul ignore else */\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                sortedKeys.push(key);\n            }\n        }\n        sortedKeys.sort();\n        for (i = 0; i < sortedKeys.length; i += 1) {\n            key = sortedKeys[i];\n            canonicalizedObj[key] = canonicalize(obj[key], stack, replacementStack, replacer, key);\n        }\n        stack.pop();\n        replacementStack.pop();\n    }\n    else {\n        canonicalizedObj = obj;\n    }\n    return canonicalizedObj;\n}\n", "import Diff from './base.js';\nclass ArrayDiff extends Diff {\n    tokenize(value) {\n        return value.slice();\n    }\n    join(value) {\n        return value;\n    }\n    removeEmpty(value) {\n        return value;\n    }\n}\nexport const arrayDiff = new ArrayDiff();\nexport function diffArrays(oldArr, newArr, options) {\n    return arrayDiff.diff(oldArr, newArr, options);\n}\n", "import { diffLines } from '../diff/line.js';\nexport function structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n    let optionsObj;\n    if (!options) {\n        optionsObj = {};\n    }\n    else if (typeof options === 'function') {\n        optionsObj = { callback: options };\n    }\n    else {\n        optionsObj = options;\n    }\n    if (typeof optionsObj.context === 'undefined') {\n        optionsObj.context = 4;\n    }\n    // We copy this into its own variable to placate TypeScript, which thinks\n    // optionsObj.context might be undefined in the callbacks below.\n    const context = optionsObj.context;\n    // @ts-expect-error (runtime check for something that is correctly a static type error)\n    if (optionsObj.newlineIsToken) {\n        throw new Error('newlineIsToken may not be used with patch-generation functions, only with diffing functions');\n    }\n    if (!optionsObj.callback) {\n        return diffLinesResultToPatch(diffLines(oldStr, newStr, optionsObj));\n    }\n    else {\n        const { callback } = optionsObj;\n        diffLines(oldStr, newStr, Object.assign(Object.assign({}, optionsObj), { callback: (diff) => {\n                const patch = diffLinesResultToPatch(diff);\n                // TypeScript is unhappy without the cast because it does not understand that `patch` may\n                // be undefined here only if `callback` is StructuredPatchCallbackAbortable:\n                callback(patch);\n            } }));\n    }\n    function diffLinesResultToPatch(diff) {\n        // STEP 1: Build up the patch with no \"\\ No newline at end of file\" lines and with the arrays\n        //         of lines containing trailing newline characters. We'll tidy up later...\n        if (!diff) {\n            return;\n        }\n        diff.push({ value: '', lines: [] }); // Append an empty value to make cleanup easier\n        function contextLines(lines) {\n            return lines.map(function (entry) { return ' ' + entry; });\n        }\n        const hunks = [];\n        let oldRangeStart = 0, newRangeStart = 0, curRange = [], oldLine = 1, newLine = 1;\n        for (let i = 0; i < diff.length; i++) {\n            const current = diff[i], lines = current.lines || splitLines(current.value);\n            current.lines = lines;\n            if (current.added || current.removed) {\n                // If we have previous context, start with that\n                if (!oldRangeStart) {\n                    const prev = diff[i - 1];\n                    oldRangeStart = oldLine;\n                    newRangeStart = newLine;\n                    if (prev) {\n                        curRange = context > 0 ? contextLines(prev.lines.slice(-context)) : [];\n                        oldRangeStart -= curRange.length;\n                        newRangeStart -= curRange.length;\n                    }\n                }\n                // Output our changes\n                for (const line of lines) {\n                    curRange.push((current.added ? '+' : '-') + line);\n                }\n                // Track the updated file position\n                if (current.added) {\n                    newLine += lines.length;\n                }\n                else {\n                    oldLine += lines.length;\n                }\n            }\n            else {\n                // Identical context lines. Track line changes\n                if (oldRangeStart) {\n                    // Close out any changes that have been output (or join overlapping)\n                    if (lines.length <= context * 2 && i < diff.length - 2) {\n                        // Overlapping\n                        for (const line of contextLines(lines)) {\n                            curRange.push(line);\n                        }\n                    }\n                    else {\n                        // end the range and output\n                        const contextSize = Math.min(lines.length, context);\n                        for (const line of contextLines(lines.slice(0, contextSize))) {\n                            curRange.push(line);\n                        }\n                        const hunk = {\n                            oldStart: oldRangeStart,\n                            oldLines: (oldLine - oldRangeStart + contextSize),\n                            newStart: newRangeStart,\n                            newLines: (newLine - newRangeStart + contextSize),\n                            lines: curRange\n                        };\n                        hunks.push(hunk);\n                        oldRangeStart = 0;\n                        newRangeStart = 0;\n                        curRange = [];\n                    }\n                }\n                oldLine += lines.length;\n                newLine += lines.length;\n            }\n        }\n        // Step 2: eliminate the trailing `\\n` from each line of each hunk, and, where needed, add\n        //         \"\\ No newline at end of file\".\n        for (const hunk of hunks) {\n            for (let i = 0; i < hunk.lines.length; i++) {\n                if (hunk.lines[i].endsWith('\\n')) {\n                    hunk.lines[i] = hunk.lines[i].slice(0, -1);\n                }\n                else {\n                    hunk.lines.splice(i + 1, 0, '\\\\ No newline at end of file');\n                    i++; // Skip the line we just added, then continue iterating\n                }\n            }\n        }\n        return {\n            oldFileName: oldFileName, newFileName: newFileName,\n            oldHeader: oldHeader, newHeader: newHeader,\n            hunks: hunks\n        };\n    }\n}\n/**\n * creates a unified diff patch.\n * @param patch either a single structured patch object (as returned by `structuredPatch`) or an array of them (as returned by `parsePatch`)\n */\nexport function formatPatch(patch) {\n    if (Array.isArray(patch)) {\n        return patch.map(formatPatch).join('\\n');\n    }\n    const ret = [];\n    if (patch.oldFileName == patch.newFileName) {\n        ret.push('Index: ' + patch.oldFileName);\n    }\n    ret.push('===================================================================');\n    ret.push('--- ' + patch.oldFileName + (typeof patch.oldHeader === 'undefined' ? '' : '\\t' + patch.oldHeader));\n    ret.push('+++ ' + patch.newFileName + (typeof patch.newHeader === 'undefined' ? '' : '\\t' + patch.newHeader));\n    for (let i = 0; i < patch.hunks.length; i++) {\n        const hunk = patch.hunks[i];\n        // Unified Diff Format quirk: If the chunk size is 0,\n        // the first number is one lower than one would expect.\n        // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n        if (hunk.oldLines === 0) {\n            hunk.oldStart -= 1;\n        }\n        if (hunk.newLines === 0) {\n            hunk.newStart -= 1;\n        }\n        ret.push('@@ -' + hunk.oldStart + ',' + hunk.oldLines\n            + ' +' + hunk.newStart + ',' + hunk.newLines\n            + ' @@');\n        for (const line of hunk.lines) {\n            ret.push(line);\n        }\n    }\n    return ret.join('\\n') + '\\n';\n}\nexport function createTwoFilesPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n    if (typeof options === 'function') {\n        options = { callback: options };\n    }\n    if (!(options === null || options === void 0 ? void 0 : options.callback)) {\n        const patchObj = structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options);\n        if (!patchObj) {\n            return;\n        }\n        return formatPatch(patchObj);\n    }\n    else {\n        const { callback } = options;\n        structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, Object.assign(Object.assign({}, options), { callback: patchObj => {\n                if (!patchObj) {\n                    callback(undefined);\n                }\n                else {\n                    callback(formatPatch(patchObj));\n                }\n            } }));\n    }\n}\nexport function createPatch(fileName, oldStr, newStr, oldHeader, newHeader, options) {\n    return createTwoFilesPatch(fileName, fileName, oldStr, newStr, oldHeader, newHeader, options);\n}\n/**\n * Split `text` into an array of lines, including the trailing newline character (where present)\n */\nfunction splitLines(text) {\n    const hasTrailingNl = text.endsWith('\\n');\n    const result = text.split('\\n').map(line => line + '\\n');\n    if (hasTrailingNl) {\n        result.pop();\n    }\n    else {\n        result.push(result.pop().slice(0, -1));\n    }\n    return result;\n}\n", "import { type ChangeObject, diffChars, diffWordsWithSpace } from 'diff';\n\nimport type { ChangeHunk, DecorationItem, LineDifftypes } from '../types';\n\ninterface ParseDecorationsProps {\n  diffGroups: ChangeHunk[];\n  disableDecorations?: boolean;\n  lineDiffType: LineDifftypes;\n  maxLineDiffLength: number;\n  diffStyle: 'unified' | 'split';\n}\n\ninterface ParseDecorationsReturn {\n  unifiedDecorations: DecorationItem[];\n  deletionDecorations: DecorationItem[];\n  additionDecorations: DecorationItem[];\n}\n\nexport function parseDecorations({\n  diffGroups,\n  disableDecorations = false,\n  lineDiffType,\n  maxLineDiffLength,\n  diffStyle,\n}: ParseDecorationsProps): ParseDecorationsReturn {\n  const unified = diffStyle === 'unified';\n  const unifiedDecorations: DecorationItem[] = [];\n  const additionDecorations: DecorationItem[] = [];\n  const deletionDecorations: DecorationItem[] = [];\n  if (disableDecorations || lineDiffType === 'none') {\n    return { unifiedDecorations, deletionDecorations, additionDecorations };\n  }\n  for (const group of diffGroups) {\n    const len = Math.min(\n      group.additionLines.length,\n      group.deletionLines.length\n    );\n    for (let i = 0; i < len; i++) {\n      const deletionLine = group.deletionLines[i];\n      const additionLine = group.additionLines[i];\n      if (deletionLine == null || additionLine == null) {\n        break;\n      }\n      // Lets skep running diffs on super long lines because it's probably\n      // expensive and hard to follow\n      if (\n        deletionLine.length > maxLineDiffLength ||\n        additionLine.length > maxLineDiffLength\n      ) {\n        continue;\n      }\n      const lineDiff =\n        lineDiffType === 'char'\n          ? diffChars(deletionLine, additionLine)\n          : diffWordsWithSpace(deletionLine, additionLine);\n      const deletionSpans: [0 | 1, string][] = [];\n      const additionSpans: [0 | 1, string][] = [];\n      const enableJoin = lineDiffType === 'word-alt';\n      for (const item of lineDiff) {\n        if (!item.added && !item.removed) {\n          pushOrJoinSpan({\n            item,\n            arr: deletionSpans,\n            enableJoin,\n            isNeutral: true,\n          });\n          pushOrJoinSpan({\n            item,\n            arr: additionSpans,\n            enableJoin,\n            isNeutral: true,\n          });\n        } else if (item.removed) {\n          pushOrJoinSpan({ item, arr: deletionSpans, enableJoin });\n        } else {\n          pushOrJoinSpan({ item, arr: additionSpans, enableJoin });\n        }\n      }\n      let spanIndex = 0;\n      for (const span of additionSpans) {\n        if (span[0] === 1) {\n          (unified ? unifiedDecorations : additionDecorations).push(\n            createDiffSpanDecoration({\n              line: group.additionStartIndex + i,\n              spanStart: spanIndex,\n              spanLength: span[1].length,\n            })\n          );\n        }\n        spanIndex += span[1].length;\n      }\n      spanIndex = 0;\n      for (const span of deletionSpans) {\n        if (span[0] === 1) {\n          (unified ? unifiedDecorations : deletionDecorations).push(\n            createDiffSpanDecoration({\n              line: group.deletionStartIndex + i,\n              spanStart: spanIndex,\n              spanLength: span[1].length,\n            })\n          );\n        }\n        spanIndex += span[1].length;\n      }\n    }\n  }\n  return { unifiedDecorations, deletionDecorations, additionDecorations };\n}\n\ninterface CreateDiffSpanDecorationProps {\n  line: number;\n  spanStart: number;\n  spanLength: number;\n}\n\nfunction createDiffSpanDecoration({\n  line,\n  spanStart,\n  spanLength,\n}: CreateDiffSpanDecorationProps): DecorationItem {\n  return {\n    start: { line, character: spanStart },\n    end: { line, character: spanStart + spanLength },\n    properties: { 'data-diff-span': '' },\n    alwaysWrap: true,\n  };\n}\n\ninterface PushOrJoinSpanProps {\n  item: ChangeObject<string>;\n  arr: [0 | 1, string][];\n  enableJoin: boolean;\n  isNeutral?: boolean;\n}\n\n// For diff decoration spans, we want to be sure that if there is a single\n// white-space gap between diffs that we join them together into a longer diff span.\n// Spans are basically just a tuple - 1 means the content should be\n// highlighted, 0 means it should not, we still need to the span data to figure\n// out span positions\nfunction pushOrJoinSpan({\n  item,\n  arr,\n  enableJoin,\n  isNeutral = false,\n}: PushOrJoinSpanProps) {\n  const lastItem = arr[arr.length - 1];\n  if (lastItem == null || item.value === '\\n' || !enableJoin) {\n    arr.push([isNeutral ? 0 : 1, item.value]);\n    return;\n  }\n  const isLastItemNeutral = lastItem[0] === 0;\n  if (\n    isNeutral === isLastItemNeutral ||\n    // If we have a single space neutral item, lets join it to a previously\n    // space non-neutral item to avoid single space gaps\n    (isNeutral && item.value.length === 1 && !isLastItemNeutral)\n  ) {\n    lastItem[1] += item.value;\n    return;\n  }\n  arr.push([isNeutral ? 0 : 1, item.value]);\n}\n", "import type { AnnotationSpan, LineInfo, LineSpans } from '../types';\n\nexport function pushOrMergeSpan(\n  span: LineSpans | undefined,\n  index: number,\n  spanMap: Record<number, LineInfo | undefined>\n): void {\n  if (span == null) {\n    return;\n  }\n  let lineInfo = spanMap[index];\n  // If we need to inject a gap at the top of a column, then we'll make a\n  // `fake` lineInfo for it.\n  if (lineInfo == null && index === 0 && span.type === 'gap') {\n    lineInfo = {\n      type: 'context',\n      lineNumber: -1,\n      lineIndex: -1,\n      spans: [],\n    };\n    spanMap[0] = lineInfo;\n  } else if (lineInfo == null) {\n    console.error('pushOrMergeSpan: Attempting to apply an invalid span', {\n      span,\n      index,\n      spanMap,\n    });\n    return;\n  }\n  const spans = lineInfo.spans ?? [];\n  lineInfo.spans = spans;\n  if (spans.length === 0) {\n    spans.push(span);\n  }\n  // If we get in here, we may need to split up some gaps to split up some gaps\n  else {\n    let gapSize = span.type === 'gap' ? span.rows : 0;\n    const annotations: AnnotationSpan[] = [];\n    let merged = false;\n    for (const item of spans) {\n      if (item.type === 'annotation') {\n        if (span.type === 'annotation' && span.lineIndex === item.lineIndex) {\n          merged = true;\n          item.annotations = mergeAnnotations(\n            item.annotations,\n            span.annotations\n          );\n        }\n        annotations.push(item);\n      } else {\n        gapSize += item.rows;\n      }\n    }\n    if (span.type === 'annotation' && !merged) {\n      annotations.push(span);\n    }\n    const spanMarkers: (AnnotationSpan | 0)[] = new Array(gapSize).fill(0);\n    for (const annotation of annotations) {\n      const annotationIndex = annotation.lineIndex - lineInfo.lineIndex;\n      const currentItem = spanMarkers[annotationIndex];\n      if (currentItem === 0 || currentItem == null) {\n        spanMarkers.splice(annotationIndex, 0, annotation);\n      } else {\n        // NOTE(amadeus): Hopefully we never get in here, but theoretically\n        // it's possible... so we'll merge the annotations together\n        currentItem.annotations = mergeAnnotations(\n          currentItem.annotations,\n          annotation.annotations\n        );\n      }\n    }\n    const newSpans: LineSpans[] = [];\n    let spanSize = 0;\n    for (const item of spanMarkers) {\n      if (item === 0) {\n        spanSize++;\n      } else {\n        if (spanSize > 0) {\n          newSpans.push({ type: 'gap', rows: spanSize });\n          spanSize = 0;\n        }\n        newSpans.push(item);\n      }\n    }\n    if (spanSize > 0) {\n      newSpans.push({ type: 'gap', rows: spanSize });\n    }\n    lineInfo.spans = newSpans;\n  }\n}\n\nfunction mergeAnnotations(base: string[], newAnnotations: string[]): string[] {\n  if (newAnnotations.length === 0) {\n    return base;\n  }\n  const baseSet = new Set(base);\n  for (const item of newAnnotations) {\n    baseSet.add(item);\n  }\n  return Array.from(baseSet);\n}\n", "import type { Element, ElementContent, Root, RootContent } from 'hast';\nimport { toHtml } from 'hast-util-to-html';\n\nimport {\n  getSharedHighlighter,\n  hasLoadedLanguage,\n  hasLoadedThemes,\n} from './SharedHighlighter';\nimport { DEFAULT_THEMES } from './constants';\nimport type {\n  AnnotationLineMap,\n  AnnotationSpan,\n  BaseDiffOptions,\n  ChangeHunk,\n  CodeToHastOptions,\n  DecorationItem,\n  DiffLineAnnotation,\n  FileDiffMetadata,\n  Hunk,\n  HunkData,\n  HunkLineType,\n  LineInfo,\n  PJSHighlighter,\n  PJSThemeNames,\n  SharedRenderState,\n  ShikiTransformer,\n  SupportedLanguages,\n  ThemeTypes,\n} from './types';\nimport { createMirroredAnnotationSpan } from './utils/createMirroredAnnotationSpan';\nimport { createSingleAnnotationSpan } from './utils/createSingleAnnotationSpan';\nimport { createTransformerWithState } from './utils/createTransformerWithState';\nimport { formatCSSVariablePrefix } from './utils/formatCSSVariablePrefix';\nimport { getFiletypeFromFileName } from './utils/getFiletypeFromFileName';\nimport { getHighlighterOptions } from './utils/getHighlighterOptions';\nimport { getHunkSeparatorSlotName } from './utils/getHunkSeparatorSlotName';\nimport { getThemes } from './utils/getThemes';\nimport { getTotalLineCountFromHunks } from './utils/getTotalLineCountFromHunks';\nimport {\n  createHastElement,\n  createPreWrapperProperties,\n  createSeparator,\n} from './utils/hast_utils';\nimport { parseDecorations } from './utils/parseDiffDecorations';\nimport { parseLineType } from './utils/parseLineType';\nimport { pushOrMergeSpan } from './utils/pushOrMergeSpan';\n\ninterface RenderHunkProps {\n  hunk: Hunk;\n  prevHunk: Hunk | undefined;\n  isLastHunk: boolean;\n  isFirstHunk: boolean;\n  hunkIndex: number;\n  highlighter: PJSHighlighter;\n  state: SharedRenderState;\n  transformers: ShikiTransformer[];\n  additionsAST: ElementContent[];\n  deletionsAST: ElementContent[];\n  unifiedAST: ElementContent[];\n  hunkData: HunkData[];\n}\n\ninterface UnresolvedAnnotationSpan {\n  type: 'addition' | 'deletion';\n  hunkIndex: number;\n  span: AnnotationSpan;\n}\n\ninterface ComputedContent {\n  content: string[];\n  lineInfo: Record<number, LineInfo | undefined>;\n  decorations: DecorationItem[];\n}\n\ninterface ProcessLinesReturn {\n  hasLongLines: boolean;\n  additions: ComputedContent;\n  deletions: ComputedContent;\n  unified: ComputedContent;\n}\n\ntype OptionsWithDefaults = Required<\n  Omit<BaseDiffOptions, 'lang' | 'preferWasmHighlighter' | 'unsafeCSS'>\n>;\n\nexport interface HunksRenderResult {\n  additionsAST: ElementContent[] | undefined;\n  deletionsAST: ElementContent[] | undefined;\n  unifiedAST: ElementContent[] | undefined;\n  hunkData: HunkData[];\n  css: string;\n  preNode: Element;\n  totalLines: number;\n}\n\nexport class DiffHunksRenderer<LAnnotation = undefined> {\n  private highlighter: PJSHighlighter | undefined;\n  private options: BaseDiffOptions;\n  private diff: FileDiffMetadata | undefined;\n\n  private expandedHunks = new Set<number>();\n\n  private deletionAnnotations: AnnotationLineMap<LAnnotation> = {};\n  private additionAnnotations: AnnotationLineMap<LAnnotation> = {};\n\n  private queuedDiff: FileDiffMetadata | undefined;\n  private queuedRender: Promise<HunksRenderResult | undefined> | undefined;\n  private computedLang: SupportedLanguages = 'text';\n\n  constructor(options: BaseDiffOptions = { theme: DEFAULT_THEMES }) {\n    this.options = options;\n  }\n\n  cleanUp(): void {\n    this.highlighter = undefined;\n    this.diff = undefined;\n    this.queuedDiff = undefined;\n    this.queuedRender = undefined;\n  }\n\n  setOptions(options: BaseDiffOptions): void {\n    this.options = options;\n  }\n\n  expandHunk(index: number): void {\n    this.expandedHunks.add(index);\n  }\n\n  private isHunkExpanded(index: number): boolean {\n    return (\n      this.getOptionsWithDefaults().expandUnchanged ||\n      this.expandedHunks.has(index)\n    );\n  }\n\n  private mergeOptions(options: Partial<BaseDiffOptions>) {\n    this.options = { ...this.options, ...options };\n  }\n\n  setThemeType(themeType: ThemeTypes): void {\n    if (this.getOptionsWithDefaults().themeType === themeType) {\n      return;\n    }\n    this.mergeOptions({ themeType });\n  }\n\n  setLineAnnotations(lineAnnotations: DiffLineAnnotation<LAnnotation>[]): void {\n    this.additionAnnotations = {};\n    this.deletionAnnotations = {};\n    for (const annotation of lineAnnotations) {\n      const map = ((): AnnotationLineMap<LAnnotation> => {\n        switch (annotation.side) {\n          case 'deletions':\n            return this.deletionAnnotations;\n          case 'additions':\n            return this.additionAnnotations;\n        }\n      })();\n      const arr = map[annotation.lineNumber] ?? [];\n      map[annotation.lineNumber] = arr;\n      arr.push(annotation);\n    }\n  }\n\n  getOptionsWithDefaults(): OptionsWithDefaults {\n    const {\n      diffIndicators = 'bars',\n      diffStyle = 'split',\n      disableBackground = false,\n      disableLineNumbers = false,\n      expandUnchanged = false,\n      hunkSeparators = 'line-info',\n      lineDiffType = 'word-alt',\n      maxLineDiffLength = 1000,\n      maxLineLengthForHighlighting = 1000,\n      overflow = 'scroll',\n      theme = DEFAULT_THEMES,\n      themeType = 'system',\n      useCSSClasses = false,\n    } = this.options;\n    return {\n      diffIndicators,\n      diffStyle,\n      disableBackground,\n      disableLineNumbers,\n      expandUnchanged,\n      hunkSeparators,\n      lineDiffType,\n      maxLineDiffLength,\n      maxLineLengthForHighlighting,\n      overflow,\n      theme,\n      themeType,\n      useCSSClasses,\n    };\n  }\n\n  async initializeHighlighter(): Promise<PJSHighlighter> {\n    this.highlighter = await getSharedHighlighter(\n      getHighlighterOptions(this.computedLang, this.options)\n    );\n    return this.highlighter;\n  }\n\n  async render(diff: FileDiffMetadata): Promise<HunksRenderResult | undefined> {\n    this.queuedDiff = diff;\n    if (this.queuedRender != null) {\n      return this.queuedRender;\n    }\n    this.queuedRender = (async () => {\n      this.computedLang =\n        this.options.lang ?? getFiletypeFromFileName(diff.name);\n      // If we have changed theme or language on our diff instance, we need to\n      // double check the highlighter has loaded the appropriate languages and\n      // themes\n      if (\n        !hasLoadedLanguage(this.computedLang) ||\n        !hasLoadedThemes(getThemes(this.options.theme))\n      ) {\n        this.highlighter = undefined;\n      }\n\n      this.highlighter ??= await this.initializeHighlighter();\n      if (this.queuedDiff == null) {\n        // If we get in here, it's likely we called cleanup and therefore we\n        // should just return early with empty result\n        return undefined;\n      }\n      return this.renderDiff(this.queuedDiff, this.highlighter);\n    })();\n    const result = await this.queuedRender;\n    this.queuedDiff = undefined;\n    this.queuedRender = undefined;\n    return result;\n  }\n\n  private renderDiff(\n    fileDiff: FileDiffMetadata,\n    highlighter: PJSHighlighter\n  ): HunksRenderResult {\n    const {\n      disableLineNumbers,\n      diffStyle,\n      overflow,\n      themeType,\n      disableBackground,\n      diffIndicators,\n      expandUnchanged,\n      useCSSClasses,\n      theme,\n    } = this.getOptionsWithDefaults();\n\n    this.diff = fileDiff;\n    const additionsAST: ElementContent[] = [];\n    const deletionsAST: ElementContent[] = [];\n    const unifiedAST: ElementContent[] = [];\n    const { state, transformers, toClass } = createTransformerWithState({\n      disableLineNumbers: disableLineNumbers,\n      useCSSClasses,\n    });\n    let hunkIndex = 0;\n    const hunkData: HunkData[] = [];\n\n    let prevHunk: Hunk | undefined;\n    const hunks = (() => {\n      if (fileDiff.hunks.length > 0) {\n        return fileDiff.hunks;\n      }\n      if (\n        expandUnchanged &&\n        this.diff?.newLines != null &&\n        this.diff.newLines.length > 0\n      ) {\n        const lineCount = this.diff.newLines.length + 1;\n        return [\n          {\n            additionCount: 0,\n            additionStart: lineCount,\n            deletedCount: 0,\n            deletedStart: lineCount,\n            hunkContent: [],\n            hunkContext: undefined,\n            hunkSpecs: undefined,\n          },\n        ];\n      }\n      return [];\n    })();\n    for (const hunk of hunks) {\n      this.renderHunks({\n        hunk,\n        prevHunk,\n        hunkIndex,\n        highlighter,\n        state,\n        transformers,\n        isFirstHunk: hunkIndex === 0,\n        isLastHunk: hunkIndex === fileDiff.hunks.length - 1,\n        additionsAST,\n        deletionsAST,\n        unifiedAST,\n        hunkData,\n      });\n      hunkIndex++;\n      prevHunk = hunk;\n    }\n\n    const totalLines = Math.max(\n      getTotalLineCountFromHunks(fileDiff.hunks),\n      fileDiff.newLines?.length ?? 0,\n      fileDiff.oldLines?.length ?? 0\n    );\n\n    return {\n      additionsAST: additionsAST.length > 0 ? additionsAST : undefined,\n      deletionsAST: deletionsAST.length > 0 ? deletionsAST : undefined,\n      unifiedAST: unifiedAST.length > 0 ? unifiedAST : undefined,\n      hunkData,\n      css: toClass.getCSS(),\n      preNode: createHastElement({\n        tagName: 'pre',\n        properties: createPreWrapperProperties({\n          diffIndicators,\n          disableBackground,\n          highlighter,\n          overflow,\n          split:\n            diffStyle === 'unified'\n              ? false\n              : additionsAST.length > 0 && additionsAST.length > 0,\n          theme,\n          themeType,\n          totalLines,\n        }),\n      }),\n      totalLines,\n    };\n  }\n\n  renderFullAST(\n    result: HunksRenderResult,\n    children: ElementContent[] = []\n  ): Element {\n    if (result.unifiedAST != null) {\n      children.push(\n        createHastElement({\n          tagName: 'code',\n          children: result.unifiedAST,\n          properties: {\n            'data-code': '',\n            'data-unified': '',\n          },\n        })\n      );\n    }\n    if (result.deletionsAST != null) {\n      children.push(\n        createHastElement({\n          tagName: 'code',\n          children: result.deletionsAST,\n          properties: {\n            'data-code': '',\n            'data-deletions': '',\n          },\n        })\n      );\n    }\n    if (result.additionsAST != null) {\n      children.push(\n        createHastElement({\n          tagName: 'code',\n          children: result.additionsAST,\n          properties: {\n            'data-code': '',\n            'data-additions': '',\n          },\n        })\n      );\n    }\n    return { ...result.preNode, children };\n  }\n\n  renderFullHTML(\n    result: HunksRenderResult,\n    tempChildren: ElementContent[] = []\n  ): string {\n    return toHtml(this.renderFullAST(result, tempChildren));\n  }\n\n  renderPartialHTML(\n    children: ElementContent[],\n    columnType?: 'unified' | 'deletions' | 'additions'\n  ): string {\n    if (columnType == null) {\n      return toHtml(children);\n    }\n    return toHtml(\n      createHastElement({\n        tagName: 'code',\n        children,\n        properties: {\n          'data-code': '',\n          [`data-${columnType}`]: '',\n        },\n      })\n    );\n  }\n\n  private createHastOptions(\n    transformers: ShikiTransformer[],\n    decorations?: DecorationItem[],\n    forceTextLang: boolean = false\n  ): CodeToHastOptions<PJSThemeNames> {\n    const { theme } = this.getOptionsWithDefaults();\n    if (typeof theme === 'string') {\n      return {\n        theme,\n        cssVariablePrefix: formatCSSVariablePrefix(),\n        lang: forceTextLang ? 'text' : this.computedLang,\n        defaultColor: false,\n        transformers,\n        decorations,\n      };\n    }\n    return {\n      themes: theme,\n      cssVariablePrefix: formatCSSVariablePrefix(),\n      lang: forceTextLang ? 'text' : this.computedLang,\n      defaultColor: false,\n      transformers,\n      decorations,\n    };\n  }\n\n  private renderHunks({\n    hunk,\n    hunkIndex,\n    highlighter,\n    state,\n    transformers,\n    prevHunk,\n    isFirstHunk,\n    isLastHunk,\n    additionsAST,\n    deletionsAST,\n    unifiedAST,\n    hunkData,\n  }: RenderHunkProps) {\n    if (hunk.hunkContent == null) {\n      return;\n    }\n\n    const { hunkSeparators } = this.getOptionsWithDefaults();\n    const { additions, deletions, unified, hasLongLines } = this.processLines(\n      hunk,\n      hunkIndex,\n      prevHunk,\n      isLastHunk\n    );\n    const expandable = this.diff?.newLines != null;\n\n    const generateLinesAST = (\n      type: 'additions' | 'deletions' | 'unified',\n      computed: ComputedContent,\n      linesAST: ElementContent[]\n    ) => {\n      // Remove trailing blank line\n      const content = computed.content.join('').replace(/\\n$/, '');\n      state.lineInfo = computed.lineInfo;\n      const nodes = highlighter.codeToHast(\n        content,\n        this.createHastOptions(transformers, computed.decorations, hasLongLines)\n      );\n      if (!this.isHunkExpanded(hunkIndex)) {\n        if (hunkSeparators === 'line-info' || hunkSeparators === 'custom') {\n          const lines = (() => {\n            const hunkStart = hunk.additionStart;\n            if (prevHunk == null) {\n              return hunkStart - 1;\n            }\n            return (\n              hunkStart - (prevHunk.additionStart + prevHunk.additionCount)\n            );\n          })();\n          if (lines > 0) {\n            const slotName = getHunkSeparatorSlotName(type, hunkIndex);\n            linesAST.push(\n              createSeparator({\n                type: hunkSeparators,\n                content: getModifiedLinesString(lines),\n                expandIndex: expandable ? hunkIndex : undefined,\n                slotName,\n                isFirstHunk,\n                isLastHunk: false,\n              })\n            );\n            hunkData.push({ slotName, lines, type, expandable });\n          }\n        } else if (hunkSeparators === 'metadata' && hunk.hunkSpecs != null) {\n          linesAST.push(\n            createSeparator({\n              type: 'metadata',\n              content: hunk.hunkSpecs,\n              isFirstHunk,\n              isLastHunk: false,\n            })\n          );\n        } else if (hunkSeparators === 'simple' && hunkIndex > 0) {\n          linesAST.push(\n            createSeparator({ type: 'simple', isFirstHunk, isLastHunk: false })\n          );\n        }\n      }\n      for (const line of getLineNodes(nodes)) {\n        linesAST.push(line);\n      }\n      if (\n        isLastHunk &&\n        !this.isHunkExpanded(hunkIndex + 1) &&\n        this.diff?.newLines != null &&\n        (hunkSeparators === 'line-info' || hunkSeparators === 'custom')\n      ) {\n        const lines =\n          this.diff.newLines.length -\n          (hunk.additionStart + hunk.additionCount - 1);\n        if (lines > 0) {\n          const slotName = getHunkSeparatorSlotName(type, hunkIndex + 1);\n          linesAST.push(\n            createSeparator({\n              type: hunkSeparators,\n              content: getModifiedLinesString(lines),\n              expandIndex: expandable ? hunkIndex + 1 : undefined,\n              slotName,\n              isFirstHunk: false,\n              isLastHunk,\n            })\n          );\n          hunkData.push({ slotName, lines, type, expandable });\n        }\n      }\n    };\n\n    if (unified.content.length > 0) {\n      generateLinesAST('unified', unified, unifiedAST);\n    }\n\n    if (deletions.content.length > 0) {\n      generateLinesAST('deletions', deletions, deletionsAST);\n    }\n\n    if (additions.content.length > 0) {\n      generateLinesAST('additions', additions, additionsAST);\n    }\n  }\n\n  private processLines(\n    hunk: Hunk,\n    hunkIndex: number,\n    prevHunk: Hunk | undefined,\n    isLastHunk: boolean\n  ): ProcessLinesReturn {\n    const {\n      maxLineLengthForHighlighting,\n      diffStyle,\n      expandUnchanged,\n      lineDiffType,\n      maxLineDiffLength,\n    } = this.getOptionsWithDefaults();\n    const { deletionAnnotations, additionAnnotations } = this;\n    // NOTE(amadeus): We will probably need to rectify this\n    // for full additions/deletions\n    const unified = diffStyle === 'unified';\n    let hasLongLines = false;\n\n    const additionContent: string[] = [];\n    const additionLineInfo: Record<number, LineInfo | undefined> = {};\n    let additionLineNumber = hunk.additionStart - 1;\n\n    const deletionContent: string[] = [];\n    const deletionLineInfo: Record<number, LineInfo | undefined> = {};\n    let deletionLineNumber = hunk.deletedStart - 1;\n\n    const unifiedContent: string[] = [];\n    const unifiedLineInfo: Record<number, LineInfo | undefined> = {};\n\n    const diffGroups: ChangeHunk[] = [];\n    const unresolvedSpans: UnresolvedAnnotationSpan[] = [];\n    let currentChangeGroup: ChangeHunk | undefined;\n\n    function resolveUnresolvedSpans() {\n      if (currentChangeGroup == null) {\n        if (unresolvedSpans.length > 0) {\n          console.error(\n            'DiffHunksRenderer.processLines: resolveUnresolvedSpans: In a weird state...',\n            unresolvedSpans\n          );\n        }\n        return;\n      }\n      for (const unresolvedSpan of unresolvedSpans) {\n        const deletionIndex =\n          currentChangeGroup.deletionStartIndex + unresolvedSpan.hunkIndex;\n        const additionIndex =\n          currentChangeGroup.additionStartIndex + unresolvedSpan.hunkIndex;\n        const resolvedSpan: AnnotationSpan = {\n          type: 'annotation',\n          hunkIndex,\n          lineIndex: unresolvedSpan.span.lineIndex,\n          annotations: [],\n        };\n        if (unresolvedSpan.type === 'addition') {\n          pushOrMergeSpan(\n            resolvedSpan,\n            Math.min(\n              deletionIndex,\n              currentChangeGroup.deletionStartIndex +\n                currentChangeGroup.deletionLines.length\n            ),\n            deletionLineInfo\n          );\n        } else {\n          pushOrMergeSpan(\n            resolvedSpan,\n            Math.min(\n              additionIndex,\n              currentChangeGroup.additionStartIndex +\n                currentChangeGroup.additionLines.length\n            ),\n            additionLineInfo\n          );\n        }\n      }\n      unresolvedSpans.length = 0;\n    }\n\n    function addToChangeGroup(\n      type: 'addition' | 'deletion',\n      line: string,\n      span?: AnnotationSpan\n    ): ChangeHunk {\n      if (currentChangeGroup == null) {\n        currentChangeGroup = {\n          // In unified layout, deletionLineIndex and additionLineIndex won't\n          // be usable, and we will have to compute start indexes as we are\n          // iterating\n          deletionStartIndex: unified ? -1 : deletionContent.length,\n          additionStartIndex: unified ? -1 : additionContent.length,\n          deletionLines: [],\n          additionLines: [],\n          diffGroupStartIndex: lineIndex,\n        };\n        diffGroups.push(currentChangeGroup);\n      }\n\n      if (unified) {\n        if (\n          type === 'deletion' &&\n          currentChangeGroup.deletionStartIndex === -1\n        ) {\n          currentChangeGroup.deletionStartIndex = unifiedContent.length;\n        }\n        if (\n          type === 'addition' &&\n          currentChangeGroup.additionStartIndex === -1\n        ) {\n          currentChangeGroup.additionStartIndex = unifiedContent.length;\n        }\n      }\n      if (type === 'addition') {\n        currentChangeGroup.additionLines.push(line);\n      } else {\n        currentChangeGroup.deletionLines.push(line);\n      }\n\n      if (span != null && !unified) {\n        unresolvedSpans.push({\n          type,\n          hunkIndex:\n            type === 'deletion'\n              ? currentChangeGroup.deletionLines.length\n              : currentChangeGroup.additionLines.length,\n          span,\n        });\n      }\n      return currentChangeGroup;\n    }\n\n    function createGapSpanIfNecessary() {\n      if (\n        !unified &&\n        lastType !== 'context' &&\n        lastType != null &&\n        currentChangeGroup != null\n      ) {\n        const additionGroupSize = currentChangeGroup.additionLines.length;\n        const deletionGroupSize = currentChangeGroup.deletionLines.length;\n        if (additionGroupSize > deletionGroupSize) {\n          pushOrMergeSpan(\n            { type: 'gap', rows: additionGroupSize - deletionGroupSize },\n            deletionContent.length,\n            deletionLineInfo\n          );\n        } else if (deletionGroupSize > additionGroupSize) {\n          pushOrMergeSpan(\n            { type: 'gap', rows: deletionGroupSize - additionGroupSize },\n            additionContent.length,\n            additionLineInfo\n          );\n        }\n      }\n      resolveUnresolvedSpans();\n    }\n\n    const processRawLine = (\n      line: string,\n      type: HunkLineType,\n      isExpandedContext: boolean = false\n    ) => {\n      lineIndex++;\n      if (type === 'context') {\n        createGapSpanIfNecessary();\n      }\n      if (type === 'context') {\n        if (currentChangeGroup != null) {\n          lineIndex =\n            currentChangeGroup.diffGroupStartIndex +\n            Math.max(\n              currentChangeGroup.additionLines.length,\n              currentChangeGroup.deletionLines.length\n            );\n        }\n        currentChangeGroup = undefined;\n        if (unified) {\n          unifiedContent.push(line);\n          unifiedLineInfo[unifiedContent.length] = {\n            type: isExpandedContext ? 'context-expanded' : 'context',\n            lineNumber: additionLineNumber + 1,\n            lineIndex,\n          };\n          const span = createMirroredAnnotationSpan({\n            deletionLineNumber: deletionLineNumber + 1,\n            additionLineNumber: additionLineNumber + 1,\n            hunkIndex,\n            lineIndex: unifiedContent.length,\n            deletionAnnotations,\n            additionAnnotations,\n            unified: true,\n          });\n          pushOrMergeSpan(span, unifiedContent.length, unifiedLineInfo);\n        } else {\n          deletionContent.push(line);\n          additionContent.push(line);\n          deletionLineInfo[deletionContent.length] = {\n            type: isExpandedContext ? 'context-expanded' : 'context',\n            lineNumber: deletionLineNumber + 1,\n            lineIndex,\n          };\n          additionLineInfo[additionContent.length] = {\n            type: isExpandedContext ? 'context-expanded' : 'context',\n            lineNumber: additionLineNumber + 1,\n            lineIndex,\n          };\n          const [deletionSpan, additionSpan] = createMirroredAnnotationSpan({\n            deletionLineNumber: deletionLineNumber + 1,\n            additionLineNumber: additionLineNumber + 1,\n            hunkIndex,\n            lineIndex,\n            deletionAnnotations,\n            additionAnnotations,\n            unified: false,\n          });\n          pushOrMergeSpan(\n            deletionSpan,\n            deletionContent.length,\n            deletionLineInfo\n          );\n          pushOrMergeSpan(\n            additionSpan,\n            additionContent.length,\n            additionLineInfo\n          );\n        }\n        additionLineNumber++;\n        deletionLineNumber++;\n      }\n      // TODO(amadeus): Metadata shouldn't render it's own line, as that could\n      // theoretically mess with code output... we should stuff it into the\n      // appropriate line info\n      else if (type === 'metadata') {\n        const lineInfo: LineInfo = {\n          type:\n            lastType === 'addition'\n              ? 'change-addition'\n              : lastType === 'deletion'\n                ? 'change-deletion'\n                : 'context',\n          // NOTE(amadeus): Metadata lines do not have line numbers associated\n          // with them\n          lineNumber: -1,\n          lineIndex: -1,\n          metadataContent: line.trim(),\n        };\n        // Push a filler blank line so we have something to render\n        if (unified) {\n          unifiedContent.push('\\n');\n          unifiedLineInfo[unifiedContent.length] = lineInfo;\n        } else {\n          if (lastType === 'context' || lastType === 'deletion') {\n            deletionContent.push('\\n');\n            deletionLineInfo[deletionContent.length] = lineInfo;\n            addToChangeGroup('deletion', '\\n');\n          }\n          if (lastType === 'context' || lastType === 'addition') {\n            additionContent.push('\\n');\n            additionLineInfo[additionContent.length] = lineInfo;\n            addToChangeGroup('addition', '\\n');\n          }\n        }\n      } else if (type === 'deletion') {\n        const { content, lineInfo } = (() =>\n          unified\n            ? { content: unifiedContent, lineInfo: unifiedLineInfo }\n            : { content: deletionContent, lineInfo: deletionLineInfo })();\n        const span = createSingleAnnotationSpan({\n          rowNumber: deletionLineNumber + 1,\n          hunkIndex,\n          lineIndex,\n          annotationMap: this.deletionAnnotations,\n        });\n        addToChangeGroup('deletion', line, span);\n        content.push(line);\n        lineInfo[content.length] = {\n          type: 'change-deletion',\n          lineNumber: deletionLineNumber + 1,\n          lineIndex,\n        };\n        pushOrMergeSpan(span, content.length, lineInfo);\n        deletionLineNumber++;\n      } else if (type === 'addition') {\n        // Reset diffLineIndex back to start if we are jumping columns\n        if (lastType === 'deletion' && !unified) {\n          lineIndex = currentChangeGroup?.diffGroupStartIndex ?? lineIndex;\n        }\n        const { content, lineInfo } = (() =>\n          unified\n            ? { content: unifiedContent, lineInfo: unifiedLineInfo }\n            : { content: additionContent, lineInfo: additionLineInfo })();\n        const span = createSingleAnnotationSpan({\n          rowNumber: additionLineNumber + 1,\n          hunkIndex,\n          lineIndex,\n          annotationMap: this.additionAnnotations,\n        });\n        addToChangeGroup('addition', line, span);\n        content.push(line);\n        lineInfo[content.length] = {\n          type: 'change-addition',\n          lineNumber: additionLineNumber + 1,\n          lineIndex,\n        };\n        pushOrMergeSpan(span, content.length, lineInfo);\n        additionLineNumber++;\n      }\n\n      lastType = type;\n    };\n\n    let lineIndex = -1;\n    let lastType: HunkLineType | undefined;\n\n    // Proses hunk expanded content if expanded\n    if (this.isHunkExpanded(hunkIndex) && this.diff?.newLines != null) {\n      const { expandAddedStart, expandDeletedStart } = (() => {\n        if (prevHunk != null) {\n          return {\n            expandAddedStart:\n              prevHunk.additionStart + prevHunk.additionCount - 1,\n            expandDeletedStart:\n              prevHunk.deletedStart + prevHunk.deletedCount - 1,\n          };\n        }\n        return { expandAddedStart: 0, expandDeletedStart: 0 };\n      })();\n      if (additionLineNumber - expandAddedStart > 0) {\n        additionLineNumber = expandAddedStart;\n        deletionLineNumber = expandDeletedStart;\n        for (let i = additionLineNumber; i < hunk.additionStart - 1; i++) {\n          const line = this.diff.newLines[i];\n          hasLongLines =\n            hasLongLines || line.length > maxLineLengthForHighlighting;\n          processRawLine(line, 'context', expandUnchanged ? false : true);\n        }\n      }\n    }\n\n    // Process diff content\n    for (const rawLine of hunk.hunkContent ?? []) {\n      const { line, type, longLine } = parseLineType(\n        rawLine,\n        maxLineLengthForHighlighting\n      );\n      hasLongLines = hasLongLines || longLine;\n      processRawLine(line, type);\n    }\n    createGapSpanIfNecessary();\n\n    // Process final expansion hunk if necessary\n    if (\n      isLastHunk &&\n      this.isHunkExpanded(hunkIndex + 1) &&\n      this.diff?.newLines != null\n    ) {\n      for (let i = additionLineNumber; i < this.diff.newLines.length; i++) {\n        const line = this.diff.newLines[i];\n        hasLongLines =\n          hasLongLines || line.length > maxLineLengthForHighlighting;\n        processRawLine(line, 'context', expandUnchanged ? false : true);\n      }\n    }\n    resolveUnresolvedSpans();\n\n    const { unifiedDecorations, deletionDecorations, additionDecorations } =\n      parseDecorations({\n        diffGroups,\n        lineDiffType,\n        diffStyle,\n        maxLineDiffLength,\n      });\n    return {\n      hasLongLines,\n      additions: {\n        content: additionContent,\n        lineInfo: additionLineInfo,\n        decorations: additionDecorations,\n      },\n      deletions: {\n        content: deletionContent,\n        lineInfo: deletionLineInfo,\n        decorations: deletionDecorations,\n      },\n      unified: {\n        content: unifiedContent,\n        lineInfo: unifiedLineInfo,\n        decorations: unifiedDecorations,\n      },\n    };\n  }\n}\n\nfunction getLineNodes(nodes: Root): ElementContent[] {\n  let firstChild: RootContent | Element | Root | null = nodes.children[0];\n  while (firstChild != null) {\n    if (firstChild.type === 'element' && firstChild.tagName === 'code') {\n      return firstChild.children;\n    }\n    if ('children' in firstChild) {\n      firstChild = firstChild.children[0];\n    } else {\n      firstChild = null;\n    }\n  }\n  console.error(nodes);\n  throw new Error(\n    'DiffHunksRenderer.getNodesToRender: Unable to find children'\n  );\n}\n\nfunction getModifiedLinesString(lines: number) {\n  return `${lines} unmodified line${lines > 1 ? 's' : ''}`;\n}\n", "import type { Element } from 'hast';\nimport { toHtml } from 'hast-util-to-html';\n\nimport { getSharedHighlighter, hasLoadedThemes } from './SharedHighlighter';\nimport { DEFAULT_THEMES } from './constants';\nimport type {\n  FileContents,\n  FileDiffMetadata,\n  PJSHighlighter,\n  PJSThemeNames,\n  ThemeTypes,\n  ThemesType,\n} from './types';\nimport { getHighlighterOptions } from './utils/getHighlighterOptions';\nimport { getThemes } from './utils/getThemes';\nimport { createFileHeaderElement } from './utils/hast_utils';\n\nexport interface FileHeaderRendererOptions {\n  theme?: PJSThemeNames | ThemesType;\n  themeType?: ThemeTypes;\n}\n\nexport class FileHeaderRenderer {\n  private highlighter: PJSHighlighter | undefined;\n\n  constructor(\n    public options: FileHeaderRendererOptions = { theme: DEFAULT_THEMES }\n  ) {}\n\n  cleanUp(): void {\n    this.highlighter = undefined;\n    this.queuedRenderFileOrDiff = undefined;\n    this.queuedRender = undefined;\n  }\n\n  private mergeOptions(options: Partial<FileHeaderRendererOptions>): void {\n    this.options = { ...this.options, ...options };\n  }\n\n  setOptions(options: FileHeaderRendererOptions): void {\n    this.options = options;\n  }\n\n  setThemeType(themeType: ThemeTypes): void {\n    if ((this.options.themeType ?? 'system') === themeType) {\n      return;\n    }\n    this.mergeOptions({ themeType });\n  }\n\n  private async initializeHighlighter(): Promise<PJSHighlighter> {\n    this.highlighter = await getSharedHighlighter(\n      getHighlighterOptions(undefined, this.options)\n    );\n    return this.highlighter;\n  }\n\n  fileOrDiff: FileDiffMetadata | FileContents | undefined;\n  private queuedRenderFileOrDiff: FileDiffMetadata | FileContents | undefined;\n  private queuedRender: Promise<Element | undefined> | undefined;\n  async render(\n    fileOrDiff: FileDiffMetadata | FileContents\n  ): Promise<Element | undefined> {\n    this.queuedRenderFileOrDiff = fileOrDiff;\n    if (this.queuedRender != null) {\n      return this.queuedRender;\n    }\n    this.queuedRender = (async () => {\n      if (!hasLoadedThemes(getThemes(this.options.theme))) {\n        this.highlighter = undefined;\n      }\n      this.highlighter ??= await this.initializeHighlighter();\n      if (this.queuedRenderFileOrDiff == null) {\n        // If we get in here, it's likely we called cleanup and therefore we\n        // should just return early with empty result\n        return undefined;\n      }\n      return this.renderHeader(this.queuedRenderFileOrDiff, this.highlighter);\n    })();\n    const result = await this.queuedRender;\n    this.queuedRenderFileOrDiff = undefined;\n    this.queuedRender = undefined;\n    return result;\n  }\n\n  private renderHeader(\n    fileOrDiff: FileDiffMetadata | FileContents,\n    highlighter: PJSHighlighter\n  ): Element {\n    this.fileOrDiff = fileOrDiff;\n    return createFileHeaderElement({\n      ...this.options,\n      fileOrDiff,\n      highlighter,\n    });\n  }\n\n  renderResultToHTML(element: Element): string {\n    return toHtml(element);\n  }\n}\n", "import type {\n  AnnotationSide,\n  DiffLineEventBaseProps,\n  LineEventBaseProps,\n} from './types';\n\nexport type LogTypes = 'click' | 'move' | 'both' | 'none';\n\nexport type MouseEventManagerMode = 'file' | 'diff';\n\nexport interface OnLineClickProps extends LineEventBaseProps {\n  event: PointerEvent;\n}\n\nexport interface OnLineEnterLeaveProps extends LineEventBaseProps {\n  event: MouseEvent;\n}\n\nexport interface OnDiffLineClickProps extends DiffLineEventBaseProps {\n  event: PointerEvent;\n}\n\nexport interface OnDiffLineEnterLeaveProps extends DiffLineEventBaseProps {\n  event: MouseEvent;\n}\n\ntype HandleMouseEventProps =\n  | { eventType: 'click'; event: PointerEvent }\n  | { eventType: 'move'; event: MouseEvent };\n\ntype EventClickProps<TMode extends MouseEventManagerMode> = TMode extends 'file'\n  ? OnLineClickProps\n  : OnDiffLineClickProps;\n\ntype EventEnterLeaveProps<TMode extends MouseEventManagerMode> =\n  TMode extends 'file' ? OnLineEnterLeaveProps : OnDiffLineEnterLeaveProps;\n\ntype EventBaseProps<TMode extends MouseEventManagerMode> = TMode extends 'file'\n  ? LineEventBaseProps\n  : DiffLineEventBaseProps;\n\ninterface ExpandoEventProps {\n  type: 'line-info';\n  hunkIndex: number;\n}\n\ntype GetLineDataResult<TMode extends MouseEventManagerMode> =\n  TMode extends 'file'\n    ? LineEventBaseProps | ExpandoEventProps | undefined\n    : DiffLineEventBaseProps | ExpandoEventProps | undefined;\n\ntype LineEventData<TMode extends MouseEventManagerMode> = TMode extends 'file'\n  ? LineEventBaseProps\n  : DiffLineEventBaseProps;\n\nfunction isLineEventData<TMode extends MouseEventManagerMode>(\n  data: GetLineDataResult<TMode>,\n  mode: TMode\n): data is LineEventData<TMode> {\n  if (data == null) return false;\n  if (mode === 'file') {\n    return data.type === 'line';\n  } else {\n    return data.type === 'diff-line';\n  }\n}\n\nfunction isExpandoEventData(\n  data:\n    | LineEventBaseProps\n    | DiffLineEventBaseProps\n    | ExpandoEventProps\n    | undefined\n): data is ExpandoEventProps {\n  return data?.type === 'line-info';\n}\n\nexport interface MouseEventManagerBaseOptions<\n  TMode extends MouseEventManagerMode,\n> {\n  onLineClick?(props: EventClickProps<TMode>): unknown;\n  onLineNumberClick?(props: EventClickProps<TMode>): unknown;\n  onLineEnter?(props: EventEnterLeaveProps<TMode>): unknown;\n  onLineLeave?(props: EventEnterLeaveProps<TMode>): unknown;\n  __debugMouseEvents?: LogTypes;\n}\n\nexport interface MouseEventManagerOptions<TMode extends MouseEventManagerMode>\n  extends MouseEventManagerBaseOptions<TMode> {\n  onHunkExpand?(hunkIndex: number): unknown;\n}\n\nexport class MouseEventManager<TMode extends MouseEventManagerMode> {\n  private hoveredRow: EventBaseProps<TMode> | undefined;\n  private pre: HTMLPreElement | undefined;\n\n  constructor(\n    private mode: TMode,\n    private options: MouseEventManagerOptions<TMode>\n  ) {}\n\n  setOptions(options: MouseEventManagerOptions<TMode>): void {\n    this.options = options;\n  }\n\n  cleanUp(): void {\n    this.pre?.removeEventListener('click', this.handleMouseClick);\n    this.pre?.removeEventListener('mousemove', this.handleMouseMove);\n    this.pre?.removeEventListener('mouseout', this.handleMouseLeave);\n    delete this.pre?.dataset.interactiveLines;\n    delete this.pre?.dataset.interactiveLineNumbers;\n    this.pre = undefined;\n  }\n\n  setup(pre: HTMLPreElement): void {\n    const {\n      __debugMouseEvents,\n      onLineClick,\n      onLineNumberClick,\n      onLineEnter,\n      onLineLeave,\n      onHunkExpand,\n    } = this.options;\n\n    this.cleanUp();\n    this.pre = pre;\n\n    if (\n      onLineClick != null ||\n      onLineNumberClick != null ||\n      onHunkExpand != null\n    ) {\n      pre.addEventListener('click', this.handleMouseClick);\n      if (onLineClick != null) {\n        pre.dataset.interactiveLines = '';\n      } else if (onLineNumberClick != null) {\n        pre.dataset.interactiveLineNumbers = '';\n      }\n      debugLogIfEnabled(\n        __debugMouseEvents,\n        'click',\n        'FileDiff.DEBUG.attachEventListeners: Attaching click events for:',\n        (() => {\n          const reasons: string[] = [];\n          if (__debugMouseEvents === 'both' || __debugMouseEvents === 'click') {\n            if (onLineClick != null) {\n              reasons.push('onLineClick');\n            }\n            if (onLineNumberClick != null) {\n              reasons.push('onLineNumberClick');\n            }\n            if (onHunkExpand != null) {\n              reasons.push('expandable hunk separators');\n            }\n          }\n          return reasons;\n        })()\n      );\n    }\n    if (onLineEnter != null || onLineLeave != null) {\n      pre.addEventListener('mousemove', this.handleMouseMove);\n      debugLogIfEnabled(\n        __debugMouseEvents,\n        'move',\n        'FileDiff.DEBUG.attachEventListeners: Attaching mouse move event'\n      );\n      if (onLineLeave != null) {\n        pre.addEventListener('mouseleave', this.handleMouseLeave);\n        debugLogIfEnabled(\n          __debugMouseEvents,\n          'move',\n          'FileDiff.DEBUG.attachEventListeners: Attaching mouse leave event'\n        );\n      }\n    }\n  }\n\n  handleMouseClick = (event: PointerEvent): void => {\n    debugLogIfEnabled(\n      this.options.__debugMouseEvents,\n      'click',\n      'FileDiff.DEBUG.handleMouseClick:',\n      event\n    );\n    this.handleMouseEvent({ eventType: 'click', event });\n  };\n\n  handleMouseMove = (event: MouseEvent): void => {\n    debugLogIfEnabled(\n      this.options.__debugMouseEvents,\n      'move',\n      'FileDiff.DEBUG.handleMouseMove:',\n      event\n    );\n    this.handleMouseEvent({ eventType: 'move', event });\n  };\n\n  handleMouseLeave = (event: MouseEvent): void => {\n    const { __debugMouseEvents } = this.options;\n    debugLogIfEnabled(\n      __debugMouseEvents,\n      'move',\n      'FileDiff.DEBUG.handleMouseLeave: no event'\n    );\n    if (this.hoveredRow == null) {\n      debugLogIfEnabled(\n        __debugMouseEvents,\n        'move',\n        'FileDiff.DEBUG.handleMouseLeave: returned early, no .hoveredRow'\n      );\n      return;\n    }\n    this.options.onLineLeave?.({\n      ...this.hoveredRow,\n      event,\n    } as EventEnterLeaveProps<TMode>);\n    this.hoveredRow = undefined;\n  };\n\n  private handleMouseEvent({ eventType, event }: HandleMouseEventProps) {\n    const { __debugMouseEvents } = this.options;\n    const composedPath = event.composedPath();\n    debugLogIfEnabled(\n      __debugMouseEvents,\n      eventType,\n      'FileDiff.DEBUG.handleMouseEvent:',\n      { eventType, composedPath }\n    );\n    const data = this.getLineData(composedPath);\n    debugLogIfEnabled(\n      __debugMouseEvents,\n      eventType,\n      'FileDiff.DEBUG.handleMouseEvent: getLineData result:',\n      data\n    );\n    const {\n      onLineClick,\n      onLineNumberClick,\n      onLineEnter,\n      onLineLeave,\n      onHunkExpand,\n    } = this.options;\n    switch (eventType) {\n      case 'move': {\n        if (\n          isLineEventData(data, this.mode) &&\n          this.hoveredRow?.lineElement === data.lineElement\n        ) {\n          debugLogIfEnabled(\n            __debugMouseEvents,\n            'move',\n            \"FileDiff.DEBUG.handleMouseEvent: switch, 'move', returned early because same line\"\n          );\n          break;\n        }\n        if (this.hoveredRow != null) {\n          debugLogIfEnabled(\n            __debugMouseEvents,\n            'move',\n            \"FileDiff.DEBUG.handleMouseEvent: switch, 'move', clearing an existing hovered row and firing onLineLeave\"\n          );\n          onLineLeave?.({\n            ...this.hoveredRow,\n            event,\n          } as EventEnterLeaveProps<TMode>);\n          this.hoveredRow = undefined;\n        }\n        if (isLineEventData(data, this.mode)) {\n          debugLogIfEnabled(\n            __debugMouseEvents,\n            'move',\n            \"FileDiff.DEBUG.handleMouseEvent: switch, 'move', setting up a new hoveredRow and firing onLineEnter\"\n          );\n          this.hoveredRow = data;\n          onLineEnter?.({\n            ...this.hoveredRow,\n            event,\n          } as EventEnterLeaveProps<TMode>);\n        }\n        break;\n      }\n      case 'click':\n        debugLogIfEnabled(\n          __debugMouseEvents,\n          'click',\n          \"FileDiff.DEBUG.handleMouseEvent: switch, 'click', with data:\",\n          data\n        );\n        if (data == null) break;\n        if (isExpandoEventData(data) && onHunkExpand != null) {\n          debugLogIfEnabled(\n            __debugMouseEvents,\n            'click',\n            \"FileDiff.DEBUG.handleMouseEvent: switch, 'click', expanding a hunk\"\n          );\n          onHunkExpand(data.hunkIndex);\n          break;\n        }\n        if (isLineEventData(data, this.mode)) {\n          if (onLineNumberClick != null && data.numberColumn) {\n            debugLogIfEnabled(\n              __debugMouseEvents,\n              'click',\n              \"FileDiff.DEBUG.handleMouseEvent: switch, 'click', firing 'onLineNumberClick'\"\n            );\n            onLineNumberClick({ ...data, event } as EventClickProps<TMode>);\n          } else if (onLineClick != null) {\n            debugLogIfEnabled(\n              __debugMouseEvents,\n              'click',\n              \"FileDiff.DEBUG.handleMouseEvent: switch, 'click', firing 'onLineClick'\"\n            );\n            onLineClick({ ...data, event } as EventClickProps<TMode>);\n          } else {\n            debugLogIfEnabled(\n              __debugMouseEvents,\n              'click',\n              \"FileDiff.DEBUG.handleMouseEvent: switch, 'click', fell through, no event to fire\"\n            );\n          }\n        }\n        break;\n    }\n  }\n\n  private getLineData(path: EventTarget[]): GetLineDataResult<TMode> {\n    let numberColumn = false;\n    const lineElement = path.find((element) => {\n      if (!(element instanceof HTMLElement)) {\n        return false;\n      }\n      numberColumn = numberColumn || 'columnNumber' in element.dataset;\n      return 'line' in element.dataset || 'expandIndex' in element.dataset;\n    });\n    if (!(lineElement instanceof HTMLElement)) return undefined;\n    if (lineElement.dataset.expandIndex != null) {\n      const hunkIndex = parseInt(lineElement.dataset.expandIndex);\n      if (isNaN(hunkIndex)) {\n        return undefined;\n      }\n      return {\n        type: 'line-info',\n        hunkIndex,\n      };\n    }\n    const lineNumber = parseInt(lineElement.dataset.line ?? '');\n    if (isNaN(lineNumber)) return;\n    const lineType = lineElement.dataset.lineType;\n    if (\n      lineType !== 'context' &&\n      lineType !== 'context-expanded' &&\n      lineType !== 'change-deletion' &&\n      lineType !== 'change-addition'\n    ) {\n      return undefined;\n    }\n\n    if (this.mode === 'file') {\n      return {\n        type: 'line',\n        lineElement,\n        lineNumber,\n        numberColumn,\n      } as GetLineDataResult<TMode>;\n    }\n\n    const annotationSide: AnnotationSide = (() => {\n      if (lineType === 'change-deletion') {\n        return 'deletions';\n      }\n      if (lineType === 'change-addition') {\n        return 'additions';\n      }\n      const parent = lineElement.closest('[data-code]');\n      if (!(parent instanceof HTMLElement)) {\n        return 'additions';\n      }\n      return 'deletions' in parent.dataset ? 'deletions' : 'additions';\n    })();\n\n    return {\n      type: 'diff-line',\n      annotationSide,\n      lineType,\n      lineElement,\n      lineNumber,\n      numberColumn,\n    } as GetLineDataResult<TMode>;\n  }\n}\n\nfunction debugLogIfEnabled(\n  debugLogType: LogTypes | undefined = 'none',\n  logIfType: 'move' | 'click',\n  ...args: unknown[]\n) {\n  switch (debugLogType) {\n    case 'none':\n      return;\n    case 'both':\n      break;\n    case 'click':\n      if (logIfType !== 'click') {\n        return;\n      }\n      break;\n    case 'move':\n      if (logIfType !== 'move') {\n        return;\n      }\n      break;\n  }\n  console.log(...args);\n}\n\nexport function getMouseEventOptions<TMode extends MouseEventManagerMode>(\n  {\n    onLineClick,\n    onLineNumberClick,\n    onLineEnter,\n    onLineLeave,\n    __debugMouseEvents,\n  }: MouseEventManagerBaseOptions<TMode>,\n  onHunkExpand?: (hunkIndex: number) => unknown\n): MouseEventManagerOptions<TMode> {\n  return {\n    onLineClick,\n    onLineNumberClick,\n    onLineEnter,\n    onLineLeave,\n    __debugMouseEvents,\n    onHunkExpand,\n  };\n}\n", "import type { ObservedAnnotationNodes, ObservedGridNodes } from './types';\n\nexport class ResizeManager {\n  private observedNodes = new Map<\n    HTMLElement,\n    ObservedAnnotationNodes | ObservedGridNodes\n  >();\n\n  cleanUp(): void {\n    // Disconnect any existing observer\n    this.resizeObserver?.disconnect();\n    this.observedNodes.clear();\n  }\n\n  private resizeObserver: ResizeObserver | undefined;\n\n  setup(pre: HTMLPreElement): void {\n    this.cleanUp();\n\n    const annotationElements = pre.querySelectorAll(\n      '[data-line-annotation*=\",\"]'\n    );\n\n    this.resizeObserver ??= new ResizeObserver(this.handleResizeObserver);\n    const codeElements = pre.querySelectorAll('code');\n\n    for (const codeElement of codeElements) {\n      let numberElement = codeElement.querySelector('[data-column-number]');\n      if (!(numberElement instanceof HTMLElement)) {\n        numberElement = null;\n      }\n      const item: ObservedGridNodes = {\n        type: 'code',\n        codeElement,\n        numberElement,\n        codeWidth: 'auto',\n        numberWidth: 0,\n      };\n      this.observedNodes.set(codeElement, item);\n      this.resizeObserver.observe(codeElement);\n      if (numberElement != null) {\n        this.observedNodes.set(numberElement, item);\n        this.resizeObserver.observe(numberElement);\n      }\n    }\n\n    if (codeElements.length <= 1) {\n      return;\n    }\n\n    const elementMap = new Map<string, HTMLElement[]>();\n    for (const element of annotationElements) {\n      if (!(element instanceof HTMLElement)) {\n        continue;\n      }\n      const { lineAnnotation = '' } = element.dataset;\n      if (!/^\\d+,\\d+$/.test(lineAnnotation)) {\n        console.error(\n          'DiffFileRenderer.setupResizeObserver: Invalid element or annotation',\n          { lineAnnotation, element }\n        );\n        continue;\n      }\n      let pairs = elementMap.get(lineAnnotation);\n      if (pairs == null) {\n        pairs = [];\n        elementMap.set(lineAnnotation, pairs);\n      }\n      pairs.push(element);\n    }\n\n    for (const [key, pair] of elementMap) {\n      if (pair.length !== 2) {\n        console.error(\n          'DiffFileRenderer.setupResizeObserver: Bad Pair',\n          key,\n          pair\n        );\n        continue;\n      }\n      const [container1, container2] = pair;\n      const child1 = container1.firstElementChild;\n      const child2 = container2.firstElementChild;\n      if (\n        !(container1 instanceof HTMLElement) ||\n        !(container2 instanceof HTMLElement) ||\n        !(child1 instanceof HTMLElement) ||\n        !(child2 instanceof HTMLElement)\n      ) {\n        continue;\n      }\n      const item: ObservedAnnotationNodes = {\n        type: 'annotations',\n        column1: {\n          container: container1,\n          child: child1,\n          childHeight: 0,\n        },\n        column2: {\n          container: container2,\n          child: child2,\n          childHeight: 0,\n        },\n        currentHeight: 'auto',\n      };\n      this.observedNodes.set(child1, item);\n      this.observedNodes.set(child2, item);\n      this.resizeObserver.observe(child1);\n      this.resizeObserver.observe(child2);\n    }\n  }\n\n  private handleResizeObserver = (entries: ResizeObserverEntry[]) => {\n    for (const entry of entries) {\n      const { target, borderBoxSize } = entry;\n      if (!(target instanceof HTMLElement)) {\n        console.error(\n          'FileDiff.handleResizeObserver: Invalid element for ResizeObserver',\n          entry\n        );\n        continue;\n      }\n      const item = this.observedNodes.get(target);\n      if (item == null) {\n        console.error(\n          'FileDiff.handleResizeObserver: Not a valid observed node',\n          entry\n        );\n        continue;\n      }\n      const specs = borderBoxSize[0];\n      if (item.type === 'annotations') {\n        const column = (() => {\n          if (target === item.column1.child) {\n            return item.column1;\n          }\n          if (target === item.column2.child) {\n            return item.column2;\n          }\n          return undefined;\n        })();\n\n        if (column == null) {\n          console.error(\n            `FileDiff.handleResizeObserver: Couldn't find a column for`,\n            { item, target }\n          );\n          continue;\n        }\n\n        column.childHeight = specs.blockSize;\n        const newHeight = Math.max(\n          item.column1.childHeight,\n          item.column2.childHeight\n        );\n        if (newHeight !== item.currentHeight) {\n          item.currentHeight = Math.max(newHeight, 0);\n          item.column1.container.style.setProperty(\n            '--pjs-annotation-min-height',\n            `${item.currentHeight}px`\n          );\n          item.column2.container.style.setProperty(\n            '--pjs-annotation-min-height',\n            `${item.currentHeight}px`\n          );\n        }\n      } else if (item.type === 'code') {\n        if (target === item.codeElement) {\n          if (specs.inlineSize !== item.codeWidth) {\n            item.codeWidth = specs.inlineSize;\n            item.codeElement.style.setProperty(\n              '--pjs-column-content-width',\n              `${Math.max(item.codeWidth - item.numberWidth, 0)}px`\n            );\n            item.codeElement.style.setProperty(\n              '--pjs-column-width',\n              `${item.codeWidth}px`\n            );\n          }\n        } else if (target === item.numberElement) {\n          if (specs.inlineSize !== item.numberWidth) {\n            item.numberWidth = specs.inlineSize;\n            item.codeElement.style.setProperty(\n              '--pjs-column-number-width',\n              `${item.numberWidth}px`\n            );\n            // We probably need to update code width variable if\n            // `numberWidth` changed\n            if (item.codeWidth !== 'auto') {\n              item.codeElement.style.setProperty(\n                '--pjs-column-content-width',\n                `${Math.max(item.codeWidth - item.numberWidth, 0)}px`\n              );\n            }\n          }\n        }\n      }\n    }\n  };\n}\n", "import { getTokenStyleObject, stringifyTokenStyle } from 'shiki';\nimport { DEFAULT_THEMES } from 'src/constants';\n\nimport type {\n  PJSHighlighter,\n  PJSThemeNames,\n  ThemeTypes,\n  ThemedToken,\n  ThemesType,\n} from '../types';\nimport { getHighlighterThemeStyles } from './getHighlighterThemeStyles';\n\nexport function createSpanFromToken(token: ThemedToken): HTMLSpanElement {\n  const element = document.createElement('span');\n  const style = token.htmlStyle ?? getTokenStyleObject(token);\n  element.style = stringifyTokenStyle(style);\n  element.textContent = token.content;\n  return element;\n}\n\nexport function createRow(line: number): {\n  row: HTMLElement;\n  content: HTMLElement;\n} {\n  const row = document.createElement('div');\n  row.dataset.line = `${line}`;\n\n  const lineColumn = document.createElement('div');\n  lineColumn.dataset.columnNumber = '';\n  lineColumn.textContent = `${line}`;\n\n  const content = document.createElement('div');\n  content.dataset.columnContent = '';\n\n  row.appendChild(lineColumn);\n  row.appendChild(content);\n  return { row, content };\n}\n\ninterface SetupWrapperNodesProps {\n  theme?: PJSThemeNames | ThemesType;\n  pre: HTMLPreElement;\n  highlighter: PJSHighlighter;\n  split: boolean;\n  wrap: boolean;\n  themeType: ThemeTypes;\n  diffIndicators: 'bars' | 'classic' | 'none';\n  disableBackground: boolean;\n  totalLines: number;\n}\n\ninterface CreateCodeNodeProps {\n  pre?: HTMLPreElement;\n  columnType?: 'additions' | 'deletions' | 'unified';\n}\n\nexport function createCodeNode({\n  pre,\n  columnType,\n}: CreateCodeNodeProps = {}): HTMLElement {\n  const code = document.createElement('code');\n  code.dataset.code = '';\n  if (columnType != null) {\n    code.dataset[columnType] = '';\n  }\n  pre?.appendChild(code);\n  return code;\n}\n\nexport function setWrapperProps({\n  pre,\n  highlighter,\n  theme = DEFAULT_THEMES,\n  split,\n  wrap,\n  themeType,\n  diffIndicators,\n  disableBackground,\n  totalLines,\n}: SetupWrapperNodesProps): HTMLPreElement {\n  // Get theme color custom properties (e.g., --pjs-fg, --pjs-bg)\n  const styles = getHighlighterThemeStyles({ theme, highlighter });\n\n  if (themeType === 'system') {\n    delete pre.dataset.themeType;\n  } else {\n    pre.dataset.themeType = themeType;\n  }\n  if (typeof theme === 'string') {\n    const themeData = highlighter.getTheme(theme);\n    pre.dataset.themeType = themeData.type;\n  }\n  switch (diffIndicators) {\n    case 'bars':\n    case 'classic':\n      pre.dataset.indicators = diffIndicators;\n      break;\n    case 'none':\n      delete pre.dataset.indicators;\n      break;\n  }\n  if (disableBackground) {\n    delete pre.dataset.background;\n  } else {\n    pre.dataset.background = '';\n  }\n  pre.dataset.type = split ? 'split' : 'file';\n  pre.dataset.overflow = wrap ? 'wrap' : 'scroll';\n  pre.dataset.pjs = '';\n  pre.tabIndex = 0;\n  // Set theme color custom properties as inline styles on pre element\n  pre.style = styles;\n  // Set CSS custom property for line number column width\n  pre.style.setProperty(\n    '--pjs-min-number-column-width-default',\n    `${`${totalLines}`.length}ch`\n  );\n  return pre;\n}\n", "import type { Element, ElementContent, Root, RootContent } from 'hast';\nimport { toHtml } from 'hast-util-to-html';\n\nimport {\n  getSharedHighlighter,\n  hasLoadedLanguage,\n  hasLoadedThemes,\n} from './SharedHighlighter';\nimport { DEFAULT_THEMES, SPLIT_WITH_NEWLINES } from './constants';\nimport type {\n  BaseCodeOptions,\n  CodeToHastOptions,\n  DecorationItem,\n  FileContents,\n  LineAnnotation,\n  LineInfo,\n  PJSHighlighter,\n  PJSThemeNames,\n  ShikiTransformer,\n  SupportedLanguages,\n  ThemeTypes,\n} from './types';\nimport { createTransformerWithState } from './utils/createTransformerWithState';\nimport { formatCSSVariablePrefix } from './utils/formatCSSVariablePrefix';\nimport { getFiletypeFromFileName } from './utils/getFiletypeFromFileName';\nimport { getHighlighterOptions } from './utils/getHighlighterOptions';\nimport { getLineAnnotationName } from './utils/getLineAnnotationName';\nimport { getThemes } from './utils/getThemes';\nimport {\n  createHastElement,\n  createPreWrapperProperties,\n} from './utils/hast_utils';\n\ntype AnnotationLineMap<LAnnotation> = Record<\n  number,\n  LineAnnotation<LAnnotation>[] | undefined\n>;\n\nexport interface FileRenderResult {\n  codeAST: ElementContent[];\n  preNode: Element;\n  css: string;\n  totalLines: number;\n}\n\ninterface FileRendererOptions extends BaseCodeOptions {\n  startingLineNumber?: number;\n  maxLineLengthForHighlighting?: number; // 1000 is default\n}\n\nexport class FileRenderer<LAnnotation = undefined> {\n  highlighter: PJSHighlighter | undefined;\n  fileContent: string | undefined;\n\n  constructor(\n    public options: FileRendererOptions = { theme: DEFAULT_THEMES }\n  ) {}\n\n  setOptions(options: FileRendererOptions): void {\n    this.options = options;\n  }\n\n  private mergeOptions(options: Partial<FileRendererOptions>): void {\n    this.options = { ...this.options, ...options };\n  }\n\n  setThemeType(themeType: ThemeTypes): void {\n    const currentThemeType = this.options.themeType ?? 'system';\n    if (currentThemeType === themeType) {\n      return;\n    }\n    this.mergeOptions({ themeType });\n  }\n\n  private lineAnnotations: AnnotationLineMap<LAnnotation> = {};\n  setLineAnnotations(lineAnnotations: LineAnnotation<LAnnotation>[]): void {\n    this.lineAnnotations = {};\n    for (const annotation of lineAnnotations) {\n      const arr = this.lineAnnotations[annotation.lineNumber] ?? [];\n      this.lineAnnotations[annotation.lineNumber] = arr;\n      arr.push(annotation);\n    }\n  }\n\n  cleanUp(): void {\n    this.highlighter = undefined;\n    this.fileContent = undefined;\n    this.queuedFile = undefined;\n  }\n\n  private computedLang: SupportedLanguages = 'text';\n  private queuedFile: FileContents | undefined;\n  private queuedRender: Promise<FileRenderResult | undefined> | undefined;\n  async render(\n    file: FileContents,\n    useCSSClasses: boolean = false\n  ): Promise<FileRenderResult | undefined> {\n    this.queuedFile = file;\n    if (this.queuedRender != null) {\n      return this.queuedRender;\n    }\n    this.queuedRender = (async () => {\n      this.computedLang =\n        this.options.lang ?? getFiletypeFromFileName(file.name);\n      if (\n        !hasLoadedLanguage(this.computedLang) ||\n        !hasLoadedThemes(getThemes(this.options.theme))\n      ) {\n        this.highlighter = undefined;\n      }\n      this.highlighter ??= await this.initializeHighlighter();\n      if (this.queuedFile == null) {\n        return undefined;\n      }\n      return this.renderFile(this.queuedFile, this.highlighter, useCSSClasses);\n    })();\n    const result = await this.queuedRender;\n    this.queuedFile = undefined;\n    this.queuedRender = undefined;\n    return result;\n  }\n\n  private renderFile(\n    file: FileContents,\n    highlighter: PJSHighlighter,\n    useCSSClasses: boolean\n  ): FileRenderResult {\n    const { theme, themeType, disableLineNumbers = false } = this.options;\n    const { state, transformers, toClass } = createTransformerWithState({\n      disableLineNumbers,\n      useCSSClasses,\n    });\n\n    const { lineInfoMap, hasLongLines } = this.computeLineInfo(file.contents);\n    state.lineInfo = lineInfoMap;\n    const codeAST = this.getLineNodes(\n      highlighter.codeToHast(\n        file.contents.replace(/\\n$/, ''),\n        this.createHastOptions(transformers, undefined, hasLongLines)\n      )\n    );\n\n    return {\n      codeAST,\n      preNode: createHastElement({\n        tagName: 'pre',\n        properties: createPreWrapperProperties({\n          diffIndicators: 'none',\n          disableBackground: true,\n          highlighter,\n          overflow: this.options.overflow,\n          split: false,\n          theme,\n          themeType,\n          totalLines: codeAST.length,\n        }),\n      }),\n      totalLines: codeAST.length,\n      css: toClass.getCSS(),\n    };\n  }\n\n  renderFullHTML(result: FileRenderResult): string {\n    return toHtml(this.renderFullAST(result));\n  }\n\n  renderFullAST(\n    result: FileRenderResult,\n    children: ElementContent[] = []\n  ): Element {\n    children.push(\n      createHastElement({\n        tagName: 'code',\n        children: result.codeAST,\n        properties: { 'data-code': '' },\n      })\n    );\n    return { ...result.preNode, children };\n  }\n\n  renderPartialHTML(\n    children: ElementContent[],\n    includeCodeNode: boolean = false\n  ): string {\n    if (!includeCodeNode) {\n      return toHtml(children);\n    }\n    return toHtml(\n      createHastElement({\n        tagName: 'code',\n        children,\n        properties: { 'data-code': '' },\n      })\n    );\n  }\n\n  private getLineNodes(nodes: Root): ElementContent[] {\n    let firstChild: RootContent | Element | Root | null = nodes.children[0];\n    while (firstChild != null) {\n      if (firstChild.type === 'element' && firstChild.tagName === 'code') {\n        return firstChild.children;\n      }\n      if ('children' in firstChild) {\n        firstChild = firstChild.children[0];\n      } else {\n        firstChild = null;\n      }\n    }\n    console.error(nodes);\n    throw new Error(\n      'DiffHunksRenderer.getNodesToRender: Unable to find children'\n    );\n  }\n\n  private computeLineInfo(contents: string): {\n    lineInfoMap: Record<number, LineInfo | undefined>;\n    hasLongLines: boolean;\n  } {\n    const { startingLineNumber = 1, maxLineLengthForHighlighting = 1000 } =\n      this.options;\n    const lineInfoMap: Record<number, LineInfo | undefined> = {};\n    let hasLongLines = false;\n\n    let lineIndex = 0;\n    for (const line of contents.split(SPLIT_WITH_NEWLINES)) {\n      hasLongLines = hasLongLines || line.length > maxLineLengthForHighlighting;\n\n      const lineInfo: LineInfo = {\n        type: 'context',\n        lineIndex,\n        lineNumber: startingLineNumber + lineIndex,\n      };\n      const annotations = this.lineAnnotations[startingLineNumber + lineIndex];\n      if (annotations != null) {\n        lineInfo.spans = [\n          {\n            type: 'annotation',\n            hunkIndex: 0,\n            lineIndex,\n            annotations: annotations.map((annotation) =>\n              getLineAnnotationName(annotation)\n            ),\n          },\n        ];\n      }\n      lineInfoMap[lineIndex + 1] = lineInfo;\n      lineIndex++;\n    }\n    return { lineInfoMap, hasLongLines };\n  }\n\n  private createHastOptions(\n    transformers: ShikiTransformer[],\n    decorations?: DecorationItem[],\n    forceTextLang: boolean = false\n  ): CodeToHastOptions<PJSThemeNames> {\n    const { theme = DEFAULT_THEMES } = this.options;\n    if (typeof theme === 'string') {\n      return {\n        theme,\n        cssVariablePrefix: formatCSSVariablePrefix(),\n        lang: forceTextLang ? 'text' : this.computedLang,\n        defaultColor: false,\n        transformers,\n        decorations,\n      };\n    }\n    return {\n      themes: theme,\n      cssVariablePrefix: formatCSSVariablePrefix(),\n      lang: forceTextLang ? 'text' : this.computedLang,\n      defaultColor: false,\n      transformers,\n      decorations,\n    };\n  }\n\n  async initializeHighlighter(): Promise<PJSHighlighter> {\n    this.highlighter = await getSharedHighlighter(\n      getHighlighterOptions(this.computedLang, this.options)\n    );\n    return this.highlighter;\n  }\n}\n", "\":host {\\n  --pjs-bg: #fff;\\n  --pjs-fg: #000;\\n  --pjs-font-fallback:\\n    'SF Mono', Monaco, Consolas, 'Ubuntu Mono', 'Liberation Mono',\\n    'Courier New', monospace;\\n  --pjs-header-font-fallback:\\n    system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', 'Noto Sans',\\n    'Liberation Sans', Arial, sans-serif;\\n\\n  --pjs-mixer: light-dark(black, white);\\n  --pjs-gap-fallback: 8px;\\n\\n  /*\\n    // Available CSS Color Overrides\\n    --pjs-bg-buffer-override\\n    --pjs-bg-hover-override\\n    --pjs-bg-context-override\\n    --pjs-bg-separator-override\\n\\n    --pjs-fg-number-override\\n\\n    --pjs-deletion-color-override\\n    --pjs-addition-color-override\\n    --pjs-modified-color-override\\n\\n    --pjs-bg-deletion-override\\n    --pjs-bg-deletion-number-override\\n    --pjs-bg-deletion-hover-override\\n    --pjs-bg-deletion-emphasis-override\\n\\n    --pjs-bg-addition-override\\n    --pjs-bg-addition-number-override\\n    --pjs-bg-addition-hover-override\\n    --pjs-bg-addition-emphasis-override\\n\\n    // Available CSS Layout Overrides\\n    --pjs-gap-inline\\n    --pjs-gap-block\\n    --pjs-gap-style\\n    --pjs-tab-size\\n  */\\n\\n  color-scheme: light dark;\\n  display: block;\\n}\\n\\npre,\\ncode {\\n  margin: 0;\\n  padding: 0;\\n  display: block;\\n  outline: none;\\n}\\n\\n*,\\n*::before,\\n*::after {\\n  box-sizing: border-box;\\n  font-family: var(--pjs-font-family, var(--pjs-font-fallback));\\n  font-size: var(--pjs-font-size, 14px);\\n  line-height: var(--pjs-line-height, 20px);\\n  font-feature-settings: var(--pjs-font-features);\\n}\\n\\n[data-icon-sprite] {\\n  display: none;\\n}\\n\\n[data-pjs-header] *,\\n[data-pjs-header] *::before,\\n[data-pjs-header] *::after {\\n  font-family: var(--pjs-header-font-family, var(--pjs-header-font-fallback));\\n}\\n\\n[data-file-info] {\\n  padding: 10px;\\n  font-weight: 700;\\n  color: var(--fg);\\n  /* NOTE(amadeus): we cannot use 'in oklch' because current versions of cursor\\n   * and vscode use an older build of chrome that appears to have a bug with\\n   * color-mix and 'in oklch', so use 'in lab' instead */\\n  background-color: color-mix(in lab, var(--bg) 98%, var(--fg));\\n  border-block: 1px solid color-mix(in lab, var(--bg) 95%, var(--fg));\\n}\\n\\n[data-pjs-header],\\n[data-pjs] {\\n  --pjs-bg: light-dark(var(--pjs-light-bg), var(--pjs-dark-bg));\\n  /* NOTE(amadeus): we cannot use 'in oklch' because current versions of cursor\\n   * and vscode use an older build of chrome that appears to have a bug with\\n   * color-mix and 'in oklch', so use 'in lab' instead */\\n  --pjs-bg-buffer: var(\\n    --pjs-bg-buffer-override,\\n    light-dark(\\n      color-mix(in lab, var(--pjs-bg) 92%, var(--pjs-mixer)),\\n      color-mix(in lab, var(--pjs-bg) 92%, var(--pjs-mixer))\\n    )\\n  );\\n  --pjs-bg-hover: var(\\n    --pjs-bg-hover-override,\\n    light-dark(\\n      color-mix(in lab, var(--pjs-bg) 97%, var(--pjs-mixer)),\\n      color-mix(in lab, var(--pjs-bg) 91%, var(--pjs-mixer))\\n    )\\n  );\\n  --pjs-bg-context: var(\\n    --pjs-bg-context-override,\\n    light-dark(\\n      color-mix(in lab, var(--pjs-bg) 98.5%, var(--pjs-mixer)),\\n      color-mix(in lab, var(--pjs-bg) 92.5%, var(--pjs-mixer))\\n    )\\n  );\\n  --pjs-bg-separator: var(\\n    --pjs-bg-separator-override,\\n    light-dark(\\n      color-mix(in lab, var(--pjs-bg) 96%, var(--pjs-mixer)),\\n      color-mix(in lab, var(--pjs-bg) 85%, var(--pjs-mixer))\\n    )\\n  );\\n\\n  --pjs-fg: light-dark(var(--pjs-light), var(--pjs-dark));\\n  --pjs-fg-number: var(\\n    --pjs-fg-number-override,\\n    light-dark(\\n      color-mix(in lab, var(--pjs-fg) 65%, var(--pjs-bg)),\\n      color-mix(in lab, var(--pjs-fg) 65%, var(--pjs-bg))\\n    )\\n  );\\n\\n  --pjs-deletion-base: var(\\n    --pjs-deletion-color-override,\\n    light-dark(\\n      var(\\n        --pjs-light-deletion-color,\\n        var(--pjs-deletion-color, rgb(255, 0, 0))\\n      ),\\n      var(--pjs-dark-deletion-color, var(--pjs-deletion-color, rgb(255, 0, 0)))\\n    )\\n  );\\n  --pjs-addition-base: var(\\n    --pjs-addition-color-override,\\n    light-dark(\\n      var(\\n        --pjs-light-addition-color,\\n        var(--pjs-addition-color, rgb(0, 255, 0))\\n      ),\\n      var(--pjs-dark-addition-color, var(--pjs-addition-color, rgb(0, 255, 0)))\\n    )\\n  );\\n  --pjs-modified-base: var(\\n    --pjs-modified-color-override,\\n    light-dark(\\n      var(\\n        --pjs-light-modified-color,\\n        var(--pjs-modified-color, rgb(0, 0, 255))\\n      ),\\n      var(--pjs-dark-modified-color, var(--pjs-modified-color, rgb(0, 0, 255)))\\n    )\\n  );\\n\\n  /* NOTE(amadeus): we cannot use 'in oklch' because current versions of cursor\\n   * and vscode use an older build of chrome that appears to have a bug with\\n   * color-mix and 'in oklch', so use 'in lab' instead */\\n  --pjs-bg-deletion: var(\\n    --pjs-bg-deletion-override,\\n    light-dark(\\n      color-mix(in lab, var(--pjs-bg) 88%, var(--pjs-deletion-base)),\\n      color-mix(in lab, var(--pjs-bg) 80%, var(--pjs-deletion-base))\\n    )\\n  );\\n  --pjs-bg-deletion-number: var(\\n    --pjs-bg-deletion-number-override,\\n    light-dark(\\n      color-mix(in lab, var(--pjs-bg) 91%, var(--pjs-deletion-base)),\\n      color-mix(in lab, var(--pjs-bg) 85%, var(--pjs-deletion-base))\\n    )\\n  );\\n  --pjs-bg-deletion-hover: var(\\n    --pjs-bg-deletion-hover-override,\\n    light-dark(\\n      color-mix(in lab, var(--pjs-bg) 80%, var(--pjs-deletion-base)),\\n      color-mix(in lab, var(--pjs-bg) 75%, var(--pjs-deletion-base))\\n    )\\n  );\\n  --pjs-bg-deletion-emphasis: var(\\n    --pjs-bg-deletion-emphasis-override,\\n    light-dark(\\n      rgb(from var(--pjs-deletion-base) r g b / 0.15),\\n      rgb(from var(--pjs-deletion-base) r g b / 0.2)\\n    )\\n  );\\n\\n  --pjs-bg-addition: var(\\n    --pjs-bg-addition-override,\\n    light-dark(\\n      color-mix(in lab, var(--pjs-bg) 88%, var(--pjs-addition-base)),\\n      color-mix(in lab, var(--pjs-bg) 80%, var(--pjs-addition-base))\\n    )\\n  );\\n  --pjs-bg-addition-number: var(\\n    --pjs-bg-addition-number-override,\\n    light-dark(\\n      color-mix(in lab, var(--pjs-bg) 91%, var(--pjs-addition-base)),\\n      color-mix(in lab, var(--pjs-bg) 85%, var(--pjs-addition-base))\\n    )\\n  );\\n  --pjs-bg-addition-hover: var(\\n    --pjs-bg-addition-hover-override,\\n    light-dark(\\n      color-mix(in lab, var(--pjs-bg) 80%, var(--pjs-addition-base)),\\n      color-mix(in lab, var(--pjs-bg) 70%, var(--pjs-addition-base))\\n    )\\n  );\\n  --pjs-bg-addition-emphasis: var(\\n    --pjs-bg-addition-emphasis-override,\\n    light-dark(\\n      rgb(from var(--pjs-addition-base) r g b / 0.15),\\n      rgb(from var(--pjs-addition-base) r g b / 0.2)\\n    )\\n  );\\n\\n  background-color: var(--pjs-bg);\\n  color: var(--pjs-fg);\\n}\\n\\n[data-pjs] {\\n  --pjs-code-grid: minmax(min-content, max-content) 1fr;\\n\\n  [data-column-content] span {\\n    color: light-dark(var(--pjs-light), var(--pjs-dark));\\n    font-weight: var(--pjs-light-font-weight);\\n    font-style: var(--pjs-light-font-style);\\n  }\\n}\\n\\n[data-column-number] {\\n  grid-column: 1 / 2;\\n}\\n\\n[data-column-content] {\\n  grid-column: 2 / 3;\\n}\\n\\n[data-pjs][data-dehydrated] {\\n  --pjs-code-grid: minmax(min-content, max-content) minmax(0, 1fr);\\n}\\n\\n@media (prefers-color-scheme: dark) {\\n  [data-pjs-header],\\n  [data-pjs] {\\n    color-scheme: dark;\\n  }\\n\\n  [data-pjs] [data-column-content] span {\\n    font-weight: var(--pjs-dark-font-weight);\\n    font-style: var(--pjs-dark-font-style);\\n  }\\n}\\n\\n[data-pjs-header][data-theme-type='light'],\\n[data-pjs][data-theme-type='light'] {\\n  color-scheme: light;\\n}\\n\\n[data-pjs][data-theme-type='light'] [data-column-content] span {\\n  font-weight: var(--pjs-light-font-weight);\\n  font-style: var(--pjs-light-font-style);\\n}\\n\\n[data-pjs-header][data-theme-type='dark'],\\n[data-pjs][data-theme-type='dark'] {\\n  color-scheme: dark;\\n}\\n\\n[data-pjs][data-theme-type='dark'] [data-column-content] span {\\n  font-weight: var(--pjs-dark-font-weight);\\n  font-style: var(--pjs-dark-font-style);\\n}\\n\\n[data-type='split'][data-overflow='wrap'] {\\n  display: grid;\\n  grid-auto-flow: dense;\\n  grid-template-columns: repeat(2, var(--pjs-code-grid));\\n}\\n\\n[data-type='split'][data-overflow='scroll'] {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  gap: 2px;\\n}\\n\\n[data-code] {\\n  display: block;\\n  display: grid;\\n  grid-auto-flow: dense;\\n  grid-template-columns: var(--pjs-code-grid);\\n  overflow-x: auto;\\n  scrollbar-width: none;\\n  overscroll-behavior-x: contain;\\n  tab-size: var(--pjs-tab-size, 2);\\n  align-self: flex-start;\\n  padding-block: var(--pjs-gap-block, var(--pjs-gap-fallback));\\n}\\n\\n[data-pjs][data-type='split'][data-overflow='wrap'] {\\n  padding-block: var(--pjs-gap-block, var(--pjs-gap-fallback));\\n}\\n\\n[data-pjs-header] ~ [data-pjs] [data-code],\\n[data-pjs-header] ~ [data-pjs][data-overflow='wrap'] {\\n  padding-top: 0;\\n}\\n\\n[data-type='split'][data-overflow='wrap'] [data-code] {\\n  display: contents;\\n}\\n\\n[data-line-annotation],\\n[data-line] {\\n  position: relative;\\n  display: grid;\\n  grid-template-columns: subgrid;\\n  grid-column: 1 / 3;\\n}\\n\\n[data-interactive-lines] [data-line] {\\n  cursor: pointer;\\n}\\n\\n[data-type='split'][data-overflow='wrap'] [data-additions] [data-line],\\n[data-type='split'][data-overflow='wrap'] [data-additions] [data-separator],\\n[data-type='split'][data-overflow='wrap']\\n  [data-additions]\\n  [data-line-annotation] {\\n  border-left: 2px solid var(--pjs-bg);\\n}\\n\\n[data-buffer] {\\n  position: sticky;\\n  left: 0;\\n  grid-column: 1 / 3;\\n  user-select: none;\\n  /* We multiply by 1.414 (2) to better approximate the diagonal repeat distance */\\n  background-image: repeating-linear-gradient(\\n    -45deg,\\n    transparent,\\n    transparent calc(3px * 1.414),\\n    var(--pjs-bg-buffer) calc(3px * 1.414),\\n    var(--pjs-bg-buffer) calc(4px * 1.414)\\n  );\\n  min-height: 1lh;\\n  width: var(--pjs-column-width, auto);\\n}\\n\\n[data-separator] {\\n  grid-column: span 2;\\n}\\n\\n[data-separator='metadata'],\\n[data-separator]:empty {\\n  min-height: 4px;\\n  background-color: var(--pjs-bg-separator);\\n  display: grid;\\n  grid-template-columns: subgrid;\\n}\\n\\n[data-separator-content] {\\n  user-select: none;\\n  fill: currentColor;\\n}\\n\\n[data-separator='metadata'] [data-separator-content] {\\n  grid-column: 2 / 3;\\n  width: var(--pjs-column-content-width);\\n  position: sticky;\\n  left: var(--pjs-column-number-width);\\n  padding: 4px 1ch;\\n}\\n\\n[data-separator='line-info'] {\\n  margin-block: var(--pjs-gap-block, var(--pjs-gap-fallback));\\n}\\n\\n[data-separator='line-info'][data-separator-first] {\\n  margin-top: 0;\\n}\\n\\n[data-separator='line-info'][data-separator-last] {\\n  margin-bottom: 0;\\n}\\n\\n[data-separator='line-info'] [data-separator-content] {\\n  position: sticky;\\n  display: flex;\\n  align-items: center;\\n  gap: calc(1ch / 2);\\n  padding: calc(1lh / 4) 1ch;\\n  border-radius: 6px;\\n  background-color: var(--pjs-bg-separator);\\n  width: auto;\\n  width: calc(var(--pjs-column-width) - var(--pjs-gap-fallback));\\n  opacity: 0.65;\\n  font-family: var(--pjs-header-font-family, var(--pjs-header-font-fallback));\\n}\\n\\n[data-separator='line-info'][data-expand-index]:hover [data-separator-content] {\\n  opacity: 1;\\n}\\n\\n[data-separator][data-expand-index] {\\n  cursor: pointer;\\n}\\n\\n[data-type='file']\\n  [data-code]\\n  [data-separator='line-info']\\n  [data-separator-content] {\\n  left: var(--pjs-gap-inline, var(--pjs-gap-fallback));\\n  margin-left: var(--pjs-gap-inline, var(--pjs-gap-fallback));\\n  margin-right: var(--pjs-gap-inline, var(--pjs-gap-fallback));\\n  width: calc(\\n    var(--pjs-column-width) -\\n      (var(--pjs-gap-inline, var(--pjs-gap-fallback)) * 2)\\n  );\\n}\\n\\n[data-type='split']\\n  [data-deletions]\\n  [data-separator='line-info']\\n  [data-separator-content] {\\n  left: var(--pjs-gap-fallback);\\n  margin-left: var(--pjs-gap-fallback);\\n  border-top-right-radius: 0;\\n  border-bottom-right-radius: 0;\\n}\\n\\n[data-type='split']\\n  [data-additions]\\n  [data-separator='line-info']\\n  [data-separator-content] {\\n  left: 0;\\n  margin-right: var(--pjs-gap-inline, var(--pjs-gap-fallback));\\n  border-top-left-radius: 0;\\n  border-bottom-left-radius: 0;\\n  flex-direction: row-reverse;\\n}\\n\\n[data-line] {\\n  background-color: var(--pjs-bg);\\n  color: var(--pjs-fg);\\n}\\n\\n[data-type='split'][data-overflow='wrap'] [data-deletions] {\\n  [data-line-annotation],\\n  [data-buffer],\\n  [data-line],\\n  [data-separator] {\\n    grid-column: 1 / 3;\\n  }\\n}\\n\\n[data-line-annotation] {\\n  min-height: var(--pjs-annotation-min-height, 0);\\n  background-color: var(--pjs-bg-context);\\n}\\n\\n[data-type='split'][data-overflow='wrap'] [data-additions] {\\n  [data-line-annotation],\\n  [data-buffer],\\n  [data-line],\\n  [data-separator] {\\n    grid-column: 3 / 5;\\n  }\\n}\\n\\n[data-separator='custom'] {\\n  display: grid;\\n  grid-template-columns: subgrid;\\n}\\n\\n[data-column-content],\\n[data-column-number] {\\n  position: relative;\\n  padding-inline: 1ch;\\n}\\n\\n[data-indicators='classic'] [data-column-content] {\\n  padding-inline-start: 2ch;\\n}\\n\\n[data-indicators='classic'] {\\n  [data-line-type='change-addition'] [data-column-content]::before,\\n  [data-line-type='change-deletion'] [data-column-content]::before {\\n    display: inline-block;\\n    width: 1ch;\\n    height: 1lh;\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    user-select: none;\\n  }\\n}\\n\\n[data-indicators='classic'] {\\n  [data-line-type='change-addition'] [data-column-content]::before {\\n    content: '+';\\n    color: var(--pjs-addition-base);\\n  }\\n  [data-line-type='change-deletion'] [data-column-content]::before {\\n    content: '-';\\n    color: var(--pjs-deletion-base);\\n  }\\n}\\n\\n[data-indicators='bars'] {\\n  [data-line-type='change-deletion'] [data-column-number]::before,\\n  [data-line-type='change-addition'] [data-column-number]::before {\\n    content: '';\\n    display: block;\\n    width: 4px;\\n    height: 100%;\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    user-select: none;\\n  }\\n}\\n\\n[data-indicators='bars'] {\\n  [data-line-type='change-deletion'] [data-column-number]::before {\\n    background-image: linear-gradient(\\n      0deg,\\n      var(--pjs-bg-deletion) 50%,\\n      var(--pjs-deletion-base) 50%\\n    );\\n    background-repeat: repeat;\\n    background-size: 2px 2px;\\n    background-size: calc(1lh / round(1lh / 2px)) calc(1lh / round(1lh / 2px));\\n  }\\n  [data-line-type='change-addition'] [data-column-number]::before {\\n    background-color: var(--pjs-addition-base);\\n  }\\n}\\n\\n[data-overflow='wrap'] [data-column-content],\\n[data-overflow='wrap'] [data-annotation-content] {\\n  white-space: pre-wrap;\\n  word-break: break-word;\\n}\\n\\n[data-overflow='scroll'] [data-column-content] {\\n  white-space: pre;\\n  min-height: 1lh;\\n}\\n\\n[data-column-number] {\\n  box-sizing: content-box;\\n  text-align: right;\\n  position: sticky;\\n  left: 0;\\n  user-select: none;\\n  background-color: var(--pjs-bg);\\n  color: var(--pjs-fg-number);\\n  z-index: 1;\\n  min-width: var(\\n    --pjs-min-number-column-width,\\n    var(--pjs-min-number-column-width-default, 3ch)\\n  );\\n  padding-left: 2ch;\\n  border-right: var(--pjs-gap-style, 1px solid var(--pjs-bg));\\n}\\n\\n[data-interactive-line-numbers] [data-column-number] {\\n  cursor: pointer;\\n}\\n\\n[data-diff-span] {\\n  border-radius: 3px;\\n  box-decoration-break: clone;\\n  -webkit-box-decoration-break: clone;\\n}\\n\\n[data-line-type='change-addition'] {\\n  [data-column-number] {\\n    color: var(--pjs-addition-base);\\n  }\\n\\n  [data-diff-span] {\\n    background-color: var(--pjs-bg-addition-emphasis);\\n  }\\n}\\n\\n[data-line-type='change-deletion'] {\\n  [data-column-number] {\\n    color: var(--pjs-deletion-base);\\n  }\\n\\n  [data-diff-span] {\\n    background-color: var(--pjs-bg-deletion-emphasis);\\n  }\\n}\\n\\n[data-background] [data-line-type='change-addition'] {\\n  background-color: var(--pjs-bg-addition);\\n\\n  [data-column-number] {\\n    background-color: var(--pjs-bg-addition-number);\\n  }\\n}\\n\\n[data-background] [data-line-type='change-deletion'] {\\n  background-color: var(--pjs-bg-deletion);\\n\\n  [data-column-number] {\\n    background-color: var(--pjs-bg-deletion-number);\\n  }\\n}\\n\\n[data-line-type='context-expanded'] {\\n  background-color: var(--pjs-bg-context);\\n\\n  [data-column-number] {\\n    background-color: var(--pjs-bg-context);\\n  }\\n}\\n\\n[data-line]:hover {\\n  [data-column-number],\\n  [data-column-content] {\\n    background-color: var(--pjs-bg-hover);\\n  }\\n}\\n\\n[data-background] [data-line]:hover {\\n  &[data-line-type='change-deletion'] [data-column-number],\\n  &[data-line-type='change-deletion'] [data-column-content] {\\n    background-color: var(--pjs-bg-deletion-hover);\\n  }\\n\\n  &[data-line-type='change-addition'] [data-column-number],\\n  &[data-line-type='change-addition'] [data-column-content] {\\n    background-color: var(--pjs-bg-addition-hover);\\n  }\\n}\\n\\n[data-pjs-header] {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-items: center;\\n  gap: var(--pjs-gap-inline, var(--pjs-gap-fallback));\\n  min-height: calc(1lh + (var(--pjs-gap-block, var(--pjs-gap-fallback)) * 3));\\n  padding-inline: 16px;\\n}\\n\\n[data-header-content] {\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  gap: var(--pjs-gap-inline, var(--pjs-gap-fallback));\\n  min-width: 0;\\n  white-space: nowrap;\\n}\\n\\n[data-header-content] [data-prev-name],\\n[data-header-content] [data-title] {\\n  direction: rtl;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  min-width: 0;\\n  white-space: nowrap;\\n}\\n\\n[data-prev-name] {\\n  opacity: 0.7;\\n}\\n\\n[data-rename-icon] {\\n  fill: currentColor;\\n  flex-shrink: 0;\\n  flex-grow: 0;\\n}\\n\\n[data-pjs-header] [data-metadata] {\\n  display: flex;\\n  align-items: center;\\n  gap: 1ch;\\n  white-space: nowrap;\\n}\\n\\n[data-pjs-header] [data-additions-count] {\\n  font-family: var(--pjs-font-family, var(--pjs-font-fallback));\\n  color: var(--pjs-addition-base);\\n}\\n\\n[data-pjs-header] [data-deletions-count] {\\n  font-family: var(--pjs-font-family, var(--pjs-font-fallback));\\n  color: var(--pjs-deletion-base);\\n}\\n\\n[data-no-newline] {\\n  user-select: none;\\n  opacity: 0.6;\\n}\\n\\n[data-annotation-content] {\\n  position: sticky;\\n  left: var(--pjs-column-number-width, 0);\\n  grid-column: 2 / -1;\\n  width: var(--pjs-column-content-width, auto);\\n  align-self: flex-start;\\n  z-index: 2;\\n}\\n\\n/* Undo some of the stuff that the 'pre' tag does */\\n[data-annotation-slot] {\\n  text-wrap-mode: wrap;\\n  word-break: normal;\\n  white-space-collapse: collapse;\\n}\\n\\n[data-change-icon] {\\n  fill: currentColor;\\n  flex-shrink: 0;\\n}\\n\\n[data-change-icon='change'],\\n[data-change-icon='rename-pure'],\\n[data-change-icon='rename-changed'] {\\n  color: var(--pjs-modified-base);\\n}\\n\\n[data-change-icon='new'] {\\n  color: var(--pjs-addition-base);\\n}\\n\\n[data-change-icon='deleted'] {\\n  color: var(--pjs-deletion-base);\\n}\\n\\n[data-change-icon='file'] {\\n  opacity: 0.6;\\n}\\n\"", "import styles from '../style.css';\n\n// If HTMLElement is undefined it usually means we are in a server environment\n// so best to just not do anything\nif (\n  typeof HTMLElement !== 'undefined' &&\n  customElements.get('file-diff') == null\n) {\n  let sheet: CSSStyleSheet | undefined;\n\n  class FileDiffContainer extends HTMLElement {\n    constructor() {\n      super();\n      // If shadow root is already open, we can sorta assume the\n      // CSS is already in place\n      if (this.shadowRoot != null) {\n        return;\n      }\n      const shadowRoot = this.attachShadow({ mode: 'open' });\n      if (sheet == null) {\n        sheet = new CSSStyleSheet();\n        // Declare layer order first, then wrap base styles in @layer to match SSR behavior\n        sheet.replaceSync(\n          `@layer base, theme, unsafe;\\n@layer base {\\n${styles}\\n}`\n        );\n      }\n      shadowRoot.adoptedStyleSheets = [sheet];\n    }\n    // Not sure if we need to do anything here yet...\n    // connectedCallback() {\n    //   this.dataset.pjsContainer = '';\n    // }\n  }\n\n  customElements.define('file-diff', FileDiffContainer);\n}\n\nexport const PJSContainerLoaded = true;\n", "export const SVGSpriteSheet = `<svg data-icon-sprite aria-hidden=\"true\" width=\"0\" height=\"0\">\n  <symbol id=\"pjs-icon-arrow\">\n    <path d=\"M8.46967 4.21967C8.17678 4.51256 8.17678 4.98744 8.46967 5.28033L10.4393 7.25H3.75C3.33579 7.25 3 7.58579 3 8C3 8.41421 3.33579 8.75 3.75 8.75H10.4393L8.46967 10.7197C8.17678 11.0126 8.17678 11.4874 8.46967 11.7803C8.76256 12.0732 9.23744 12.0732 9.53033 11.7803L12.7803 8.53033C13.0732 8.23744 13.0732 7.76256 12.7803 7.46967L9.53033 4.21967C9.23744 3.92678 8.76256 3.92678 8.46967 4.21967Z\" />\n  </symbol>\n  <symbol id=\"pjs-icon-brand-github\" viewBox=\"0 0 16 16\">\n    <path d=\"M8 0c4.42 0 8 3.58 8 8a8.01 8.01 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27s-1.36.09-2 .27c-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8\"/>\n  </symbol>\n  <symbol id=\"pjs-icon-chevrons-narrow\" viewBox=\"0 0 10 16\">\n    <path d=\"M4.47 2.22a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1-1.06 1.06L5 3.81 2.28 6.53a.75.75 0 0 1-1.06-1.06zM1.22 9.47a.75.75 0 0 1 1.06 0L5 12.19l2.72-2.72a.75.75 0 0 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 0 1 0-1.06\"/>\n  </symbol>\n  <symbol id=\"pjs-icon-diff-split\" viewBox=\"0 0 16 16\">\n    <path d=\"M14 0H8.5v16H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2m-1.5 6.5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0\"/><path d=\"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h5.5V0zm.5 7.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1\" opacity=\".3\"/>\n  </symbol>\n  <symbol id=\"pjs-icon-diff-unified\" viewBox=\"0 0 16 16\">\n    <path d=\"M16 14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8.5h16zm-8-4a.5.5 0 0 0-.5.5v1h-1a.5.5 0 0 0 0 1h1v1a.5.5 0 0 0 1 0v-1h1a.5.5 0 0 0 0-1h-1v-1A.5.5 0 0 0 8 10\"/><path d=\"M14 0a2 2 0 0 1 2 2v5.5H0V2a2 2 0 0 1 2-2zM6.5 3.5a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1z\" opacity=\".4\"/>\n  </symbol>\n  <symbol id=\"pjs-icon-file-code\" viewBox=\"0 0 16 16\">\n    <path d=\"M10.75 0c.199 0 .39.08.53.22l3.5 3.5c.14.14.22.331.22.53v9A2.75 2.75 0 0 1 12.25 16h-8.5A2.75 2.75 0 0 1 1 13.25V2.75A2.75 2.75 0 0 1 3.75 0zm-7 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h8.5c.69 0 1.25-.56 1.25-1.25V5h-1.25A2.25 2.25 0 0 1 10 2.75V1.5z\"/><path d=\"M7.248 6.19a.75.75 0 0 1 .063 1.058L5.753 9l1.558 1.752a.75.75 0 0 1-1.122.996l-2-2.25a.75.75 0 0 1 0-.996l2-2.25a.75.75 0 0 1 1.06-.063M8.69 7.248a.75.75 0 1 1 1.12-.996l2 2.25a.75.75 0 0 1 0 .996l-2 2.25a.75.75 0 1 1-1.12-.996L10.245 9z\"/>\n  </symbol>\n  <symbol id=\"pjs-icon-symbol-added\" viewBox=\"0 0 16 16\">\n    <path d=\"M8 4a.75.75 0 0 1 .75.75v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5a.75.75 0 0 1-1.5 0v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5A.75.75 0 0 1 8 4\"/><path d=\"M1.788 4.296c.196-.88.478-1.381.802-1.706s.826-.606 1.706-.802C5.194 1.588 6.387 1.5 8 1.5s2.806.088 3.704.288c.88.196 1.381.478 1.706.802s.607.826.802 1.706c.2.898.288 2.091.288 3.704s-.088 2.806-.288 3.704c-.195.88-.478 1.381-.802 1.706s-.826.607-1.706.802c-.898.2-2.091.288-3.704.288s-2.806-.088-3.704-.288c-.88-.195-1.381-.478-1.706-.802s-.606-.826-.802-1.706C1.588 10.806 1.5 9.613 1.5 8s.088-2.806.288-3.704M8 0C1.412 0 0 1.412 0 8s1.412 8 8 8 8-1.412 8-8-1.412-8-8-8\"/>\n  </symbol>\n  <symbol id=\"pjs-icon-symbol-deleted\" viewBox=\"0 0 16 16\">\n    <path d=\"M4 8a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5A.75.75 0 0 1 4 8\"/><path d=\"M1.788 4.296c.196-.88.478-1.381.802-1.706s.826-.606 1.706-.802C5.194 1.588 6.387 1.5 8 1.5s2.806.088 3.704.288c.88.196 1.381.478 1.706.802s.607.826.802 1.706c.2.898.288 2.091.288 3.704s-.088 2.806-.288 3.704c-.195.88-.478 1.381-.802 1.706s-.826.607-1.706.802c-.898.2-2.091.288-3.704.288s-2.806-.088-3.704-.288c-.88-.195-1.381-.478-1.706-.802s-.606-.826-.802-1.706C1.588 10.806 1.5 9.613 1.5 8s.088-2.806.288-3.704M8 0C1.412 0 0 1.412 0 8s1.412 8 8 8 8-1.412 8-8-1.412-8-8-8\"/>\n  </symbol>\n  <symbol id=\"pjs-icon-symbol-diffstat\" viewBox=\"0 0 16 16\">\n    <path d=\"M1.788 4.296c.196-.88.478-1.381.802-1.706s.826-.606 1.706-.802C5.194 1.588 6.387 1.5 8 1.5s2.806.088 3.704.288c.88.196 1.381.478 1.706.802s.607.826.802 1.706c.2.898.288 2.091.288 3.704s-.088 2.806-.288 3.704c-.195.88-.478 1.381-.802 1.706s-.826.607-1.706.802c-.898.2-2.091.288-3.704.288s-2.806-.088-3.704-.288c-.88-.195-1.381-.478-1.706-.802s-.606-.826-.802-1.706C1.588 10.806 1.5 9.613 1.5 8s.088-2.806.288-3.704M8 0C1.412 0 0 1.412 0 8s1.412 8 8 8 8-1.412 8-8-1.412-8-8-8\"/><path d=\"M8.75 4.296a.75.75 0 0 0-1.5 0V6.25h-2a.75.75 0 0 0 0 1.5h2v1.5h1.5v-1.5h2a.75.75 0 0 0 0-1.5h-2zM5.25 10a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5z\"/>\n  </symbol>\n  <symbol id=\"pjs-icon-symbol-ignored\" viewBox=\"0 0 16 16\">\n    <path d=\"M1.5 8c0 1.613.088 2.806.288 3.704.196.88.478 1.381.802 1.706s.826.607 1.706.802c.898.2 2.091.288 3.704.288s2.806-.088 3.704-.288c.88-.195 1.381-.478 1.706-.802s.607-.826.802-1.706c.2-.898.288-2.091.288-3.704s-.088-2.806-.288-3.704c-.195-.88-.478-1.381-.802-1.706s-.826-.606-1.706-.802C10.806 1.588 9.613 1.5 8 1.5s-2.806.088-3.704.288c-.88.196-1.381.478-1.706.802s-.606.826-.802 1.706C1.588 5.194 1.5 6.387 1.5 8M0 8c0-6.588 1.412-8 8-8s8 1.412 8 8-1.412 8-8 8-8-1.412-8-8m11.53-2.47a.75.75 0 0 0-1.06-1.06l-6 6a.75.75 0 1 0 1.06 1.06z\"/>\n  </symbol>\n  <symbol id=\"pjs-icon-symbol-modified\" viewBox=\"0 0 16 16\">\n    <path d=\"M1.5 8c0 1.613.088 2.806.288 3.704.196.88.478 1.381.802 1.706s.826.607 1.706.802c.898.2 2.091.288 3.704.288s2.806-.088 3.704-.288c.88-.195 1.381-.478 1.706-.802s.607-.826.802-1.706c.2-.898.288-2.091.288-3.704s-.088-2.806-.288-3.704c-.195-.88-.478-1.381-.802-1.706s-.826-.606-1.706-.802C10.806 1.588 9.613 1.5 8 1.5s-2.806.088-3.704.288c-.88.196-1.381.478-1.706.802s-.606.826-.802 1.706C1.588 5.194 1.5 6.387 1.5 8M0 8c0-6.588 1.412-8 8-8s8 1.412 8 8-1.412 8-8 8-8-1.412-8-8m8 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6\"/>\n  </symbol>\n  <symbol id=\"pjs-icon-symbol-moved\" viewBox=\"0 0 16 16\">\n    <path d=\"M1.788 4.296c.196-.88.478-1.381.802-1.706s.826-.606 1.706-.802C5.194 1.588 6.387 1.5 8 1.5s2.806.088 3.704.288c.88.196 1.381.478 1.706.802s.607.826.802 1.706c.2.898.288 2.091.288 3.704s-.088 2.806-.288 3.704c-.195.88-.478 1.381-.802 1.706s-.826.607-1.706.802c-.898.2-2.091.288-3.704.288s-2.806-.088-3.704-.288c-.88-.195-1.381-.478-1.706-.802s-.606-.826-.802-1.706C1.588 10.806 1.5 9.613 1.5 8s.088-2.806.288-3.704M8 0C1.412 0 0 1.412 0 8s1.412 8 8 8 8-1.412 8-8-1.412-8-8-8\"/><path d=\"M8.495 4.695a.75.75 0 0 0-.05 1.06L10.486 8l-2.041 2.246a.75.75 0 0 0 1.11 1.008l2.5-2.75a.75.75 0 0 0 0-1.008l-2.5-2.75a.75.75 0 0 0-1.06-.051m-4 0a.75.75 0 0 0-.05 1.06l2.044 2.248-1.796 1.995a.75.75 0 0 0 1.114 1.004l2.25-2.5a.75.75 0 0 0-.002-1.007l-2.5-2.75a.75.75 0 0 0-1.06-.05\"/>\n  </symbol>\n  <symbol id=\"pjs-icon-symbol-ref\" viewBox=\"0 0 16 16\">\n    <path d=\"M1.5 8c0 1.613.088 2.806.288 3.704.196.88.478 1.381.802 1.706.286.286.71.54 1.41.73V1.86c-.7.19-1.124.444-1.41.73-.324.325-.606.826-.802 1.706C1.588 5.194 1.5 6.387 1.5 8m4 6.397c.697.07 1.522.103 2.5.103 1.613 0 2.806-.088 3.704-.288.88-.195 1.381-.478 1.706-.802s.607-.826.802-1.706c.2-.898.288-2.091.288-3.704s-.088-2.806-.288-3.704c-.195-.88-.478-1.381-.802-1.706s-.826-.606-1.706-.802C10.806 1.588 9.613 1.5 8 1.5c-.978 0-1.803.033-2.5.103zM0 8c0-6.588 1.412-8 8-8s8 1.412 8 8-1.412 8-8 8-8-1.412-8-8m7-2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z\"/>\n  </symbol>\n</svg>`;\n", "import deepEquals from 'fast-deep-equal';\nimport type { Element } from 'hast';\n\nimport { FileHeaderRenderer } from './FileHeaderRenderer';\nimport { type FileRenderResult, FileRenderer } from './FileRenderer';\nimport {\n  MouseEventManager,\n  type MouseEventManagerBaseOptions,\n  getMouseEventOptions,\n} from './MouseEventManager';\nimport { ResizeManager } from './ResizeManager';\nimport { getSharedHighlighter } from './SharedHighlighter';\nimport { DEFAULT_THEMES, HEADER_METADATA_SLOT_ID } from './constants';\nimport { PJSContainerLoaded } from './custom-components/Container';\nimport { SVGSpriteSheet } from './sprite';\nimport type {\n  BaseCodeOptions,\n  FileContents,\n  LineAnnotation,\n  PJSHighlighter,\n  RenderFileMetadata,\n  ThemeTypes,\n} from './types';\nimport { getLineAnnotationName } from './utils/getLineAnnotationName';\nimport { getThemes } from './utils/getThemes';\nimport { createCodeNode, setWrapperProps } from './utils/html_render_utils';\n\ninterface FileRenderProps<LAnnotation> {\n  file: FileContents;\n  fileContainer?: HTMLElement;\n  containerWrapper?: HTMLElement;\n  forceRender?: boolean;\n  lineAnnotations?: LineAnnotation<LAnnotation>[];\n}\n\nexport interface FileOptions<LAnnotation>\n  extends BaseCodeOptions,\n    MouseEventManagerBaseOptions<'file'> {\n  disableFileHeader?: boolean;\n  renderCustomMetadata?: RenderFileMetadata;\n  renderAnnotation?(\n    annotation: LineAnnotation<LAnnotation>\n  ): HTMLElement | undefined;\n}\n\nlet instanceId = -1;\n\nexport class File<LAnnotation = undefined> {\n  static LoadedCustomComponent: boolean = PJSContainerLoaded;\n\n  readonly __id: number = ++instanceId;\n  private fileContainer: HTMLElement | undefined;\n  private spriteSVG: SVGElement | undefined;\n  private pre: HTMLPreElement | undefined;\n  private code: HTMLElement | undefined;\n  private unsafeCSSStyle: HTMLStyleElement | undefined;\n\n  private headerElement: HTMLElement | undefined;\n  private headerMetadata: HTMLElement | undefined;\n\n  private fileRenderer: FileRenderer<LAnnotation>;\n  private headerRenderer: FileHeaderRenderer;\n  private resizeManager: ResizeManager;\n  private mouseEventManager: MouseEventManager<'file'>;\n\n  private annotationElements: HTMLElement[] = [];\n  private lineAnnotations: LineAnnotation<LAnnotation>[] = [];\n\n  private file: FileContents | undefined;\n\n  constructor(\n    public options: FileOptions<LAnnotation> = { theme: DEFAULT_THEMES },\n    private isContainerManaged = false\n  ) {\n    this.fileRenderer = new FileRenderer<LAnnotation>(options);\n    this.headerRenderer = new FileHeaderRenderer(options);\n    this.resizeManager = new ResizeManager();\n    this.mouseEventManager = new MouseEventManager(\n      'file',\n      getMouseEventOptions(options)\n    );\n  }\n\n  setOptions(options: FileOptions<LAnnotation> | undefined): void {\n    if (options == null) return;\n    this.options = options;\n    this.mouseEventManager.setOptions(getMouseEventOptions(options));\n  }\n\n  private mergeOptions(options: Partial<FileOptions<LAnnotation>>): void {\n    this.options = { ...this.options, ...options };\n  }\n\n  setThemeType(themeType: ThemeTypes): void {\n    const currentThemeType = this.options.themeType ?? 'system';\n    if (currentThemeType === themeType) {\n      return;\n    }\n    this.mergeOptions({ themeType });\n    this.headerRenderer.setThemeType(themeType);\n    this.fileRenderer.setThemeType(themeType);\n\n    if (this.headerElement != null) {\n      if (themeType === 'system') {\n        delete this.headerElement.dataset.themeType;\n      } else {\n        this.headerElement.dataset.themeType = themeType;\n      }\n    }\n\n    // Update pre element theme mode\n    if (this.pre != null) {\n      switch (themeType) {\n        case 'system':\n          delete this.pre.dataset.themeType;\n          break;\n        case 'light':\n        case 'dark':\n          this.pre.dataset.themeType = themeType;\n          break;\n      }\n    }\n  }\n\n  setLineAnnotations(lineAnnotations: LineAnnotation<LAnnotation>[]): void {\n    this.lineAnnotations = lineAnnotations;\n  }\n\n  cleanUp(): void {\n    this.fileRenderer.cleanUp();\n    this.headerRenderer.cleanUp();\n    this.resizeManager.cleanUp();\n    this.mouseEventManager.cleanUp();\n\n    // Clean up the data\n    this.file = undefined;\n\n    // Clean up the elements\n    if (!this.isContainerManaged) {\n      this.fileContainer?.parentNode?.removeChild(this.fileContainer);\n    }\n    this.fileContainer = undefined;\n    this.pre = undefined;\n    this.headerElement = undefined;\n  }\n\n  async hydrate(props: FileRenderProps<LAnnotation>): Promise<void> {\n    if (props.fileContainer == null) {\n      throw new Error(\n        'FileDiff: you must provide a fileContainer on hydration'\n      );\n    }\n    for (const element of Array.from(\n      props.fileContainer.shadowRoot?.children ?? []\n    )) {\n      if (element instanceof SVGElement) {\n        this.spriteSVG = element;\n        continue;\n      }\n      if (!(element instanceof HTMLElement)) {\n        continue;\n      }\n      if (element instanceof HTMLPreElement) {\n        this.pre = element;\n        continue;\n      }\n      if (element instanceof HTMLStyleElement) {\n        this.unsafeCSSStyle = element;\n        continue;\n      }\n      if ('pjsHeader' in element.dataset) {\n        this.headerElement = element;\n        continue;\n      }\n    }\n    // If we have no pre tag, then we should render\n    if (this.pre == null) {\n      await this.render(props);\n    }\n    // Otherwise orchestrate our setup\n    else {\n      this.fileContainer = props.fileContainer;\n      delete this.pre.dataset.dehydrated;\n\n      this.lineAnnotations = props.lineAnnotations ?? this.lineAnnotations;\n      this.file = props.file;\n      void this.fileRenderer.initializeHighlighter();\n      this.renderAnnotations();\n      this.injectUnsafeCSS();\n      this.mouseEventManager.setup(this.pre);\n      if ((this.options.overflow ?? 'scroll') === 'scroll') {\n        this.resizeManager.setup(this.pre);\n      }\n    }\n  }\n\n  async render({\n    file,\n    fileContainer,\n    containerWrapper,\n    forceRender = false,\n    lineAnnotations,\n  }: FileRenderProps<LAnnotation>): Promise<void> {\n    if (!forceRender && deepEquals(this.file, file)) {\n      return;\n    }\n\n    this.file = file;\n\n    this.fileRenderer.setOptions(this.options);\n    if (lineAnnotations != null) {\n      this.fileRenderer.setLineAnnotations(lineAnnotations);\n      this.setLineAnnotations(lineAnnotations);\n    }\n\n    const { disableFileHeader = false } = this.options;\n    if (disableFileHeader) {\n      this.headerRenderer.cleanUp();\n      // Remove existing header from DOM\n      if (this.headerElement != null) {\n        this.headerElement.parentNode?.removeChild(this.headerElement);\n        this.headerElement = undefined;\n      }\n    } else {\n      this.headerRenderer.setOptions(this.options);\n    }\n\n    const [highlighter, headerResult, fileResult] = await Promise.all([\n      getSharedHighlighter({\n        themes: getThemes(this.options.theme),\n        langs: [],\n      }),\n      !disableFileHeader ? this.headerRenderer.render(file) : undefined,\n      this.fileRenderer.render(file),\n    ]);\n\n    if (headerResult == null && fileResult == null) {\n      return;\n    }\n\n    fileContainer = this.getOrCreateFileContainer(fileContainer);\n    if (headerResult != null) {\n      this.applyHeaderToDOM(headerResult, fileContainer);\n    }\n\n    if (fileResult != null) {\n      if (containerWrapper != null) {\n        containerWrapper.appendChild(fileContainer);\n      }\n      const pre = this.getOrCreatePre(fileContainer);\n      this.applyHunksToDOM(fileResult, pre, highlighter);\n      this.renderAnnotations();\n    }\n  }\n\n  private renderAnnotations(): void {\n    if (this.isContainerManaged || this.fileContainer == null) {\n      return;\n    }\n    // Handle annotation elements\n    for (const element of this.annotationElements) {\n      element.parentNode?.removeChild(element);\n    }\n    this.annotationElements.length = 0;\n\n    const { renderAnnotation } = this.options;\n    if (renderAnnotation != null && this.lineAnnotations.length > 0) {\n      for (const annotation of this.lineAnnotations) {\n        const content = renderAnnotation(annotation);\n        if (content == null) continue;\n        const el = document.createElement('div');\n        el.dataset.annotationSlot = '';\n        el.slot = getLineAnnotationName(annotation);\n        el.appendChild(content);\n        this.annotationElements.push(el);\n        this.fileContainer.appendChild(el);\n      }\n    }\n  }\n\n  private injectUnsafeCSS(): void {\n    if (this.fileContainer?.shadowRoot == null) {\n      return;\n    }\n    const { unsafeCSS } = this.options;\n\n    if (unsafeCSS == null || unsafeCSS === '') {\n      return;\n    }\n\n    // Create or update the style element\n    if (this.unsafeCSSStyle == null) {\n      this.unsafeCSSStyle = document.createElement('style');\n      this.fileContainer.shadowRoot.appendChild(this.unsafeCSSStyle);\n    }\n    // Wrap in @layer unsafe to match SSR behavior\n    this.unsafeCSSStyle.insertAdjacentText(\n      'beforeend',\n      `@layer unsafe {\\n${unsafeCSS}\\n}`\n    );\n  }\n\n  private applyHunksToDOM(\n    result: FileRenderResult,\n    pre: HTMLPreElement,\n    highlighter: PJSHighlighter\n  ): void {\n    this.setPreAttributes(pre, highlighter, result.totalLines);\n    pre.innerHTML = '';\n    // Create code elements and insert HTML content\n    this.code = createCodeNode();\n    this.code.innerHTML = this.fileRenderer.renderPartialHTML(result.codeAST);\n    pre.appendChild(this.code);\n    this.injectUnsafeCSS();\n    this.mouseEventManager.setup(pre);\n    if ((this.options.overflow ?? 'scroll') === 'scroll') {\n      this.resizeManager.setup(pre);\n    } else {\n      this.resizeManager.cleanUp();\n    }\n  }\n\n  private applyHeaderToDOM(headerAST: Element, container: HTMLElement): void {\n    const { file } = this;\n    if (file == null) return;\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = this.headerRenderer.renderResultToHTML(headerAST);\n    const newHeader = tempDiv.firstElementChild;\n    if (!(newHeader instanceof HTMLElement)) {\n      return;\n    }\n    if (this.headerElement != null) {\n      container.shadowRoot?.replaceChild(newHeader, this.headerElement);\n    } else {\n      container.shadowRoot?.prepend(newHeader);\n    }\n    this.headerElement = newHeader;\n\n    if (this.isContainerManaged) return;\n\n    const { renderCustomMetadata } = this.options;\n    if (this.headerMetadata != null) {\n      this.headerMetadata.parentNode?.removeChild(this.headerMetadata);\n    }\n    const content = renderCustomMetadata?.(file) ?? undefined;\n    if (content != null) {\n      this.headerMetadata = document.createElement('div');\n      this.headerMetadata.slot = HEADER_METADATA_SLOT_ID;\n      if (content instanceof Element) {\n        this.headerMetadata.appendChild(content);\n      } else {\n        this.headerMetadata.innerText = `${content}`;\n      }\n      container.appendChild(this.headerMetadata);\n    }\n  }\n\n  private getOrCreateFileContainer(fileContainer?: HTMLElement): HTMLElement {\n    this.fileContainer =\n      fileContainer ??\n      this.fileContainer ??\n      document.createElement('file-diff');\n    if (this.spriteSVG == null) {\n      const fragment = document.createElement('div');\n      fragment.innerHTML = SVGSpriteSheet;\n      const firstChild = fragment.firstChild;\n      if (firstChild instanceof SVGElement) {\n        this.spriteSVG = firstChild;\n        this.fileContainer.shadowRoot?.appendChild(this.spriteSVG);\n      }\n    }\n    return this.fileContainer;\n  }\n\n  private getOrCreatePre(container: HTMLElement): HTMLPreElement {\n    // If we haven't created a pre element yet, lets go ahead and do that\n    if (this.pre == null) {\n      this.pre = document.createElement('pre');\n      container.shadowRoot?.appendChild(this.pre);\n    }\n    // If we have a new parent container for the pre element, lets go ahead and\n    // move it into the new container\n    else if (this.pre.parentNode !== container) {\n      container.shadowRoot?.appendChild(this.pre);\n    }\n    return this.pre;\n  }\n\n  private setPreAttributes(\n    pre: HTMLPreElement,\n    highlighter: PJSHighlighter,\n    totalLines: number\n  ): void {\n    const { overflow = 'scroll', theme, themeType = 'system' } = this.options;\n    const wrap = overflow === 'wrap';\n    setWrapperProps({\n      pre,\n      theme,\n      highlighter,\n      split: false,\n      wrap,\n      themeType,\n      diffIndicators: 'none',\n      disableBackground: true,\n      totalLines,\n    });\n  }\n}\n", "export class ScrollSyncManager {\n  isDeletionsScrolling: boolean = false;\n  isAdditionsScrolling: boolean = false;\n  timeoutId: NodeJS.Timeout = -1 as unknown as NodeJS.Timeout;\n  codeDeletions: HTMLElement | undefined;\n  codeAdditions: HTMLElement | undefined;\n\n  cleanUp(): void {\n    this.codeDeletions?.removeEventListener(\n      'scroll',\n      this.handleDeletionsScroll\n    );\n    this.codeAdditions?.removeEventListener(\n      'scroll',\n      this.handleAdditionsScroll\n    );\n    clearTimeout(this.timeoutId);\n    this.codeDeletions = undefined;\n    this.codeAdditions = undefined;\n  }\n\n  setup(\n    pre: HTMLPreElement,\n    codeDeletions?: HTMLElement,\n    codeAdditions?: HTMLElement\n  ): void {\n    // If no code elements were provided, lets try to find them in\n    // the pre element\n    if (codeDeletions == null || codeAdditions == null) {\n      for (const element of pre.children ?? []) {\n        if (!(element instanceof HTMLElement)) {\n          continue;\n        }\n        if ('deletions' in element.dataset) {\n          codeDeletions = element;\n        } else if ('additions' in element.dataset) {\n          codeAdditions = element;\n        }\n      }\n    }\n    if (codeAdditions == null || codeDeletions == null) {\n      this.cleanUp();\n      return;\n    }\n    this.codeDeletions?.removeEventListener(\n      'scroll',\n      this.handleDeletionsScroll\n    );\n    this.codeAdditions?.removeEventListener(\n      'scroll',\n      this.handleAdditionsScroll\n    );\n    this.codeDeletions = codeDeletions;\n    this.codeAdditions = codeAdditions;\n    codeDeletions.addEventListener('scroll', this.handleDeletionsScroll, {\n      passive: true,\n    });\n    codeAdditions.addEventListener('scroll', this.handleAdditionsScroll, {\n      passive: true,\n    });\n  }\n\n  private handleDeletionsScroll = () => {\n    if (this.isAdditionsScrolling) {\n      return;\n    }\n    this.isDeletionsScrolling = true;\n    clearTimeout(this.timeoutId);\n    this.timeoutId = setTimeout(() => {\n      this.isDeletionsScrolling = false;\n    }, 300);\n    this.codeAdditions?.scrollTo({\n      left: this.codeDeletions?.scrollLeft,\n    });\n  };\n\n  private handleAdditionsScroll = () => {\n    if (this.isDeletionsScrolling) {\n      return;\n    }\n    this.isAdditionsScrolling = true;\n    clearTimeout(this.timeoutId);\n    this.timeoutId = setTimeout(() => {\n      this.isAdditionsScrolling = false;\n    }, 300);\n    this.codeDeletions?.scrollTo({\n      left: this.codeAdditions?.scrollLeft,\n    });\n  };\n}\n", "import {\n  ALTERNATE_FILE_NAMES_GIT,\n  COMMIT_METADATA_SPLIT,\n  FILENAME_HEADER_REGEX,\n  FILENAME_HEADER_REGEX_GIT,\n  FILE_CONTEXT_BLOB,\n  FILE_MODE_FROM_INDEX,\n  GIT_DIFF_FILE_BREAK_REGEX,\n  HUNK_HEADER,\n  SPLIT_WITH_NEWLINES,\n  UNIFIED_DIFF_FILE_BREAK_REGEX,\n} from '../constants';\nimport type { FileDiffMetadata, Hunk, ParsedPatch } from '../types';\n\nfunction processPatch(data: string): ParsedPatch {\n  const isGitDiff = GIT_DIFF_FILE_BREAK_REGEX.test(data);\n  const rawFiles = data.split(\n    isGitDiff ? GIT_DIFF_FILE_BREAK_REGEX : UNIFIED_DIFF_FILE_BREAK_REGEX\n  );\n  let patchMetadata: string | undefined;\n  const files: FileDiffMetadata[] = [];\n  let currentFile: FileDiffMetadata | undefined;\n  for (const file of rawFiles) {\n    if (isGitDiff && !GIT_DIFF_FILE_BREAK_REGEX.test(file)) {\n      if (patchMetadata == null) {\n        patchMetadata = file;\n      } else {\n        console.error('parsePatchContent: unknown file blob:', file);\n      }\n      // If we get in here, it's most likely the introductory metadata from the\n      // patch, or something is fucked with the diff format\n      continue;\n    } else if (!isGitDiff && !UNIFIED_DIFF_FILE_BREAK_REGEX.test(file)) {\n      if (patchMetadata == null) {\n        patchMetadata = file;\n      } else {\n        console.error('parsePatchContent: unknown file blob:', file);\n      }\n      continue;\n    }\n    const hunks = file.split(FILE_CONTEXT_BLOB);\n    currentFile = undefined;\n    for (const hunk of hunks) {\n      const lines = hunk.split(SPLIT_WITH_NEWLINES);\n      const firstLine = lines.shift();\n      if (firstLine == null) {\n        console.error('parsePatchContent: invalid hunk', hunk);\n        continue;\n      }\n      const match = firstLine.match(HUNK_HEADER);\n      if (match == null || currentFile == null) {\n        if (currentFile != null) {\n          console.error('parsePatchContent: Invalid hunk', hunk);\n          continue;\n        }\n        currentFile = {\n          name: '',\n          prevName: undefined,\n          type: 'change',\n          hunks: [],\n          lines: 0,\n        };\n        // Push that first line back into the group of lines so we can properly\n        // parse it out\n        lines.unshift(firstLine);\n        for (const line of lines) {\n          const filenameMatch = line.match(\n            isGitDiff ? FILENAME_HEADER_REGEX_GIT : FILENAME_HEADER_REGEX\n          );\n          if (line.startsWith('diff --git')) {\n            const [, , prevName, , name] =\n              line.trim().match(ALTERNATE_FILE_NAMES_GIT) ?? [];\n            currentFile.name = name;\n            if (prevName !== name) {\n              currentFile.prevName = prevName;\n            }\n          } else if (filenameMatch != null) {\n            const [, type, fileName] = filenameMatch;\n            if (type === '---' && fileName !== '/dev/null') {\n              currentFile.prevName = fileName;\n              currentFile.name = fileName;\n            } else if (type === '+++' && fileName !== '/dev/null') {\n              currentFile.name = fileName;\n            }\n          }\n          // Git diffs have a bunch of additional metadata we can pull from\n          else if (isGitDiff) {\n            if (line.startsWith('new mode ')) {\n              currentFile.mode = line.replace('new mode', '').trim();\n            }\n            if (line.startsWith('old mode ')) {\n              currentFile.oldMode = line.replace('old mode', '').trim();\n            }\n            if (line.startsWith('new file mode')) {\n              currentFile.type = 'new';\n              currentFile.mode = line.replace('new file mode', '').trim();\n            }\n            if (line.startsWith('deleted file mode')) {\n              currentFile.type = 'deleted';\n              currentFile.mode = line.replace('deleted file mode', '').trim();\n            }\n            if (line.startsWith('similarity index')) {\n              if (line.startsWith('similarity index 100%')) {\n                currentFile.type = 'rename-pure';\n              } else {\n                currentFile.type = 'rename-changed';\n              }\n            }\n            if (line.startsWith('index ')) {\n              const [, mode] = line.trim().match(FILE_MODE_FROM_INDEX) ?? [];\n              if (mode != null) {\n                currentFile.mode = mode;\n              }\n            }\n            // We have to handle these for pure renames because there won't be\n            // --- and +++ lines\n            if (line.startsWith('rename from ')) {\n              currentFile.prevName = line.replace('rename from ', '');\n            }\n            if (line.startsWith('rename to ')) {\n              currentFile.name = line.replace('rename to ', '');\n            }\n          }\n        }\n        continue;\n      }\n      const hunkData: Hunk = {\n        additionCount: parseInt(match[4] ?? '1'),\n        additionStart: parseInt(match[3]),\n        deletedCount: parseInt(match[2] ?? '1'),\n        deletedStart: parseInt(match[1]),\n        hunkContent: lines.length > 0 ? lines : undefined,\n        hunkContext: match[5],\n        hunkSpecs: firstLine,\n      };\n      if (\n        isNaN(hunkData.additionCount) ||\n        isNaN(hunkData.deletedCount) ||\n        isNaN(hunkData.additionStart) ||\n        isNaN(hunkData.deletedStart)\n      ) {\n        console.error('parsePatchContent: invalid hunk metadata', hunkData);\n        continue;\n      }\n      // If the final line is an empty newline, lets yeet it, that's usually a\n      // separator between multiple patches in a single file.  Unclear if\n      // safe... but probably\n      if (lines[lines.length - 1] === '\\n') {\n        lines.pop();\n      }\n      currentFile.hunks.push(hunkData);\n      currentFile.lines += hunkData.hunkContent?.length ?? 0;\n    }\n    if (currentFile != null) {\n      if (\n        !isGitDiff &&\n        currentFile.prevName != null &&\n        currentFile.name !== currentFile.prevName\n      ) {\n        if (currentFile.hunks.length > 0) {\n          currentFile.type = 'rename-changed';\n        } else {\n          currentFile.type = 'rename-pure';\n        }\n      }\n      if (\n        currentFile.type !== 'rename-pure' &&\n        currentFile.type !== 'rename-changed'\n      ) {\n        currentFile.prevName = undefined;\n      }\n      files.push(currentFile);\n    }\n  }\n  return { patchMetadata, files };\n}\n\nexport function parsePatchFiles(data: string): ParsedPatch[] {\n  // NOTE(amadeus): This function is pretty forgiving in that it can accept a\n  // patch file that includes commit metdata, multiple commits, or not\n  const patches: ParsedPatch[] = [];\n  for (const patch of data.split(COMMIT_METADATA_SPLIT)) {\n    try {\n      patches.push(processPatch(patch));\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  return patches;\n}\n", "import { createTwoFilesPatch } from 'diff';\n\nimport { SPLIT_WITH_NEWLINES } from '../constants';\nimport type { FileContents, FileDiffMetadata } from '../types';\nimport { parsePatchFiles } from './parsePatchFiles';\n\nexport function parseDiffFromFile(\n  oldFile: FileContents,\n  newFile: FileContents\n): FileDiffMetadata {\n  const fileData = parsePatchFiles(\n    createTwoFilesPatch(\n      oldFile.name,\n      newFile.name,\n      oldFile.contents,\n      newFile.contents,\n      oldFile.header,\n      newFile.header\n    )\n  )[0]?.files[0];\n  if (fileData == null) {\n    throw new Error(\n      'parseDiffFrom: FileInvalid diff -- probably need to fix something -- if the files are the same maybe?'\n    );\n  }\n  fileData.oldLines = oldFile.contents.split(SPLIT_WITH_NEWLINES);\n  fileData.newLines = newFile.contents.split(SPLIT_WITH_NEWLINES);\n  return fileData;\n}\n", "import deepEquals from 'fast-deep-equal';\nimport type { Element } from 'hast';\n\nimport { DiffHunksRenderer, type HunksRenderResult } from './DiffHunksRenderer';\nimport { FileHeaderRenderer } from './FileHeaderRenderer';\nimport {\n  MouseEventManager,\n  type MouseEventManagerBaseOptions,\n  getMouseEventOptions,\n} from './MouseEventManager';\nimport { ResizeManager } from './ResizeManager';\nimport { ScrollSyncManager } from './ScrollSyncManager';\nimport { getSharedHighlighter } from './SharedHighlighter';\nimport { DEFAULT_THEMES, HEADER_METADATA_SLOT_ID } from './constants';\nimport { PJSContainerLoaded } from './custom-components/Container';\nimport { SVGSpriteSheet } from './sprite';\nimport type {\n  BaseDiffOptions,\n  DiffLineAnnotation,\n  FileContents,\n  FileDiffMetadata,\n  HunkData,\n  HunkSeparators,\n  PJSHighlighter,\n  RenderHeaderMetadataCallback,\n  ThemeTypes,\n} from './types';\nimport { getLineAnnotationName } from './utils/getLineAnnotationName';\nimport { getThemes } from './utils/getThemes';\nimport { createCodeNode, setWrapperProps } from './utils/html_render_utils';\nimport { parseDiffFromFile } from './utils/parseDiffFromFile';\n\ninterface FileDiffRenderProps<LAnnotation> {\n  fileDiff?: FileDiffMetadata;\n  oldFile?: FileContents;\n  newFile?: FileContents;\n  forceRender?: boolean;\n  fileContainer?: HTMLElement;\n  containerWrapper?: HTMLElement;\n  lineAnnotations?: DiffLineAnnotation<LAnnotation>[];\n}\n\nexport interface FileDiffOptions<LAnnotation>\n  extends Omit<BaseDiffOptions, 'hunkSeparators'>,\n    MouseEventManagerBaseOptions<'diff'> {\n  hunkSeparators?:\n    | Exclude<HunkSeparators, 'custom'>\n    | ((hunk: HunkData) => HTMLElement | DocumentFragment);\n  disableFileHeader?: boolean;\n  renderHeaderMetadata?: RenderHeaderMetadataCallback;\n  renderAnnotation?(\n    annotation: DiffLineAnnotation<LAnnotation>\n  ): HTMLElement | undefined;\n}\n\nlet instanceId = -1;\n\nexport class FileDiff<LAnnotation = undefined> {\n  // NOTE(amadeus): We sorta need this to ensure the web-component file is\n  // properly loaded\n  static LoadedCustomComponent: boolean = PJSContainerLoaded;\n\n  readonly __id: number = ++instanceId;\n\n  private fileContainer: HTMLElement | undefined;\n  private spriteSVG: SVGElement | undefined;\n  private pre: HTMLPreElement | undefined;\n  private unsafeCSSStyle: HTMLStyleElement | undefined;\n\n  private headerElement: HTMLElement | undefined;\n  private headerMetadata: HTMLElement | undefined;\n  private customHunkElements: HTMLElement[] = [];\n\n  private hunksRenderer: DiffHunksRenderer<LAnnotation>;\n  private headerRenderer: FileHeaderRenderer;\n  private resizeManager: ResizeManager;\n  private scrollSyncManager: ScrollSyncManager;\n  private mouseEventManager: MouseEventManager<'diff'>;\n\n  private annotationElements: HTMLElement[] = [];\n  private lineAnnotations: DiffLineAnnotation<LAnnotation>[] = [];\n\n  private oldFile: FileContents | undefined;\n  private newFile: FileContents | undefined;\n  private fileDiff: FileDiffMetadata | undefined;\n\n  constructor(\n    public options: FileDiffOptions<LAnnotation> = { theme: DEFAULT_THEMES },\n    // NOTE(amadeus): Temp hack while we use this component in a react context\n    private isContainerManaged = false\n  ) {\n    this.hunksRenderer = new DiffHunksRenderer({\n      ...options,\n      hunkSeparators:\n        typeof options.hunkSeparators === 'function'\n          ? 'custom'\n          : options.hunkSeparators,\n    });\n    this.headerRenderer = new FileHeaderRenderer(options);\n    this.resizeManager = new ResizeManager();\n    this.scrollSyncManager = new ScrollSyncManager();\n    this.mouseEventManager = new MouseEventManager(\n      'diff',\n      getMouseEventOptions(\n        options,\n        typeof options.hunkSeparators === 'function' ||\n          (options.hunkSeparators ?? 'line-info') === 'line-info'\n          ? this.handleExpandHunk\n          : undefined\n      )\n    );\n  }\n\n  // FIXME(amadeus): This is a bit of a looming issue that I'll need to resolve:\n  // * Do we publicly allow merging of options or do we have individualized setters?\n  // * When setting new options, we need to figure out what settings require a\n  //   re-render and which can just be applied more elegantly\n  // * There's also an issue of options that live here on the File class and\n  //   those that live on the Hunk class, and it's a bit of an issue with passing\n  //   settings down and mirroring them (not great...)\n  setOptions(options: FileDiffOptions<LAnnotation> | undefined): void {\n    if (options == null) return;\n    this.options = options;\n    this.hunksRenderer.setOptions({\n      ...this.options,\n      hunkSeparators:\n        typeof options.hunkSeparators === 'function'\n          ? 'custom'\n          : options.hunkSeparators,\n    });\n    this.mouseEventManager.setOptions(\n      getMouseEventOptions(\n        options,\n        typeof options.hunkSeparators === 'function' ||\n          (options.hunkSeparators ?? 'line-info') === 'line-info'\n          ? this.handleExpandHunk\n          : undefined\n      )\n    );\n  }\n\n  private mergeOptions(options: Partial<FileDiffOptions<LAnnotation>>): void {\n    this.options = { ...this.options, ...options };\n  }\n\n  setThemeType(themeType: ThemeTypes): void {\n    if ((this.options.themeType ?? 'system') === themeType) {\n      return;\n    }\n    this.mergeOptions({ themeType });\n    this.hunksRenderer.setThemeType(themeType);\n    this.headerRenderer.setThemeType(themeType);\n\n    if (this.headerElement != null) {\n      if (themeType === 'system') {\n        delete this.headerElement.dataset.themeType;\n      } else {\n        this.headerElement.dataset.themeType = themeType;\n      }\n    }\n\n    // Update pre element theme mode\n    if (this.pre != null) {\n      switch (themeType) {\n        case 'system':\n          delete this.pre.dataset.themeType;\n          break;\n        case 'light':\n        case 'dark':\n          this.pre.dataset.themeType = themeType;\n          break;\n      }\n    }\n  }\n\n  setLineAnnotations(lineAnnotations: DiffLineAnnotation<LAnnotation>[]): void {\n    this.lineAnnotations = lineAnnotations;\n  }\n\n  cleanUp(): void {\n    this.hunksRenderer.cleanUp();\n    this.headerRenderer.cleanUp();\n    this.resizeManager.cleanUp();\n    this.mouseEventManager.cleanUp();\n    this.scrollSyncManager.cleanUp();\n\n    // Clean up the data\n    this.fileDiff = undefined;\n    this.oldFile = undefined;\n    this.newFile = undefined;\n\n    // Clean up the elements\n    if (!this.isContainerManaged) {\n      this.fileContainer?.parentNode?.removeChild(this.fileContainer);\n    }\n    this.fileContainer = undefined;\n    this.pre = undefined;\n    this.headerElement = undefined;\n  }\n\n  async hydrate(props: FileDiffRenderProps<LAnnotation>): Promise<void> {\n    if (props.fileContainer == null) {\n      throw new Error(\n        'FileDiff: you must provide a fileContainer on hydration'\n      );\n    }\n    for (const element of Array.from(\n      props.fileContainer.shadowRoot?.children ?? []\n    )) {\n      if (element instanceof SVGElement) {\n        this.spriteSVG = element;\n        continue;\n      }\n      if (!(element instanceof HTMLElement)) {\n        continue;\n      }\n      if (element instanceof HTMLPreElement) {\n        this.pre = element;\n        continue;\n      }\n      if ('pjsHeader' in element.dataset) {\n        this.headerElement = element;\n        continue;\n      }\n      if (element instanceof HTMLStyleElement) {\n        this.unsafeCSSStyle = element;\n        continue;\n      }\n    }\n    // If we have no pre tag, then we should render\n    if (this.pre == null) {\n      await this.render(props);\n    }\n    // Otherwise orchestrate our setup\n    else {\n      this.fileContainer = props.fileContainer;\n      delete this.pre.dataset.dehydrated;\n\n      this.lineAnnotations = props.lineAnnotations ?? this.lineAnnotations;\n      this.newFile = props.newFile;\n      this.oldFile = props.oldFile;\n      this.fileDiff = props.fileDiff;\n\n      void this.hunksRenderer.initializeHighlighter();\n      // FIXME(amadeus): not sure how to handle this yet...\n      // this.renderSeparators();\n      this.renderAnnotations();\n      this.injectUnsafeCSS();\n      this.mouseEventManager.setup(this.pre);\n      if ((this.options.overflow ?? 'scroll') === 'scroll') {\n        this.resizeManager.setup(this.pre);\n        this.scrollSyncManager.setup(this.pre);\n      }\n    }\n  }\n\n  async rerender(): Promise<void> {\n    await this.render({\n      oldFile: this.oldFile,\n      newFile: this.newFile,\n      fileDiff: this.fileDiff,\n      forceRender: true,\n    });\n  }\n\n  handleExpandHunk = (hunkIndex: number): void => {\n    this.hunksRenderer.expandHunk(hunkIndex);\n    void this.rerender();\n  };\n\n  async render({\n    oldFile,\n    newFile,\n    fileDiff,\n    fileContainer,\n    forceRender = false,\n    lineAnnotations,\n    containerWrapper,\n  }: FileDiffRenderProps<LAnnotation>): Promise<void> {\n    const annotationsChanged =\n      lineAnnotations != null &&\n      // Ideally this would just a quick === check because lineAnnotations is\n      // unbounded\n      !deepEquals(lineAnnotations, this.lineAnnotations);\n    if (\n      !forceRender &&\n      oldFile != null &&\n      newFile != null &&\n      !annotationsChanged &&\n      deepEquals(oldFile, this.oldFile) &&\n      deepEquals(newFile, this.newFile)\n    ) {\n      return;\n    }\n    if (\n      !forceRender &&\n      fileDiff != null &&\n      fileDiff === this.fileDiff &&\n      !annotationsChanged\n    ) {\n      return;\n    }\n\n    this.oldFile = oldFile;\n    this.newFile = newFile;\n    if (fileDiff != null) {\n      this.fileDiff = fileDiff;\n    } else if (oldFile != null && newFile != null) {\n      this.fileDiff = parseDiffFromFile(oldFile, newFile);\n    }\n\n    if (lineAnnotations != null) {\n      this.setLineAnnotations(lineAnnotations);\n    }\n    if (this.fileDiff == null) {\n      return;\n    }\n    this.hunksRenderer.setOptions({\n      ...this.options,\n      hunkSeparators:\n        typeof this.options.hunkSeparators === 'function'\n          ? 'custom'\n          : this.options.hunkSeparators,\n    });\n\n    // This is kinda jank, lol\n    this.hunksRenderer.setLineAnnotations(this.lineAnnotations);\n\n    const { disableFileHeader = false } = this.options;\n\n    if (disableFileHeader) {\n      this.headerRenderer.cleanUp();\n      // Remove existing header from DOM\n      if (this.headerElement != null) {\n        this.headerElement.parentNode?.removeChild(this.headerElement);\n        this.headerElement = undefined;\n      }\n    } else {\n      const { theme, themeType } = this.options;\n      this.headerRenderer.setOptions({ theme, themeType });\n    }\n\n    const [highlighter, headerResult, hunksResult] = await Promise.all([\n      getSharedHighlighter({\n        themes: getThemes(this.options.theme),\n        langs: [],\n      }),\n      !disableFileHeader\n        ? this.headerRenderer.render(this.fileDiff)\n        : undefined,\n      this.hunksRenderer.render(this.fileDiff),\n    ]);\n\n    // If both are null, most likely a cleanup, lets abort\n    if (headerResult == null && hunksResult == null) {\n      return;\n    }\n\n    fileContainer = this.getOrCreateFileContainer(fileContainer);\n    if (headerResult != null) {\n      this.applyHeaderToDOM(headerResult, fileContainer);\n    }\n    if (hunksResult != null) {\n      if (containerWrapper != null) {\n        containerWrapper.appendChild(fileContainer);\n      }\n      const pre = this.getOrCreatePre(fileContainer);\n      this.applyHunksToDOM(hunksResult, pre, highlighter);\n      this.renderSeparators(hunksResult.hunkData);\n      this.renderAnnotations();\n    }\n  }\n\n  private renderSeparators(hunkData: HunkData[]): void {\n    const { hunkSeparators } = this.options;\n    if (\n      this.isContainerManaged ||\n      this.fileContainer == null ||\n      typeof hunkSeparators !== 'function'\n    ) {\n      return;\n    }\n    for (const element of this.customHunkElements) {\n      element.parentNode?.removeChild(element);\n    }\n    this.customHunkElements.length = 0;\n    for (const hunk of hunkData) {\n      const element = document.createElement('div');\n      element.style.display = 'contents';\n      element.slot = hunk.slotName;\n      element.appendChild(hunkSeparators(hunk));\n      this.fileContainer.appendChild(element);\n      this.customHunkElements.push(element);\n    }\n  }\n\n  private renderAnnotations(): void {\n    if (this.isContainerManaged || this.fileContainer == null) {\n      return;\n    }\n    // Handle annotation elements\n    for (const element of this.annotationElements) {\n      element.parentNode?.removeChild(element);\n    }\n    this.annotationElements.length = 0;\n\n    const { renderAnnotation } = this.options;\n    if (renderAnnotation != null && this.lineAnnotations.length > 0) {\n      for (const annotation of this.lineAnnotations) {\n        const content = renderAnnotation(annotation);\n        if (content == null) continue;\n        const el = document.createElement('div');\n        el.dataset.annotationSlot = '';\n        el.slot = getLineAnnotationName(annotation);\n        el.appendChild(content);\n        this.annotationElements.push(el);\n        this.fileContainer.appendChild(el);\n      }\n    }\n  }\n\n  private getOrCreateFileContainer(fileContainer?: HTMLElement): HTMLElement {\n    this.fileContainer =\n      fileContainer ??\n      this.fileContainer ??\n      document.createElement('file-diff');\n    if (this.spriteSVG == null) {\n      const fragment = document.createElement('div');\n      fragment.innerHTML = SVGSpriteSheet;\n      const firstChild = fragment.firstChild;\n      if (firstChild instanceof SVGElement) {\n        this.spriteSVG = firstChild;\n        this.fileContainer.shadowRoot?.appendChild(this.spriteSVG);\n      }\n    }\n    return this.fileContainer;\n  }\n\n  getFileContainer(): HTMLElement | undefined {\n    return this.fileContainer;\n  }\n\n  private getOrCreatePre(container: HTMLElement): HTMLPreElement {\n    // If we haven't created a pre element yet, lets go ahead and do that\n    if (this.pre == null) {\n      this.pre = document.createElement('pre');\n      container.shadowRoot?.appendChild(this.pre);\n    }\n    // If we have a new parent container for the pre element, lets go ahead and\n    // move it into the new container\n    else if (this.pre.parentNode !== container) {\n      container.shadowRoot?.appendChild(this.pre);\n    }\n    return this.pre;\n  }\n\n  private applyHeaderToDOM(headerAST: Element, container: HTMLElement): void {\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = this.headerRenderer.renderResultToHTML(headerAST);\n    const newHeader = tempDiv.firstElementChild;\n    if (!(newHeader instanceof HTMLElement)) {\n      return;\n    }\n    if (this.headerElement != null) {\n      container.shadowRoot?.replaceChild(newHeader, this.headerElement);\n    } else {\n      container.shadowRoot?.prepend(newHeader);\n    }\n    this.headerElement = newHeader;\n\n    if (this.isContainerManaged) return;\n\n    const { renderHeaderMetadata } = this.options;\n    if (this.headerMetadata != null) {\n      this.headerMetadata.parentNode?.removeChild(this.headerMetadata);\n    }\n    const content =\n      renderHeaderMetadata?.({\n        oldFile: this.oldFile,\n        newFile: this.newFile,\n        fileDiff: this.fileDiff,\n      }) ?? undefined;\n    if (content != null) {\n      this.headerMetadata = document.createElement('div');\n      this.headerMetadata.slot = HEADER_METADATA_SLOT_ID;\n      if (content instanceof Element) {\n        this.headerMetadata.appendChild(content);\n      } else {\n        this.headerMetadata.innerText = `${content}`;\n      }\n      container.appendChild(this.headerMetadata);\n    }\n  }\n\n  private setPreAttributes(\n    pre: HTMLPreElement,\n    highlighter: PJSHighlighter,\n    result: HunksRenderResult\n  ): void {\n    const {\n      diffStyle = 'split',\n      overflow = 'scroll',\n      theme,\n      themeType = 'system',\n      diffIndicators = 'bars',\n      disableBackground = false,\n    } = this.options;\n    const unified = diffStyle === 'unified';\n    const split = unified\n      ? false\n      : result.additionsAST != null && result.deletionsAST != null;\n    const wrap = overflow === 'wrap';\n    setWrapperProps({\n      pre,\n      theme,\n      highlighter,\n      split,\n      wrap,\n      themeType,\n      diffIndicators,\n      disableBackground,\n      totalLines: result.totalLines,\n    });\n  }\n\n  private injectUnsafeCSS(): void {\n    if (this.fileContainer?.shadowRoot == null) {\n      return;\n    }\n    const { unsafeCSS } = this.options;\n\n    if (unsafeCSS == null || unsafeCSS === '') {\n      return;\n    }\n\n    // Create or update the style element\n    if (this.unsafeCSSStyle == null) {\n      this.unsafeCSSStyle = document.createElement('style');\n      this.fileContainer.shadowRoot.appendChild(this.unsafeCSSStyle);\n    }\n    // Wrap in @layer unsafe to match SSR behavior\n    this.unsafeCSSStyle.insertAdjacentText(\n      'beforeend',\n      `@layer unsafe {\\n${unsafeCSS}\\n}`\n    );\n  }\n\n  private applyHunksToDOM(\n    result: HunksRenderResult,\n    pre: HTMLPreElement,\n    highlighter: PJSHighlighter\n  ): void {\n    this.setPreAttributes(pre, highlighter, result);\n\n    // Clear existing content\n    pre.innerHTML = '';\n\n    let codeDeletions: HTMLElement | undefined;\n    let codeAdditions: HTMLElement | undefined;\n    // Create code elements and insert HTML content\n    if (result.unifiedAST != null) {\n      const codeUnified = createCodeNode({ columnType: 'unified' });\n      codeUnified.innerHTML = this.hunksRenderer.renderPartialHTML(\n        result.unifiedAST\n      );\n      pre.appendChild(codeUnified);\n    } else {\n      if (result.deletionsAST != null) {\n        codeDeletions = createCodeNode({ columnType: 'deletions' });\n        codeDeletions.innerHTML = this.hunksRenderer.renderPartialHTML(\n          result.deletionsAST\n        );\n        pre.appendChild(codeDeletions);\n      }\n      if (result.additionsAST != null) {\n        codeAdditions = createCodeNode({ columnType: 'additions' });\n        codeAdditions.innerHTML = this.hunksRenderer.renderPartialHTML(\n          result.additionsAST\n        );\n        pre.appendChild(codeAdditions);\n      }\n    }\n\n    this.injectUnsafeCSS();\n\n    this.mouseEventManager.setup(pre);\n    if ((this.options.overflow ?? 'scroll') === 'scroll') {\n      this.resizeManager.setup(pre);\n      this.scrollSyncManager.setup(pre, codeDeletions, codeAdditions);\n    } else {\n      this.resizeManager.cleanUp();\n      this.scrollSyncManager.cleanUp();\n    }\n  }\n}\n", "type Callback = (time: number) => unknown;\n\nconst queuedCallbacks = new Set<Callback>();\nlet callbacks = new Set<Callback>();\nlet frameId: null | number = null;\nlet isRendering = false;\n\n// TODO(amadeus): Figure out a proper name for this module...\nexport function queueRender(callback: Callback): void {\n  if (isRendering) {\n    queuedCallbacks.add(callback);\n    return;\n  }\n  callbacks.add(callback);\n  frameId ??= requestAnimationFrame(render);\n}\n\nfunction render(time: number): void {\n  isRendering = true;\n  for (const callback of callbacks) {\n    try {\n      callback(time);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  callbacks.clear();\n  if (queuedCallbacks.size > 0) {\n    callbacks = new Set(queuedCallbacks);\n    queuedCallbacks.clear();\n    frameId = requestAnimationFrame(render);\n  } else {\n    frameId = null;\n  }\n  isRendering = false;\n}\n", "import type { GrammarState, ThemedToken } from '@shikijs/core';\n\nimport type {\n  ShikiStreamTokenizerEnqueueResult,\n  ShikiStreamTokenizerOptions,\n} from './types';\n\nexport class ShikiStreamTokenizer {\n  public readonly options: ShikiStreamTokenizerOptions;\n\n  public tokensStable: ThemedToken[] = [];\n  public tokensUnstable: ThemedToken[] = [];\n\n  public lastUnstableCodeChunk: string = '';\n  public lastStableGrammarState: GrammarState | undefined;\n\n  constructor(options: ShikiStreamTokenizerOptions) {\n    this.options = options;\n  }\n\n  /**\n   * Enqueue a chunk of code to the buffer.\n   */\n  // eslint-disable-next-line @typescript-eslint/require-await\n  async enqueue(chunk: string): Promise<ShikiStreamTokenizerEnqueueResult> {\n    const chunkLines = (this.lastUnstableCodeChunk + chunk).split('\\n');\n\n    const stable: ThemedToken[] = [];\n    let unstable: ThemedToken[] = [];\n    const recall = this.tokensUnstable.length;\n\n    chunkLines.forEach((line, i) => {\n      const isLastLine = i === chunkLines.length - 1;\n\n      const result = this.options.highlighter.codeToTokens(line, {\n        ...this.options,\n        grammarState: this.lastStableGrammarState,\n      });\n      const tokens = result.tokens[0]; // only one line\n      if (!isLastLine) tokens.push({ content: '\\n', offset: 0 });\n\n      if (!isLastLine) {\n        this.lastStableGrammarState = result.grammarState;\n        stable.push(...tokens);\n      } else {\n        unstable = tokens;\n        this.lastUnstableCodeChunk = line;\n      }\n    });\n\n    this.tokensStable.push(...stable);\n    this.tokensUnstable = unstable;\n\n    return {\n      recall,\n      stable,\n      unstable,\n    };\n  }\n\n  close(): { stable: ThemedToken[] } {\n    const stable = this.tokensUnstable;\n    this.tokensUnstable = [];\n    this.lastUnstableCodeChunk = '';\n    this.lastStableGrammarState = undefined;\n    return {\n      stable,\n    };\n  }\n\n  clear(): void {\n    this.tokensStable = [];\n    this.tokensUnstable = [];\n    this.lastUnstableCodeChunk = '';\n    this.lastStableGrammarState = undefined;\n  }\n\n  clone(): ShikiStreamTokenizer {\n    const clone = new ShikiStreamTokenizer(this.options);\n    clone.lastUnstableCodeChunk = this.lastUnstableCodeChunk;\n    clone.tokensUnstable = this.tokensUnstable;\n    clone.tokensStable = this.tokensStable;\n    clone.lastStableGrammarState = this.lastStableGrammarState;\n    return clone;\n  }\n}\n", "import type { ThemedToken } from '@shikijs/core';\n\nimport { ShikiStreamTokenizer } from './tokenizer';\nimport type { CodeToTokenTransformStreamOptions, RecallToken } from './types';\n\n/**\n * Create a transform stream that takes code chunks and emits themed tokens.\n */\nexport class CodeToTokenTransformStream extends TransformStream<\n  string,\n  ThemedToken | RecallToken\n> {\n  readonly tokenizer: ShikiStreamTokenizer;\n  readonly options: CodeToTokenTransformStreamOptions;\n\n  constructor(options: CodeToTokenTransformStreamOptions) {\n    const tokenizer = new ShikiStreamTokenizer(options);\n    const { allowRecalls = false } = options;\n\n    super({\n      async transform(chunk, controller) {\n        const {\n          stable,\n          unstable: buffer,\n          recall,\n        } = await tokenizer.enqueue(chunk);\n        if (allowRecalls && recall > 0) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          controller.enqueue({ recall } as any);\n        }\n        for (const token of stable) {\n          controller.enqueue(token);\n        }\n        if (allowRecalls) {\n          for (const token of buffer) {\n            controller.enqueue(token);\n          }\n        }\n      },\n      // eslint-disable-next-line @typescript-eslint/require-await\n      async flush(controller) {\n        const { stable } = tokenizer.close();\n        // if allow recalls, the tokens should already be sent\n        if (!allowRecalls) {\n          for (const token of stable) {\n            controller.enqueue(token);\n          }\n        }\n      },\n    });\n\n    this.tokenizer = tokenizer;\n    this.options = options;\n  }\n}\n", "import { getSharedHighlighter } from './SharedHighlighter';\nimport { queueRender } from './UniversalRenderer';\nimport { DEFAULT_THEMES } from './constants';\nimport { CodeToTokenTransformStream, type RecallToken } from './shiki-stream';\nimport type {\n  BaseCodeOptions,\n  PJSHighlighter,\n  ThemeTypes,\n  ThemedToken,\n} from './types';\nimport { formatCSSVariablePrefix } from './utils/formatCSSVariablePrefix';\nimport { getHighlighterOptions } from './utils/getHighlighterOptions';\nimport {\n  createCodeNode,\n  createRow,\n  createSpanFromToken,\n  setWrapperProps,\n} from './utils/html_render_utils';\n\nexport interface FileStreamOptions extends BaseCodeOptions {\n  startingLineIndex?: number;\n\n  onPreRender?(instance: FileStream): unknown;\n  onPostRender?(instance: FileStream): unknown;\n\n  onStreamStart?(controller: WritableStreamDefaultController): unknown;\n  onStreamWrite?(token: ThemedToken | RecallToken): unknown;\n  onStreamClose?(): unknown;\n  onStreamAbort?(reason: unknown): unknown;\n}\n\nexport class FileStream {\n  private highlighter: PJSHighlighter | undefined;\n  private stream: ReadableStream<string> | undefined;\n  private fileContainer: HTMLElement | undefined;\n  pre: HTMLPreElement | undefined;\n  private code: HTMLElement | undefined;\n\n  constructor(public options: FileStreamOptions = { theme: DEFAULT_THEMES }) {\n    this.currentLineIndex = this.options.startingLineIndex ?? 1;\n  }\n\n  cleanUp(): void {\n    void this.stream?.cancel();\n  }\n\n  setThemeType(themeType: ThemeTypes): void {\n    if ((this.options.themeType ?? 'system') === themeType) {\n      return;\n    }\n    this.options = { ...this.options, themeType };\n\n    // Update pre element theme mode\n    if (this.pre != null) {\n      switch (themeType) {\n        case 'system':\n          delete this.pre.dataset.themeType;\n          break;\n        case 'light':\n        case 'dark':\n          this.pre.dataset.themeType = themeType;\n          break;\n      }\n    }\n  }\n\n  private async initializeHighlighter(): Promise<PJSHighlighter> {\n    this.highlighter = await getSharedHighlighter(\n      getHighlighterOptions(this.options.lang, this.options)\n    );\n    return this.highlighter;\n  }\n\n  private queuedSetupArgs: [ReadableStream<string>, HTMLElement] | undefined;\n  async setup(\n    _source: ReadableStream<string>,\n    _wrapper: HTMLElement\n  ): Promise<void> {\n    const isSettingUp = this.queuedSetupArgs != null;\n    this.queuedSetupArgs = [_source, _wrapper];\n    if (isSettingUp) {\n      // TODO(amadeus): Make it so that this function can be properly\n      // awaitable, maybe?\n      return;\n    }\n    this.highlighter ??= await this.initializeHighlighter();\n\n    const [source, wrapper] = this.queuedSetupArgs;\n    this.queuedSetupArgs = undefined;\n\n    const stream = source;\n\n    this.setupStream(stream, wrapper, this.highlighter);\n  }\n\n  private setupStream(\n    stream: ReadableStream<string>,\n    wrapper: HTMLElement,\n    highlighter: PJSHighlighter\n  ): void {\n    const {\n      theme = DEFAULT_THEMES,\n      overflow = 'scroll',\n      themeType = 'system',\n    } = this.options;\n    const fileContainer = this.getOrCreateFileContainer();\n    if (fileContainer.parentElement == null) {\n      wrapper.appendChild(fileContainer);\n    }\n    this.pre ??= document.createElement('pre');\n    if (this.pre.parentElement == null) {\n      fileContainer.shadowRoot?.appendChild(this.pre);\n    }\n    const pre = setWrapperProps({\n      pre: this.pre,\n      split: false,\n      theme,\n      highlighter,\n      wrap: overflow === 'wrap',\n      themeType,\n      diffIndicators: 'none',\n      disableBackground: true,\n      totalLines: 0,\n    });\n    pre.innerHTML = '';\n\n    this.pre = pre;\n    this.code = createCodeNode({ pre });\n    if (this.stream != null) {\n      // Should we be doing this?\n      void this.stream.cancel();\n    }\n    const { onStreamStart, onStreamClose, onStreamAbort } = this.options;\n    this.stream = stream;\n    void this.stream\n      .pipeThrough(\n        typeof theme === 'string'\n          ? new CodeToTokenTransformStream({\n              ...this.options,\n              theme,\n              highlighter,\n              allowRecalls: true,\n              defaultColor: false,\n              cssVariablePrefix: formatCSSVariablePrefix(),\n            })\n          : new CodeToTokenTransformStream({\n              ...this.options,\n              themes: theme,\n              highlighter,\n              allowRecalls: true,\n              defaultColor: false,\n              cssVariablePrefix: formatCSSVariablePrefix(),\n            })\n      )\n      .pipeTo(\n        new WritableStream({\n          start(controller) {\n            onStreamStart?.(controller);\n          },\n          close() {\n            onStreamClose?.();\n          },\n          abort(reason) {\n            onStreamAbort?.(reason);\n          },\n          write: this.handleWrite,\n        })\n      );\n  }\n\n  private queuedTokens: (ThemedToken | RecallToken)[] = [];\n  private handleWrite = (token: ThemedToken | RecallToken) => {\n    // If we've recalled tokens we haven't rendered yet, we can just yeet them\n    // and never apply them\n    if ('recall' in token && this.queuedTokens.length >= token.recall) {\n      this.queuedTokens.length = this.queuedTokens.length - token.recall;\n    } else {\n      this.queuedTokens.push(token);\n    }\n    queueRender(this.render);\n    this.options.onStreamWrite?.(token);\n  };\n\n  private currentLineIndex: number;\n  private currentLineElement: HTMLElement | undefined;\n  private render = () => {\n    this.options.onPreRender?.(this);\n    const linesToAppend: HTMLElement[] = [];\n    for (const token of this.queuedTokens) {\n      if ('recall' in token) {\n        if (this.currentLineElement == null) {\n          throw new Error(\n            'FileStream.render: no current line element, shouldnt be possible to get here'\n          );\n        }\n        if (token.recall > this.currentLineElement.childNodes.length) {\n          throw new Error(\n            `FileStream.render: Token recall exceed the current line, there's probably a bug...`\n          );\n        }\n        for (let i = 0; i < token.recall; i++) {\n          this.currentLineElement.lastChild?.remove();\n        }\n      } else {\n        const span = createSpanFromToken(token);\n        if (this.currentLineElement == null) {\n          linesToAppend.push(this.createLine());\n        }\n        this.currentLineElement?.appendChild(span);\n        if (token.content === '\\n') {\n          this.currentLineIndex++;\n          linesToAppend.push(this.createLine());\n        }\n      }\n    }\n    for (const line of linesToAppend) {\n      this.code?.appendChild(line);\n    }\n    this.queuedTokens.length = 0;\n    this.options.onPostRender?.(this);\n  };\n\n  private createLine(): HTMLElement {\n    const { row, content } = createRow(this.currentLineIndex);\n    this.currentLineElement = content;\n    return row;\n  }\n\n  private getOrCreateFileContainer(fileContainer?: HTMLElement): HTMLElement {\n    if (\n      (fileContainer != null && fileContainer === this.fileContainer) ||\n      (fileContainer == null && this.fileContainer != null)\n    ) {\n      return this.fileContainer;\n    }\n    this.fileContainer = fileContainer ?? document.createElement('file-diff');\n    return this.fileContainer;\n  }\n}\n"],
  "mappings": "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",
  "names": ["highlighter", "decorations", "ShikiError", "Registry", "createHighlighter", "bundledLanguages", "bundledThemes", "getSingletonHighlighter", "ShikiError", "_OnigString", "codeToHtml", "codeToHast", "codeToTokens", "codeToTokensBase", "codeToTokensWithThemes", "getLastGrammarState", "highlighter: CachedOrLoadingHighlighterType", "themesToLoad: (\n            | PJSThemeNames\n            | Promise<ThemeRegistrationResolved>\n          )[]", "instance", "loaders: Promise<void>[]", "COMMIT_METADATA_SPLIT: RegExp", "GIT_DIFF_FILE_BREAK_REGEX: RegExp", "UNIFIED_DIFF_FILE_BREAK_REGEX: RegExp", "FILE_CONTEXT_BLOB: RegExp", "HUNK_HEADER: RegExp", "SPLIT_WITH_NEWLINES: RegExp", "FILENAME_HEADER_REGEX: RegExp", "FILENAME_HEADER_REGEX_GIT: RegExp", "ALTERNATE_FILE_NAMES_GIT: RegExp", "FILE_MODE_FROM_INDEX: RegExp", "DEFAULT_THEMES: ThemesType", "EXTENSION_TO_FILE_FORMAT: ExtensionFormatMap", "dAnnotations: string[]", "aAnnotations: string[]", "span: AnnotationSpan", "highlighter", "contentChildren: ElementContent[]", "firstChild: RootContent | Element | Root | null", "highlighter", "properties: Properties", "children: ElementContent[]", "state: SharedRenderState", "transformers: ShikiTransformer[]", "children: ElementContent[]", "tokenStyleNormalizer: ShikiTransformer", "style: Record<string, string>", "themesArr: PJSThemeNames[]", "value", "key", "splitLines", "splitLines", "unifiedDecorations: DecorationItem[]", "additionDecorations: DecorationItem[]", "deletionDecorations: DecorationItem[]", "lineDiff", "deletionSpans: [0 | 1, string][]", "additionSpans: [0 | 1, string][]", "annotations: AnnotationSpan[]", "spanMarkers: (AnnotationSpan | 0)[]", "newSpans: LineSpans[]", "highlighter", "additionsAST: ElementContent[]", "deletionsAST: ElementContent[]", "unifiedAST: ElementContent[]", "toClass", "hunkData: HunkData[]", "prevHunk: Hunk | undefined", "decorations", "additionContent: string[]", "additionLineInfo: Record<number, LineInfo | undefined>", "deletionContent: string[]", "deletionLineInfo: Record<number, LineInfo | undefined>", "unifiedContent: string[]", "unifiedLineInfo: Record<number, LineInfo | undefined>", "diffGroups: ChangeHunk[]", "unresolvedSpans: UnresolvedAnnotationSpan[]", "currentChangeGroup: ChangeHunk | undefined", "resolvedSpan: AnnotationSpan", "lineInfo: LineInfo", "lastType: HunkLineType | undefined", "firstChild: RootContent | Element | Root | null", "options: FileHeaderRendererOptions", "highlighter", "mode: TMode", "options: MouseEventManagerOptions<TMode>", "reasons: string[]", "item: ObservedGridNodes", "item: ObservedAnnotationNodes", "highlighter", "options: FileRendererOptions", "highlighter", "toClass", "firstChild: RootContent | Element | Root | null", "lineInfoMap: Record<number, LineInfo | undefined>", "lineInfo: LineInfo", "decorations", "sheet: CSSStyleSheet | undefined", "styles", "options: FileOptions<LAnnotation>", "deepEquals", "highlighter", "patchMetadata: string | undefined", "files: FileDiffMetadata[]", "currentFile: FileDiffMetadata | undefined", "hunkData: Hunk", "patches: ParsedPatch[]", "instanceId", "options: FileDiffOptions<LAnnotation>", "deepEquals", "highlighter", "codeDeletions: HTMLElement | undefined", "codeAdditions: HTMLElement | undefined", "frameId: null | number", "ShikiStreamTokenizer", "stable: ThemedToken[]", "unstable: ThemedToken[]", "options: FileStreamOptions", "highlighter", "linesToAppend: HTMLElement[]"]
}
