import {
  access,
  asArray,
  createHydratableSignal,
  tryOnCleanup
} from "./chunk-C7FPLDYE.js";
import {
  isServer
} from "./chunk-AJK3XRV4.js";
import {
  createEffect,
  createRenderEffect
} from "./chunk-VDQTAU36.js";
import "./chunk-G3PMV62Z.js";

// node_modules/@solid-primitives/event-listener/dist/eventListener.js
function makeEventListener(target, type, handler, options) {
  target.addEventListener(type, handler, options);
  return tryOnCleanup(target.removeEventListener.bind(target, type, handler, options));
}
function createEventListener(targets, type, handler, options) {
  if (isServer)
    return;
  const attachListeners = () => {
    asArray(access(targets)).forEach((el) => {
      if (el)
        asArray(access(type)).forEach((type2) => makeEventListener(el, type2, handler, options));
    });
  };
  if (typeof targets === "function")
    createEffect(attachListeners);
  else
    createRenderEffect(attachListeners);
}

// node_modules/@solid-primitives/active-element/dist/index.js
var getActiveElement = () => document.activeElement === document.body ? null : document.activeElement;
function makeActiveElementListener(callback) {
  if (isServer) {
    return () => void 0;
  }
  const handleChange = () => callback(getActiveElement());
  const clear1 = makeEventListener(window, "blur", handleChange, true);
  const clear2 = makeEventListener(window, "focus", handleChange, true);
  return () => (clear1(), clear2());
}
function createActiveElement() {
  if (isServer) {
    return () => null;
  }
  const [active, setActive] = createHydratableSignal(null, getActiveElement);
  makeActiveElementListener(setActive);
  return active;
}
function makeFocusListener(target, callback, useCapture = true) {
  if (isServer) {
    return () => void 0;
  }
  const clear1 = makeEventListener(target, "blur", callback.bind(void 0, false), useCapture);
  const clear2 = makeEventListener(target, "focus", callback.bind(void 0, true), useCapture);
  return () => (clear1(), clear2());
}
function createFocusSignal(target) {
  if (isServer) {
    return () => false;
  }
  const [isActive, setIsActive] = createHydratableSignal(false, () => document.activeElement === target);
  createEventListener(target, "blur", () => setIsActive(false), true);
  createEventListener(target, "focus", () => setIsActive(true), true);
  return isActive;
}
var focus = (target, props) => {
  if (isServer) {
    return;
  }
  const callback = props();
  callback(document.activeElement === target);
  makeFocusListener(target, callback);
};
export {
  createActiveElement,
  createFocusSignal,
  focus,
  makeActiveElementListener,
  makeFocusListener
};
//# sourceMappingURL=@solid-primitives_active-element.js.map
